{"version":3,"file":"static/js/main.87168e30.js","mappings":"2MAGO,MAAMA,EAAUC,CAAAA,SAAAA,aAAAA,WAAAA,GAAAA,aAAAA,CAAAA,KAAAA,gBAAAA,KAAAA,gBAAAA,QAAAA,QAAAA,YAAAA,WAAAA,KAAAA,8BAAAA,OAAAA,eAAAA,mBAAAA,YAAAA,gBAAAA,EAAAA,IAAAA,CAAAA,EAAAA,aAAAA,CAAAA,KAAAA,8BAAAA,MAAAA,UAAAA,YAAAA,UAAAA,sBAAAA,iBAAAA,MAAAA,CAAAA,IAAAA,CAAAA,UAAAA,yCAAAA,WAAAA,SAAAA,UAAAA,CAAAA,MAAAA,UAAAA,OAAAA,iBAAAA,CAAAA,gBAAAA,YAAAA,YAAAA,EAAAA,SAAAA,MAAAA,gBAAAA,aAAYC,qBAAuB,yCAEpDC,EAAMC,EAAAA,QAAMC,OAAO,CACrBC,QAASN,EACTO,iBAAiB,EACjBC,eAAgB,YAChBC,eAAgB,gBAIpB,IAAIC,GAAe,EACfC,EAAqB,GAazBR,EAAIS,aAAaC,QAAQC,IACrBC,UACIC,QAAQC,IAAI,iBAAiBC,EAAOC,QAAQC,iBAAiBF,EAAOG,OAS7DH,GAEVI,IACGN,QAAQM,MAAM,sBAAuBA,GAC9BC,QAAQC,OAAOF,KAK9BnB,EAAIS,aAAaa,SAASX,IACrBW,IACOA,EAASP,OAAOG,IAAIK,SAAS,wBAC7BV,QAAQC,IAAI,kBAAkBQ,EAASE,UAAUF,EAASP,OAAOG,OAEjEL,QAAQC,IAAI,kBAAkBQ,EAASE,UAAUF,EAASP,OAAOG,MAAOI,EAASG,MAE9EH,GAEXV,UACI,MAAMc,EAAkBP,EAAMJ,OAE9BF,QAAQc,KAAK,eAAeR,EAAMG,UAAUE,UAAUE,GAAiBR,MAAOC,EAAMG,UAAUG,MAI9F,MAAMG,EAAmBF,GAAiBR,KAAKK,SAAS,mBAExD,GAC+B,MAA3BJ,EAAMG,UAAUE,SACfE,GAAiBG,SACjBD,EACH,CACE,GAAIrB,EACA,OAAO,IAAIa,QAASU,IAjDpC,IAA+BC,IAkDW,IAAMD,EAAQ9B,EAAI0B,IAjDxDlB,EAAmBwB,KAAKD,KAqDhBL,EAAgBG,QAAS,EACzBtB,GAAe,EAEf,IAWI,OAVAM,QAAQC,IAAI,wCACNb,EAAAA,QAAMgC,KAAK,GAAGC,+BAAgC,CAAC,EAAG,CAAE9B,iBAAiB,IAC3ES,QAAQC,IAAI,6BAEZP,GAAe,EAlE3BC,EAAmB2B,QAASJ,GAAOA,KACnCvB,EAAqB,SAqEH4B,EAAAA,aAAyB,SAAU,QAElCpC,EAAI0B,EACf,CAAE,MAAOW,GAcL,OAbAxB,QAAQM,MAAM,wBAAyBkB,GACvC9B,GAAe,QAGT6B,EAAAA,aAAyB,SAAU,eACnCA,EAAAA,gBAA4B,WAQ3BhB,QAAQC,OAAOgB,EAC1B,CACJ,CAEA,OAAOjB,QAAQC,OAAOF,KAI9B,U,cC7GA,MAAMmB,GAAcC,EAAAA,EAAAA,iBAEPC,EAAUA,KAAMC,EAAAA,EAAAA,YAAWH,GAE3BI,EAAeA,EAAGC,eAC3B,MAAOC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,OAC1BC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChC3B,EAAO8B,IAAYH,EAAAA,EAAAA,UAAS,IAI7BI,GAAYC,EAAAA,EAAAA,aAAYvC,UAC1BC,QAAQC,IAAI,qDACZ,IAEI,MAAMsC,QAAYpD,EAAIqD,IAAI,yBAC1BxC,QAAQC,IAAI,iDAAkDsC,EAAI3B,MAElEoB,EAAQO,EAAI3B,YACNW,EAAAA,aAAyB,SAAU,OAC7C,CAAE,MAAOkB,GACLzC,QAAQC,IAAI,6DAA8DwC,EAAIC,SAC9EV,EAAQ,YACFT,EAAAA,aAAyB,SAAU,QAC7C,CAAC,QACGY,GAAW,EACf,GACD,KAEHQ,EAAAA,EAAAA,WAAU,KACNN,KACD,CAACA,IAIJ,MA0GMO,EAAkBV,EAAU,OAASH,EAE3C,OACIc,EAAAA,EAAAA,KAACpB,EAAYqB,SAAQ,CAACC,MAAO,CACzBhB,OACAG,UACA5B,QACAsC,kBACAP,YACAW,QAASjB,EACTkB,MApHMlD,UACVqC,EAAS,IACTpC,QAAQC,IAAI,oCAAoCiD,KAChD,IACIlD,QAAQC,IAAI,sDACZ,MAAMsC,QAAYpD,EAAIiC,KAAK,uBAAwB,CAAE8B,UACrDlD,QAAQC,IAAI,oCAAqCsC,EAAI3B,MAI5C2B,EAAI3B,KAAKuC,IACVZ,EAAI3B,KAAKwC,IAAIC,WACTd,EAAI3B,KAAKD,OAarB,OAAO4B,EAAI3B,IACf,CAAE,MAAO6B,GACLzC,QAAQM,MAAM,8BAA+BmC,GAC7C,MAAMa,EAAMb,EAAIhC,UAAUG,MAAMN,OAAS,sDAEzC,MADA8B,EAASkB,GACHb,CACV,GAsFIc,YAnFYxD,UAChBqC,EAAS,IACTpC,QAAQC,IAAI,wCACZ,IACI,MAAMsC,QAAYpD,EAAIiC,KAAK,iBAAkB,CAAEoC,UAG/C,GAFAxD,QAAQC,IAAI,sCAAuCsC,EAAI3B,MAE/B,aAApB2B,EAAI3B,KAAKD,OAGT,MAAO,CAAEA,OAAQ,kBAEX0B,GAGd,CAAE,MAAOI,GAGL,MAFAzC,QAAQM,MAAM,sBAAuBmC,GACrCL,EAASK,EAAIhC,UAAUG,MAAM6C,QAAU,sCACjChB,CACV,GAiEIiB,UA9DU3D,MAAOoD,EAAKC,EAAIO,EAAKhD,KACnCyB,EAAS,IACTpC,QAAQC,IAAI,4BAA4B0D,KACxC,IACI,MAAMC,EAAU,CAAET,MAAKC,KAAIO,OAK3B,SAJMxE,EAAIiC,KAAK,qBAAsBwC,SAE/BvB,IAES,aAAX1B,EAGA,MAAO,CAAEA,OAAQ,WAKzB,CAAE,MAAO8B,GACLzC,QAAQM,MAAM,mCAAoCmC,GAGlD,MADAL,EADYK,GAAKhC,UAAUG,MAAMN,OAAS,mCAEpCmC,CACV,GAyCIoB,UAtCU9D,MAAOoD,EAAKC,KAC1BpD,QAAQC,IAAI,kCACZ,IACI,MAAMsC,QAAYpD,EAAIiC,KAAK,qBAAsB,CAAE+B,MAAKC,OAExD,OADApD,QAAQC,IAAI,gCAAiCsC,EAAI3B,MAC1C2B,EAAI3B,IACf,CAAE,MAAO6B,GAEL,MADAzC,QAAQM,MAAM,+BAAgCmC,GACxCA,CACV,GA8BIqB,OA3BO/D,UACXC,QAAQC,IAAI,gCACZ,UACUd,EAAIiC,KAAK,iBACnB,CAAE,MAAOqB,GACLzC,QAAQM,MAAM,yCAA0CmC,EAC5D,CAAC,QACGT,EAAQ,YACFT,EAAAA,gBAA4B,gBAC5BA,EAAAA,gBAA4B,UAEtC,GAiBIa,YACFN,SACGA,K,cC7Jb,MAAMiC,GAAmBrC,EAAAA,EAAAA,eAAc,MAE1BsC,EAAeA,KAAMpC,EAAAA,EAAAA,YAAWmC,GAGvCE,EAAiB,CAAC,IAAM,IAAM,IAAM,IAAO,KAC3CC,EAAoBD,EAAeE,OAAS,EAErCC,EAAoBA,EAAGtC,eAChC,MAAM,gBAAEc,EAAe,KAAEb,GAASJ,KAC3B0C,EAAQC,IAAarC,EAAAA,EAAAA,UAAS,OAC9BsC,EAAaC,IAAkBvC,EAAAA,EAAAA,UAAS,OACxCwC,EAAkBC,IAAuBzC,EAAAA,EAAAA,UAAS,iBAClD0C,EAAWC,IAAgB3C,EAAAA,EAAAA,UAAS,IACpC4C,EAAuBC,IAA4B7C,EAAAA,EAAAA,UAAS,GAC7D8C,GAAKC,EAAAA,EAAAA,QAAO,MACZC,GAAWD,EAAAA,EAAAA,QAAOE,EAAAA,QAASC,cAC3BC,GAAoBJ,EAAAA,EAAAA,QAAO,MAC3BK,GAAmBL,EAAAA,EAAAA,QAAO,MAC1BM,GAAmBN,EAAAA,EAAAA,QAAO,GAC1BO,GAAeP,EAAAA,EAAAA,QAAO,IACtBQ,GAAiBR,EAAAA,EAAAA,SAAO,GACxBS,GAAYT,EAAAA,EAAAA,SAAO,GACnBU,GAAoBV,EAAAA,EAAAA,QAAO,MAC3BW,GAAcX,EAAAA,EAAAA,QAAO,OAG3BrC,EAAAA,EAAAA,WAAU,KACN8C,EAAUG,SAAU,EACb,KACHH,EAAUG,SAAU,IAEzB,IAGH,MAAMC,GAAcvD,EAAAA,EAAAA,aAAaI,IAC7B,MAAMoD,EAAiC,kBAAZpD,EAAuBA,EAAUqD,KAAKC,UAAUtD,GAE3E,IAAIqC,EAAGa,SAAWb,EAAGa,QAAQK,aAAeC,UAAUC,KAwBlD,OANAZ,EAAaK,QAAQzE,KAAK2E,GACtBL,EAAUG,SACVhB,EAAaW,EAAaK,QAAQzB,QAEtCnE,QAAQC,IAAI,4CAA6C,kBAAmB6F,GAC5E9F,QAAQC,IAAI,6BAA6BsF,EAAaK,QAAQzB,WACvD,EAtBP,IAGI,OAFAY,EAAGa,QAAQQ,KAAKN,GAChB9F,QAAQC,IAAI,gCAAiC,kBAAmB6F,IACzD,CACX,CAAE,MAAOxF,GAQL,OAPAN,QAAQM,MAAM,uCAAwCA,GAEtDiF,EAAaK,QAAQzE,KAAK2E,GACtBL,EAAUG,SACVhB,EAAaW,EAAaK,QAAQzB,QAEtCnE,QAAQC,IAAI,gDAAiD,kBAAmB6F,IACzE,CACX,GAWL,IAGGO,GAAoB/D,EAAAA,EAAAA,aAAY,KAClC,GAAIiD,EAAaK,QAAQzB,OAAS,GAAKY,EAAGa,SAAWb,EAAGa,QAAQK,aAAeC,UAAUC,KAAM,CAC3FnG,QAAQC,IAAI,4BAA4BsF,EAAaK,QAAQzB,4BAA6B,sCAE1F,MAAMmC,EAAY,IAAIf,EAAaK,SACnCL,EAAaK,QAAU,GACnBH,EAAUG,SACVhB,EAAa,GAGjB0B,EAAUhF,QAAQ,CAACoB,EAAS6D,KACxB,IACIxB,EAAGa,QAAQQ,KAAK1D,GAChB1C,QAAQC,IAAI,uCAAuCsG,EAAQ,KAAKD,EAAUnC,UAAW,kBAAmBzB,EAC5G,CAAE,MAAOpC,GACLN,QAAQM,MAAM,+CAA+CiG,EAAQ,KAAMjG,GAE3EiF,EAAaK,QAAQzE,KAAKuB,GACtB+C,EAAUG,SACVhB,EAAaW,EAAaK,QAAQzB,OAE1C,GAER,GACD,IAGGqC,GAAiBlE,EAAAA,EAAAA,aAAamE,IAChCd,EAAYC,QAAUa,EACtBzG,QAAQC,IAAI,uCAAwCwG,IACrD,IAGGC,GAAoBpE,EAAAA,EAAAA,aAAY,KAClC,IAAKM,GAAmB4C,EAAeI,QAAS,OAEhD,MAAMe,EAAQ1C,EAAe2C,KAAKC,IAAIvB,EAAiBM,QAAS1B,IAChElE,QAAQC,IAAI,gDAAgDqF,EAAiBM,QAAU,QAAQe,SAAc,mBAE7GtB,EAAiBO,QAAUkB,WAAW,KAClCxB,EAAiBM,SAAW,EACxBH,EAAUG,SACVd,EAAyBQ,EAAiBM,SAE9CmB,KACDJ,IACJ,CAAC/D,IAEEmE,GAAUzE,EAAAA,EAAAA,aAAYvC,UAExB,GAAK6C,EAML,IAAImC,EAAGa,SAAYb,EAAGa,QAAQK,aAAeC,UAAUC,MAAQpB,EAAGa,QAAQK,aAAeC,UAAUc,WAAnG,CAMAxB,EAAeI,SAAU,EACzBlB,EAAoB,cACpB1E,QAAQC,IAAI,iDAAiD8B,GAAMmB,OAAS,uBAAuBoC,EAAiBM,QAAU,KAAM,mBAEpI,IAEI,MACMqB,SADY9H,EAAIqD,IAAI,oBACN5B,KAAKsG,SAEzB,IAAKD,EAAS,MAAM,IAAIE,MAAM,iCAG9B,IAAIC,EAAS/F,EAAAA,SAAAA,QAAiB,eAAgB,IAAIgG,QAAQ,YAAa,IACvE,MAAMC,EAAWjG,EAAAA,SAAAA,WAAoB,SAAW,MAAQ,KAClDkG,EAAQ,GAAGD,OAAcF,iCAAsCH,IAErEjH,QAAQC,IAAI,gCAAgCsH,KAC5C,MAAMC,EAAS,GAAgB,QAAbF,EAAqB,QAAU,YAAYF,IAE7DrC,EAAGa,QAAU,IAAIM,UAAUqB,EAAO,KAAM,CACpCE,QAAS,CACL,OAAUD,KAIlBzC,EAAGa,QAAQ8B,OAAS,KAChB1H,QAAQC,IAAI,6CAA8C,sCACrDwF,EAAUG,UAEflB,EAAoB,aACpBJ,EAAUS,EAAGa,SACbJ,EAAeI,SAAU,EAGzBN,EAAiBM,QAAU,EAC3Bd,EAAyB,GAGrBY,EAAkBE,SAClB+B,cAAcjC,EAAkBE,SAGpCF,EAAkBE,QAAUgC,YAAY,KACpC,GAAI7C,EAAGa,SAAWb,EAAGa,QAAQK,aAAeC,UAAUC,KAClD,IACI,MAAM0B,EAAmB9B,KAAKC,UAAU,CACpC8B,KAAM,iBACNC,UAAWC,KAAKC,MAChBC,OAAQvC,EAAYC,UAExBb,EAAGa,QAAQQ,KAAKyB,GAChB7H,QAAQC,IAAI,+CAAsC,kBAAmB,CAAEiI,OAAQvC,EAAYC,SAC/F,CAAE,MAAOnD,GACLzC,QAAQM,MAAM,0CAA2CmC,EAC7D,GAEL,MAGH4D,MAGJtB,EAAGa,QAAQuC,UAAaC,IACpB,IACI,MAAMxH,EAAOmF,KAAKsC,MAAMD,EAAMxH,MAG9BZ,QAAQC,IAAI,yXAAoE,sCAChFD,QAAQC,IAAI,wDAA0C,sCACtDD,QAAQC,IAAI,yXAAoE,mBAChFD,QAAQC,IAAI,kBAAc,kBAAmBW,EAAKkH,MAClD9H,QAAQC,IAAI,wBAAoB,kBAAmBW,EAAK0H,YACxDtI,QAAQC,IAAI,oBAAgB,kBAAmBW,EAAKsH,QACpDlI,QAAQC,IAAI,uBAAmB,mBAAmB,IAAI+H,MAAOO,sBAC7DvI,QAAQC,IAAI,uBAAmB,kBAAmBW,GAClDZ,QAAQC,IAAI,yXAAoE,sCAE5EwF,EAAUG,SACVpB,EAAe5D,EAEvB,CAAE,MAAO4H,GACLxI,QAAQc,KAAK,2CAA4CsH,EAAMxH,KACnE,GAGJmE,EAAGa,QAAQ6C,QAAWL,IAClBpI,QAAQc,KAAK,yCAAyCsH,EAAMM,iBAAiBN,EAAMO,UAC/ElD,EAAUG,UACVlB,EAAoB,gBACpBJ,EAAU,OAEdkB,EAAeI,SAAU,EAGN,MAAfwC,EAAMM,MAAiB9F,GACvB8D,KAIR3B,EAAGa,QAAQgD,QAAWtI,IAClBN,QAAQM,MAAM,uCAAwCA,EAAMoC,SACxD+C,EAAUG,SACVlB,EAAoB,SAIhC,CAAE,MAAOpE,GACLN,QAAQM,MAAM,6CAA8CA,GAC5DoE,EAAoB,SACpBc,EAAeI,SAAU,EAGrBhD,GACA8D,GAER,CAtHA,MAFI1G,QAAQC,IAAI,6DAA8D,wBAN1ED,QAAQC,IAAI,wEAAyE,oBA+H1F,CAAC2C,EAAiBb,EAAMsE,EAAmBK,KAG9C/D,EAAAA,EAAAA,WAAU,KACFC,EACAmE,KAGI1B,EAAiBO,UACjBiD,aAAaxD,EAAiBO,SAC9BP,EAAiBO,QAAU,MAE/BN,EAAiBM,QAAU,EACvBH,EAAUG,SACVd,EAAyB,GAGzBC,EAAGa,UACH5F,QAAQC,IAAI,qDACZ8E,EAAGa,QAAQkD,MAAM,IAAM,mBACvB/D,EAAGa,QAAU,KACTH,EAAUG,SACVlB,EAAoB,iBAKxBa,EAAaK,QAAQzB,OAAS,IAC9BnE,QAAQC,IAAI,0BAA0BsF,EAAaK,QAAQzB,yCAC3DoB,EAAaK,QAAU,GACnBH,EAAUG,SACVhB,EAAa,MAI1B,CAAChC,EAAiBmE,KAGrBpE,EAAAA,EAAAA,WAAU,KACN,GAAIC,GAAwC,cAArB6B,EAkBnB,OAhBIW,EAAkBQ,SAAS+B,cAAcvC,EAAkBQ,SAG/DR,EAAkBQ,QAAUgC,YAAY,KACpC5H,QAAQC,IAAI,wEAAyE,mBACjF8E,EAAGa,SACHb,EAAGa,QAAQkD,MAAM,IAAM,gBAG3BxD,EAAiBM,QAAU,EACvBH,EAAUG,SACVd,EAAyB,GAE7BgC,WAAW,IAAMC,IAAW,MAC7B,MAEI,IAAMY,cAAcvC,EAAkBQ,UAElD,CAAChD,EAAiB6B,EAAkBsC,KAGvCpE,EAAAA,EAAAA,WAAU,KACN,MAAMoG,EAAe7D,EAAAA,QAAS8D,iBAAiB,SAAUC,IACjDhE,EAASW,QAAQsD,MAAM,wBAA2C,WAAjBD,IACjDjJ,QAAQC,IAAI,oEACR2C,GAAqBmC,EAAGa,SAAWb,EAAGa,QAAQK,aAAeC,UAAUiD,SAEvE7D,EAAiBM,QAAU,EACvBH,EAAUG,SACVd,EAAyB,GAE7BiC,MAGR9B,EAASW,QAAUqD,IAGvB,MAAO,KACHF,EAAaK,WAElB,CAACxG,EAAiBmE,KAGrBpE,EAAAA,EAAAA,WAAU,IACC,KACCyC,EAAkBQ,SAAS+B,cAAcvC,EAAkBQ,SAC3DP,EAAiBO,SAASiD,aAAaxD,EAAiBO,SACxDF,EAAkBE,SAAS+B,cAAcjC,EAAkBE,SAE3Db,EAAGa,UACH5F,QAAQC,IAAI,yDACZ8E,EAAGa,QAAQkD,MAAM,IAAM,sBACvB/D,EAAGa,QAAU,OAGtB,IAEH,MAAM7C,GAAQsG,EAAAA,EAAAA,SAAQ,MAClBhF,SACAE,cACAE,mBACAoB,cACAlB,YACAW,iBAAkBT,EAClB2B,mBACA,CAACnC,EAAQE,EAAaE,EAAkBoB,EAAalB,EAAWE,EAAuB2B,IAE3F,OACI3D,EAAAA,EAAAA,KAACkB,EAAiBjB,SAAQ,CAACC,MAAOA,EAAMjB,SACnCA,KCtWAwH,GAAgBC,EAAAA,EAAAA,gCAEtB,SAASC,EAASC,EAAMC,GAC3B,GAAIJ,EAAcK,UACd,IACIL,EAAcE,SAASC,EAAMC,EACjC,CAAE,MAAOlB,GACLxI,QAAQc,KAAK,gCAAiC0H,EAClD,CAER,CAEO,SAASoB,EAAUH,GACtB,GAAIH,EAAcK,UACd,IACIL,EAAcO,MAAM,CAChBtD,MAAO,EACPuD,OAAQ,CAAC,CAAEL,UAEnB,CAAE,MAAOjB,GACLxI,QAAQc,KAAK,iCAAkC0H,EACnD,CAER,C,4CCjBA,MA8FA,EA3F2BuB,KACvB,MAAMC,GAAaC,EAAAA,EAAAA,iBACbC,GAAQC,EAAAA,EAAAA,aACR,UAAEC,GAAcF,EAAMR,QAAU,CAAC,GAChCW,EAAgBC,IAAqBrI,EAAAA,EAAAA,UAAS,KAC9CC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,GAoCvC,OACIY,EAAAA,EAAAA,KAAC0H,EAAAA,aAAY,CAACC,UAAU,kBAAiB1I,UACrC2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,YAAW1I,SAAA,EACvBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,yCAAwC1I,SAAC,qBACzDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qBAAoB1I,SAAC,uDANjC,CAAC,mBAAoB,uBAAwB,oBAAqB,SAQ7D8I,IAAKjC,IACV8B,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CAEbC,QAASA,IAAMR,EAAkB3B,GACjC6B,UAAW,sEAAqEH,IAAmB1B,EAAS,6BAA+B,4BACpI7G,SAAA,EAEPe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAW,cAAaH,IAAmB1B,EAAS,gBAAkB,iBAAkB7G,SACzF6G,KAEL9F,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,8DAA6DH,IAAmB1B,EAAS,kBAAoB,mBACvH7G,SACFuI,IAAmB1B,IAAU9F,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,6CAV7C7B,KAeb8B,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,0BAAyB1I,SAAA,EACrCe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAASA,IAAMd,EAAWe,SAC1BP,UAAU,mDACVQ,SAAU9I,EAAQJ,UAElBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,0BAAyB1I,SAAC,eAG9Ce,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAnEQ/K,UACxB,GAAKsK,EAAL,CAKAlI,GAAW,GAEX,UAEUhD,EAAIiC,KAAK,6BAA6BgJ,KAAc,CACtDa,oBAAqBZ,UAInB9I,EAAAA,gBAzBa,8BA0BbA,EAAAA,gBAzBO,2BA4Bb2J,EAAAA,QAAMC,MAAM,oBAAqB,2CAA4C,CACzE,CAAEC,KAAM,KAAMN,QAASA,IAAMlB,EAAU,UAG/C,CAAE,MAAOtJ,GACLN,QAAQM,MAAM,sBAAuBA,GACrC,MAAM+K,EAAe/K,EAAMG,UAAUG,MAAMN,OAAS,+BACpD4K,EAAAA,QAAMC,MAAM,QAASE,EACzB,CAAC,QACGlJ,GAAW,EACf,CAzBA,MAFI+I,EAAAA,QAAMC,MAAM,qBAAsB,4BAkEtBH,UAAWX,GAAkBnI,EAC7BsI,UAAW,iEAAgEH,EAAiB,aAAe,eACpGvI,SAENI,GACGW,EAAAA,EAAAA,KAACyI,EAAAA,QAAiB,CAACC,MAAM,WAEzB1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,uBAAsB1I,SAAC,uB,iFCtFnE,MAAM,MAAE0J,EAAK,OAAEC,GAAWC,EAAAA,QAAWlJ,IAAI,UAAUmJ,EAAA,CAAAjD,KAAA,4NAAAkD,EAAA,CAAAlD,KAAA,sMAAAmD,EAAA,CAAAnD,KAAA,+IAAAoD,EAAA,CAAApD,KAAA,iKA8EnD,EA5EyBqD,KACrB,MAAM,iBAAEtH,GAAqBT,IAEvBgI,GAAaC,EAAAA,EAAAA,gBAAeT,EAAQ,KACpCU,GAAaD,EAAAA,EAAAA,gBAAeR,EAAS,KACrCU,GAAUF,EAAAA,EAAAA,gBAAe,CAAEG,EAAG,EAAGC,EAAG,IAEpCC,EAAcC,EAAAA,QAAQC,MACvBC,QAAQ,4CAAAZ,EAAA,QACLM,EAAO,WAAcH,EAAU,WAAWE,IAAU,MAAAQ,EAAA,WAApDP,EAAQpJ,MAAQ,CAAEqJ,EAAGJ,EAAWjJ,MAAOsJ,EAAGH,EAAWnJ,MACzD,EADwD,OACvD2J,EAAAC,UAAA,CADGR,UAAqBH,aAAqBE,cAAUQ,EAAAE,cAAA,cAAAF,EAAAG,WAAAhB,EAAAa,CAAA,CAD/C,CAAC,CAADb,oCACLM,UAAqBH,aAAqBE,gBAE7CY,SAAS,2CAAAlB,EAAA,WACNI,EAAU,QAA8BG,EAAO,WAC/CD,IAAU,MAAAa,EAAA,SAFH3E,GACP4D,EAAWjJ,MAAQqF,EAAM4E,aAAeb,EAAQpJ,MAAMqJ,EACtDF,EAAWnJ,MAAQqF,EAAM6E,aAAed,EAAQpJ,MAAMsJ,CAC1D,EADc,OACbU,EAAAJ,UAAA,CAFGX,aAAwCG,UACxCD,cAAUa,EAAAH,cAAA,cAAAG,EAAAF,WAAAjB,EAAAmB,CAAA,CAFJ,CAAC,CAADnB,mCACNI,aAAwCG,UACxCD,gBAEHgB,MAAM,4CAAAvB,EAAA,WAECK,EAAU,MAASR,EAAK,WACL2B,IAAU,MAAAC,EAAA,WAD7BpB,EAAWjJ,MAAQyI,EAAQ,EAC3BQ,EAAWjJ,MAAQoK,EAAW3B,EAAQ,IAAK,CAAE6B,QAAS,KAEtDrB,EAAWjJ,MAAQoK,EAAW,GAAI,CAAEE,QAAS,IAErD,EAJqC,OAIpCD,EAAAT,UAAA,CALOX,aAAmBR,QACA2B,cAAUC,EAAAR,cAAA,cAAAQ,EAAAP,WAAAlB,EAAAyB,CAAA,CAH9B,CAAC,CAADzB,oCAECK,aAAmBR,QACA2B,WAAU,gBAMnCG,GAASC,EAAAA,EAAAA,kBAAiB,4CAAAzB,EAAA,WAGNE,EAAU,WACVE,IAAU,MAAAsB,EAAA,WAHhC,MAAO,CACHC,UAAW,CACP,CAAEzB,WAAYA,EAAWjJ,OACzB,CAAEmJ,WAAYA,EAAWnJ,QAGrC,EAHoC,OAGnCyK,EAAAb,UAAA,CAJyBX,aACAE,cAAUsB,EAAAZ,cAAA,cAAAY,EAAAX,WAAAf,EAAA0B,CAAA,CAJJ,CAAC,CAAD1B,oCAGNE,aACAE,gBAK1B,IAAIwB,EAAUC,EAAYC,EAAYC,EAEtC,OAAQpJ,GACJ,IAAK,YACDiJ,EAAW,OACXC,EAAa,YACbC,EAAa,iBACbC,EAAe,+BACf,MACJ,IAAK,aACDH,EAAW,OACXC,EAAa,gBACbC,EAAa,kBACbC,EAAe,iCACf,MACJ,QACIH,EAAW,eACXC,EAAa,eACbC,EAAa,eACbC,EAAe,2BAKvB,OACIhL,EAAAA,EAAAA,KAACiL,EAAAA,gBAAe,CAACC,QAASzB,EAAYxK,UAClCe,EAAAA,EAAAA,KAACmL,EAAAA,QAAStD,KAAI,CACVuD,MAAO,CACH,CAAEC,SAAU,WAAYC,OAAQ,KAChCb,GACFxL,UAEF2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAW,iEAAiEqD,IAAe/L,SAAA,EAC7Fe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAMiE,EAAUW,KAAM,GAAI7D,UAAW,QAAQoD,IAAcK,MAAO,CAAEK,YAAa,GAAK/C,MAA4B,cAArB9G,EAAmC,UAAiC,eAArBA,EAAoC,UAAY,aACtM5B,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAW,qBAAqBoD,IAAa9L,SAC9C6L,Y,wRCtEnBY,GAAaC,IAWZ,IAXa,SAChB1M,EAAQ,MACRmM,EAAK,cACLQ,EAAa,OACbC,GAOHF,GADWG,EAAAA,EAAAA,SAAAH,EAAAI,GAER,MAAMC,GAAS7J,EAAAA,EAAAA,QAAO,OACf8J,EAAWC,GAAgBC,EAAAA,UAAe,GAG3CC,EAAgBP,GAAUD,GAAiB,CAC7CS,SAAU,QACVC,UAAW,OACXC,cAAe,MACfC,eAAgB,QAGpB1M,EAAAA,EAAAA,WAAU,KAEN,GAAK2M,OAAOC,OAWRR,GAAa,GACbS,QAZgB,CAChB,MAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,IAAM,qFACbH,EAAO1P,OAAQ,EACf0P,EAAOI,OAAQ,EACfJ,EAAOK,OAAS,KACZf,GAAa,GACbS,KAEJE,SAASK,KAAKC,YAAYP,EAC9B,GAID,IAEH,MAAMD,EAAgBA,KAClB,GAAIX,EAAOjJ,SAAW0J,OAAOC,OAAQ,CACjC,MAAM3E,EAAM,IAAI0E,OAAOC,OAAOU,KAAKC,IAAIrB,EAAOjJ,QAAS,CACnDuK,OAAQ,CACJC,IAAKnB,EAAcC,SACnBmB,IAAKpB,EAAcE,WAEvBmB,KAAM,GACNC,gBAAgB,EAChBC,mBAAmB,EACnBC,mBAAmB,IAIvB5B,EAAOjJ,QAAQ8K,UAAY9F,EAGvB9I,GACAkN,EAAAA,SAAe1N,QAAQQ,EAAW6O,IAC1BA,GAASA,EAAM7I,OAAS8I,GACxBC,EAAajG,EAAK+F,EAAMG,OACjBH,GAASA,EAAM7I,OAASiJ,IAC/BC,EAAepG,EAAK+F,EAAMG,QAI1C,GAGED,EAAeA,CAACjG,EAAKkG,KACnBA,EAAMG,YAAc3B,OAAOC,QAC3B,IAAID,OAAOC,OAAOU,KAAKW,OAAO,CAC1B1C,SAAU,CACNkC,IAAKU,EAAMG,WAAW/B,SACtBmB,IAAKS,EAAMG,WAAW9B,WAE1BvE,IAAKA,EACLsG,MAAOJ,EAAMI,OAAS,MAK5BF,EAAiBA,CAACpG,EAAKkG,KACzB,GAAIA,EAAMK,aAAe7B,OAAOC,OAAQ,CACpC,MAAM6B,EAAON,EAAMK,YAAYvG,IAAIyG,IAAK,CACpCjB,IAAKiB,EAAMnC,SACXmB,IAAKgB,EAAMlC,aAGf,IAAIG,OAAOC,OAAOU,KAAKc,SAAS,CAC5BK,KAAMA,EACNxG,IAAKA,EACL0G,YAAaR,EAAMQ,aAAe,OAClCC,aAAcT,EAAMU,aAAe,GAE3C,GASJ,OANA7O,EAAAA,EAAAA,WAAU,KACFmM,GAAaD,EAAOjJ,SAAS8K,WAC7BlB,KAEL,CAAC1N,EAAUgN,KAGVrE,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACuD,MAAO,CAACwD,GAAOC,UAAWzD,GAAOnM,SAAA,EACnCe,EAAAA,EAAAA,KAAA,OACI8O,IAAK9C,EACLZ,MAAO,CACHzC,MAAO,OACPC,OAAQ,OACRmG,UAAW,QAGjB9C,IACEjM,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACuD,MAAOwD,GAAOvP,QAAQJ,UACxBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAAA7I,SAAC,yBAUpB8O,GAASiB,KAA8DlD,EAAAA,EAAAA,SAAAkD,EAAAC,GAEzE,OAAO,MAMLf,GAAWgB,KAAkDpD,EAAAA,EAAAA,SAAAoD,EAAAC,IAE/D,OAAO,MAGLP,GAASQ,EAAAA,QAAW5S,OAAO,CAC7BqS,UAAW,CACPQ,KAAM,EACNC,SAAU,UAEdjQ,QAAS,CACLgM,SAAU,WACVkE,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRC,eAAgB,SAChBC,WAAY,SACZC,gBAAiB,aAIzBnE,GAAWqC,OAASA,GACpBrC,GAAWwC,SAAWA,GAEtB,YCpKM4B,GAAkB,SCDxB,IAAIC,GAAY,GACZC,GAAgB,EACpB,MAEaC,GAAY/S,UACrB,MAAMkI,EAAMD,KAAKC,MAGjB,GAAI2K,GAAUzO,OAAS,GAAM8D,EAAM4K,GANhB,IAQf,OADA7S,QAAQC,IAAI,mCACL2S,GAGX,IACI5S,QAAQC,IAAI,2CACZ,MAAMsC,QAAYpD,EAAIqD,IAAI,kBAC1B,GAAIuQ,MAAMC,QAAQzQ,EAAI3B,MAGlB,OAFAgS,GAAYrQ,EAAI3B,KAChBiS,GAAgB5K,EACT2K,EAEf,CAAE,MAAOpK,GAGL,GAFAxI,QAAQC,IAAI,sBAAuBuI,GAE/BoK,GAAUzO,OAAS,EAEnB,OADAnE,QAAQC,IAAI,oDACL2S,EAEf,CACA,MAAO,KChBHpH,MAAK,GAAEC,OAAO,IAAIC,EAAAA,QAAWlJ,IAAI,UAGnCyQ,GAAc,CAChBC,UAAoB,IAATzH,GACX0H,SAAmB,GAAT1H,IACZ2H,GAAA,CAAA1K,KAAA,0SAAA2K,GAAA,CAAA3K,KAAA,sNAAA4K,GAAA,CAAA5K,KAAA,gHAAA6K,GAAA,CAAA7K,KAAA,uHAiVF,GA/UwB8K,EAAGxJ,iBACvB,MAAM,OAAElG,EAAM,QAAEd,GAAYrB,IACtB8R,EAAczQ,GAAW,CAAC,GAEzB0Q,EAAeC,IAAoB1R,EAAAA,EAAAA,UAAS,KAE5C2R,EAASC,IAAc5R,EAAAA,EAAAA,UAAS,KAChC6R,EAAYC,IAAiB9R,EAAAA,EAAAA,UAAS,OAE7CU,EAAAA,EAAAA,WAAU,KACU5C,WACZ,MAAMiU,QAAYlB,KAClBe,EAAWG,IAEfC,IACD,IAEH,MAAOC,EAAWC,IAAgBlS,EAAAA,EAAAA,UAAS,MAGrCiK,GAAaD,EAAAA,EAAAA,gBAAegH,GAAYC,WACxC/G,GAAUF,EAAAA,EAAAA,gBAAe,CAAEI,EAAG,KAEpC1J,EAAAA,EAAAA,WAAU,KACN,MAAMyR,EAAcpK,EAAWqK,YAAY,QAAS,KAChDC,IACAC,MAOJ,OAJAC,IACAF,IACAC,IAEOH,GACR,CAACpK,IAEJ,MAAMuK,EAAkBxU,UACpB,IACI,MAAM,OAAEY,SAAiB8T,EAASC,oCAClC,GAAe,YAAX/T,EAEA,YADAX,QAAQC,IAAI,4CAIhB,MAAM0U,QAAiBF,EAASG,wBAAwB,CAAC,GACzDC,EAAU,CACN3F,SAAUyF,EAASG,OAAO5F,SAC1BC,UAAWwF,EAASG,OAAO3F,UAC3BC,cAAe,KACfC,eAAgB,MAExB,CAAE,MAAO5M,GACLzC,QAAQc,KAAK,0BAA2B2B,EAC5C,GAGE6R,EAAiBvU,UACnB,IACI,MAAMgV,QAAcxT,EAAAA,aAAyB,wBAC7C,GAAIwT,EAAO,CACP,MAAMC,EAASjP,KAAKsC,MAAM0M,GAC1B/U,QAAQC,IAAI,oBAAqB+U,EAAO1M,YACxC6L,EAAaa,EAEjB,MACIb,EAAa,KAErB,CAAE,MAAO7T,GACLN,QAAQM,MAAM,6BAA8BA,EAChD,GAiBEkU,EAAqBzU,UACvB,IACI,MAAMwC,QAAYpD,EAAIqD,IAAI,yBACpByS,EAAS1S,EAAI3B,MAAMsU,KAAK,CAACC,EAAGC,IAAM,IAAIpN,KAAKoN,EAAEC,YAAc,IAAIrN,KAAKmN,EAAEE,cAAgB,GAC5F1B,EAAiBsB,EAAOK,MAAM,EAAG,GACrC,CAAE,MAAO7S,GACLzC,QAAQM,MAAM,iCAAkCmC,EACpD,GAKEsL,EAAUxB,EAAAA,QAAQC,MACnBC,QAAQ,2CAAA6G,EAAA,QACLnH,EAAO,WAAcD,IAAU,MAAAqJ,EAAA,WAA/BpJ,EAAQpJ,MAAQ,CAAEsJ,EAAGH,EAAWnJ,MACpC,EADmC,OAClCwS,EAAA5I,UAAA,CADGR,UAAqBD,cAAUqJ,EAAA3I,cAAA,cAAA2I,EAAA1I,WAAAyG,EAAAiC,CAAA,CAD1B,CAAC,CAADjC,oCACLnH,UAAqBD,gBAExBY,SAAS,4CAAAuG,EAAA,WACNnH,EAAU,QAA8BC,EAAO,YAED8G,IAAW,MAAAuC,EAAA,SAHlDpN,GACP8D,EAAWnJ,MAAQqF,EAAM6E,aAAed,EAAQpJ,MAAMsJ,EAEtDH,EAAWnJ,MAAQ6D,KAAK6O,IAAIvJ,EAAWnJ,MAAOkQ,EAAYE,SAAW,GACzE,EAD6D,OAC5DqC,EAAA7I,UAAA,CAHGT,aAAwCC,UAEM8G,eAAWuC,EAAA5I,cAAA,cAAA4I,EAAA3I,WAAAwG,EAAAmC,CAAA,CAHnD,CAAC,CAADnC,qCACNnH,aAAwCC,UAEM8G,kBAEjD/F,MAAM,4CAAAkG,EAAA,WACClH,EAAU,YAAU+G,EAAW,WACZyC,IAAU,MAAAC,EAAA,WAD7BzJ,EAAWnJ,OAASkQ,EAAYC,UAAYD,EAAYE,UAAY,EACpEjH,EAAWnJ,MAAQ2S,EAAWzC,EAAYE,SAAU,CAAEyC,SAAU,MAEhE1J,EAAWnJ,MAAQ2S,EAAWzC,EAAYC,UAAW,CAAE0C,SAAU,KAEzE,EAJqC,OAIpCD,EAAAhJ,UAAA,CALOT,aAAoB+G,cACDyC,cAAUC,EAAA/I,cAAA,cAAA+I,EAAA9I,WAAAuG,EAAAuC,CAAA,CAF9B,CAAC,CAADvC,qCACClH,aAAoB+G,eACDyC,WAAU,gBAMnCG,GAAoBtI,EAAAA,EAAAA,kBAAiB,2CAAAgG,EAAA,WAETrH,IAAU,MAAA4J,EAAA,WADxC,MAAO,CACHrI,UAAW,CAAC,CAAEvB,WAAYA,EAAWnJ,QAE7C,EAF4C,OAE3C+S,EAAAnJ,UAAA,CAFiCT,cAAU4J,EAAAlJ,cAAA,cAAAkJ,EAAAjJ,WAAA0G,EAAAuC,CAAA,CAFD,CAAC,CAADvC,oCAETrH,iBAK3BwC,EAAQmG,IAAa5S,EAAAA,EAAAA,UAAS,CACjCiN,SAAU,QACVC,UAAW,QACXC,cAAe,GACfC,eAAgB,KA8BpB,OACIxM,EAAAA,EAAAA,KAACkT,EAAAA,uBAAsB,CAAC9H,MAAO,CAAEiE,KAAM,GAAIpQ,UACvC2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kBAAiB1I,SAAA,EAC7Be,EAAAA,EAAAA,KAACmT,EAAAA,QAAS,CAACC,SAAS,kBAGpBpT,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,qCAAoC1I,UAChDe,EAAAA,EAAAA,KAAC0H,EAAAA,aAAY,CAACC,UAAU,iDAAgD1I,UACpE2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kDAAiD1I,SAAA,EAC7D2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,wBAAuB1I,SAAA,EACnCe,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CACFC,OAAQC,EAAQ,MAChB5L,UAAU,YACV6L,WAAW,aAEfxT,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qDAAoD1I,SAAC,sBAGzEe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAASA,IAAMd,EAAWR,SAAS,YACnCgB,UAAU,+BAA8B1I,UAExCe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,mBAAmB4E,KAAM,GAAI9C,MAAM,sBAOlE1I,EAAAA,EAAAA,KAACyT,GAAO,CACJC,SAAU5D,GACV1E,MAAO,CAAEiE,KAAM,EAAG1G,MAAO,OAAQC,OAAQ,QACzCiD,OAAQA,EACR8H,eA1DC,CACb,CAAE,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aACpD,CAAE,YAAe,cAAe,QAAW,CAAC,CAAE,WAAc,SAC5D,CAAE,YAAe,mBAAoB,QAAW,CAAC,CAAE,MAAS,aAC5D,CAAE,YAAe,qBAAsB,QAAW,CAAC,CAAE,MAAS,aAC9D,CAAE,YAAe,iBAAkB,YAAe,kBAAmB,QAAW,CAAC,CAAE,MAAS,aAC5F,CAAE,YAAe,6BAA8B,QAAW,CAAC,CAAE,WAAc,SAC3E,CAAE,YAAe,MAAO,QAAW,CAAC,CAAE,WAAc,SACpD,CAAE,YAAe,WAAY,QAAW,CAAC,CAAE,WAAc,QACzD,CAAE,YAAe,WAAY,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aAC/E,CAAE,YAAe,WAAY,YAAe,gBAAiB,QAAW,CAAC,CAAE,MAAS,aACpF,CAAE,YAAe,OAAQ,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aAC3E,CAAE,YAAe,OAAQ,YAAe,kBAAmB,QAAW,CAAC,CAAE,MAAS,UAAW,OAAU,KACvG,CAAE,YAAe,gBAAiB,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aACpF,CAAE,YAAe,eAAgB,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aACnF,CAAE,YAAe,eAAgB,YAAe,kBAAmB,QAAW,CAAC,CAAE,MAAS,UAAW,OAAU,OAC/G,CAAE,YAAe,aAAc,YAAe,mBAAoB,QAAW,CAAC,CAAE,MAAS,aACzF,CAAE,YAAe,UAAW,QAAW,CAAC,CAAE,WAAc,SACxD,CAAE,YAAe,QAAS,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aAC5E,CAAE,YAAe,QAAS,YAAe,mBAAoB,QAAW,CAAC,CAAE,MAAS,aACpF,CAAE,YAAe,oBAAqB,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aACxF,CAAE,YAAe,8BAA+B,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aAClG,CAAE,YAAe,4BAA6B,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,cAqCpFC,mBAAmB,EACnBC,uBAAuB,EAAM5U,SAE5B8R,EAAQhJ,IAAK+L,IACV9T,EAAAA,EAAAA,KAAC+N,GAAM,CAEHK,WAAY,CAAE/B,SAAUyH,EAAGzH,SAAUC,UAAWwH,EAAGxH,WACnDrE,QAASA,IAAMiJ,EAAc4C,GAAI7U,UAEjCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,kFAAkFyD,MAAO,CAAEzC,MAAO,GAAIC,OAAQ,IAAK3J,UAC/He,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CACFC,OAAQ,CAAES,IAAKD,EAAGE,MAClBrM,UAAU,6BACV6L,WAAW,aARd,MAAMM,EAAGvT,UAgB1BP,EAAAA,EAAAA,KAACkJ,EAAgB,KAGjBlJ,EAAAA,EAAAA,KAACiL,EAAAA,gBAAe,CAACC,QAASA,EAAQjM,UAC9B2I,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CACVuD,MAAO,CACH,CACIC,SAAU,WACVmE,KAAM,EACNC,MAAO,EACP7G,OAAQA,GACR2G,IAAK,EACLM,gBAAiB,QACjBoE,oBAAqB,GACrBC,qBAAsB,GACtBC,YAAa,OACbC,aAAc,CACVzL,MAAO,EACPC,QAAS,GAEbyL,cAAe,GACfC,aAAc,EACdC,UAAW,GACXC,WAAY,IAEhBxB,GACF/T,SAAA,EAGFe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,0DAEhBC,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,aAAY1I,SAAA,EAExB2I,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbC,QAASA,IAAMd,EAAWR,SAAS,WACnCgB,UAAU,+EAA8E1I,SAAA,CAEvF2R,EAAY6D,aACTzU,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CAACC,OAAQ,CAAES,IAAKnD,EAAY6D,aAAe9M,UAAU,iCAE3D3H,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,sEAAqE1I,UACjFe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAC5C2R,EAAY8D,WAAa9D,EAAY8D,WAAW,GAAK,SAIlE9M,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,SAAQ1I,SAAA,EACpBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAC5C2R,EAAY8D,WAAa,GAAG9D,EAAY8D,cAAc9D,EAAY+D,WAAa,KAAO,kBAE3F3U,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAE2R,EAAYvQ,OAAS,iBAElEL,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,+BAA8B1I,UAC1Ce,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,gBAAgB4E,KAAM,GAAI9C,MAAM,iBAKtD2I,GACGzJ,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbL,UAAU,mJACVM,QAxMJ2M,KACpBvD,GACAlK,EAAWR,SAAS,gBAAiB,CACjC5I,KAAM,CACF8W,iBAAkBxD,EAAUyD,SAC5BzP,OAAQgM,EAAU5L,YAEtBsP,aAAc1D,EAAU2D,iBAiMyB/V,SAAA,EAE7B2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,oBAC/C2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,yBAAwB1I,SAAA,CAAC,YAAUoS,EAAUyD,UAAUJ,WAAW,oBAEtF1U,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,+BAA8B1I,UAC1Ce,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,kBAAkB4E,KAAM,GAAI9C,MAAM,gBAIzDd,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbL,UAAU,4GACVM,QAASA,IAAMd,EAAWR,SAAS,kBAAkB1H,SAAA,EAErDe,EAAAA,EAAAA,KAACiV,EAAAA,eAAc,CACXC,OAAQ,CAAC,UAAW,WACpBvN,UAAU,iCAEd3H,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,yDAAwD1I,SAAC,oBAOjF2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,OAAM1I,SAAA,EAClBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,uCAAsC1I,SAAC,oBACtD4R,EAAcvP,OAAS,EACpBuP,EAAc9I,IAAKoN,IACfvN,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAeF,UAAU,8FAA6F1I,SAAA,EACvH2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kCAAiC1I,SAAA,EAC7Ce,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,qBAAoC,cAAhBwN,EAAKrX,OAAyB,eAAiB,eAAgBmB,SACzE,QAAtBkW,EAAKC,cACFpV,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,YAAY4E,KAAM,GAAI9C,MAAuB,cAAhByM,EAAKrX,OAAyB,UAAY,aAEtFkC,EAAAA,EAAAA,KAACqV,EAAAA,QAAsB,CAACzO,KAAK,YAAY4E,KAAM,GAAI9C,MAAuB,cAAhByM,EAAKrX,OAAyB,UAAY,eAG5G8J,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,0BAAyB1I,SAAEkW,EAAKG,WAChDtV,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAE,IAAIkG,KAAKgQ,EAAK3C,YAAY+C,8BAG3EvV,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAW,sBAAqC,cAAhBwN,EAAKrX,OAAyB,iBAChD,cAAhBqX,EAAKrX,OAAyB,eAAiB,iBAC5CmB,SACFkW,EAAKrX,WAjBHqX,EAAK5U,MAsBpBP,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,mCAAkC1I,SAAC,yC,cCxVvF,MAAQ0J,MAAM,IAAIE,EAAAA,QAAWlJ,IAAI,UAEpB6V,GAAcA,EAAGL,WAC1BvN,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbL,UAAU,sDACVyD,MAAO,CAAEzC,MAAO,OAAQkH,gBAAiBsF,EAAKM,SAAUxW,SAAA,EAGxD2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,sFAAqF1I,SAAA,EACjGe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,iDAChB3H,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAAC,UAIrDkW,EAAKO,QACF1V,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CACDF,UAAU,uDACVyD,MAAO,CAAEyE,gBAAiBsF,EAAKQ,aAAc1W,UAE7Ce,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,yDAAwD1I,SACnEkW,EAAKO,WAMlB9N,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,MAAK1I,SAAA,EAEjBe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,wCAAuC1I,UACnDe,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CACFC,OAAQ,CAAES,IAAKoB,EAAKS,OACpBxK,MAAO,CAAEzC,MAAO,IAAKC,OAAQ,KAC7B4K,WAAW,eAKnB5L,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,OAAM1I,SAAA,EAClBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,0BAA0ByD,MAAO,CAAE1C,MAAOyM,EAAKQ,aAAc1W,SACxEkW,EAAK9G,SAEVrO,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,yCAAwC1I,SACnDkW,EAAKU,YAEV7V,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,kCAAkCmO,cAAe,EAAE7W,SAC9DkW,EAAKY,kBAKdnO,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbL,UAAU,4DACVyD,MAAO,CAAEyE,gBAAiBsF,EAAKQ,aAAc1W,SAAA,EAE7Ce,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oCAAmC1I,SAC9CkW,EAAKa,WAEVhW,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,gBAAgB4E,KAAM,GAAI9C,MAAM,oBC/BvDC,MAAK,GAAEC,OAAO,IAAIC,EAAAA,QAAWlJ,IAAI,UAEnCyQ,GAAc,CAChBC,UAAoB,IAATzH,GACX0H,SAAmB,IAAT1H,IAGRqN,GAAW,CACb,CAAE,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aACpD,CAAE,YAAe,cAAe,QAAW,CAAC,CAAE,WAAc,SAC5D,CAAE,YAAe,OAAQ,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aAC3E,CAAE,YAAe,QAAS,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,cAG7BC,GAAA,CAAArQ,KAAA,gTAAAsQ,GAAA,CAAAtQ,KAAA,4PAAAuQ,GAAA,CAAAvQ,KAAA,sHAAAwQ,GAAA,CAAAxQ,KAAA,wKAAAyQ,GAAA,CAAAzQ,KAAA,mHA6b7C+I,GAASQ,EAAAA,QAAW5S,OAAO,CAC7B+Z,UAAW,CACPlL,SAAU,WACV1C,MAAO,GACPC,OAAQ,GACR4N,aAAc,GACd3G,gBAAiB,UACjB4G,YAAa,EACbC,YAAa,WAEjBC,YAAa,CACTtL,SAAU,WACVmE,KAAM,EACNC,MAAO,EACP7G,OAAQA,GACR2G,IAAK,EACLM,gBAAiB,QACjBoE,oBAAqB,GACrBC,qBAAsB,GACtBC,YAAa,OACbC,aAAc,CAAEzL,MAAO,EAAGC,QAAS,IACnCyL,cAAe,GACfC,aAAc,GACdC,UAAW,IAEfqC,SAAU,CACNhO,OAAQ,OACRD,MAAO,MACPkH,gBAAiB,aAIzB,GA1d8BgH,KAC1B,MAAM1P,GAAaC,EAAAA,EAAAA,iBACb0P,GAAYC,EAAAA,EAAAA,iBACV5W,QAAS6W,GAAalY,IACxBuI,GAAQC,EAAAA,EAAAA,YACR0E,GAAS7J,EAAAA,EAAAA,QAAO,OAChB,UAAEoF,EAAS,SAAE8E,EAAQ,UAAEC,EAAW2K,YAAaC,EAAc5B,QAAS6B,GAAiB9P,EAAMR,QAAU,CAAC,GAEvGuQ,EAAYC,IAAiBjY,EAAAA,EAAAA,UAAS,MACvCkY,EAAWN,GAAY,CAAC,GAEvBjG,EAASC,IAAc5R,EAAAA,EAAAA,UAAS,KAChC6R,EAAYC,IAAiB9R,EAAAA,EAAAA,UAAS,MAGvCwD,GAAYT,EAAAA,EAAAA,SAAO,IACzBrC,EAAAA,EAAAA,WAAU,KACN8C,EAAUG,SAAU,EACb,KAAQH,EAAUG,SAAU,IACpC,KAEHjD,EAAAA,EAAAA,WAAU,KACU5C,WACZ,MAAMiU,QAAYlB,KAClBe,EAAWG,IAEfC,IACD,IAKH,MAAMmG,GAAiB/Q,EAAAA,EAAAA,SAAQ,MAC3B6F,SAAUA,GAAY,QACtBC,UAAWA,GAAa,UACxB,CAACD,EAAUC,KAEfxM,EAAAA,EAAAA,WAAU,KACiB5C,WACnB,IACI,MAAMsa,QAAkB9Y,EAAAA,aA3Cf,2BA4CT,GAAI8Y,EAAW,CACX,MAAMC,EAAWvU,KAAKsC,MAAMgS,GAE5BH,EAAaK,OAAAC,OAAC,CAAC,EACRF,EAAS,CACZlX,GAAIgH,GAAakQ,EAASlX,KAElC,MAAWgH,GAEP8P,EAAc,CACVJ,YAAaC,EACb5B,QAAS6B,EACT5W,GAAIgH,GAGhB,CAAE,MAAO5B,GACLxI,QAAQM,MAAM,2BAA4BkI,EAC9C,GAEJiS,IACD,CAACrQ,IAEJ,MAAM,OAAE/F,EAAM,YAAEE,GAAgBP,KAEhCrB,EAAAA,EAAAA,WAAU,KAEN,IAAK8C,EAAUG,UAAYrB,IAAgBoV,EAAW,OAEtD3Z,QAAQC,IAAI,iCAAkCsE,GAC9C,MAAM,KAAEuD,EAAI,gBAAE4S,EAAe,QAAEhY,EAAO,OAAEwF,GAAW3D,EAGnD,GAAa,YAATuD,GAAsB4S,EAClBA,EAAgBtX,KAAOuX,SAASvQ,KAChCpK,QAAQC,IAAI,mDAGRwF,EAAUG,SACVsU,EAAc,CACVJ,YAAaY,EAAgBzC,aAC7BE,QAASuC,EAAgBvC,QACzBxD,SAAU+F,EAAgB/F,SAC1BvR,GAAIsX,EAAgBtX,KAIe,oBAAhCwX,6BACPA,oCAMP,GAAyB,sBAArBrW,EAAYuD,KACjB0B,EAAS,gBAAiB,CACtB5I,KAAM2D,EACNqT,aAAc,CAAE1I,WAAUC,aAC1B2K,YAAaG,GAAYH,aAAeC,EACxC5B,QAAS8B,GAAY9B,SAAW6B,SAKnC,GAAa,sBAATlS,EAA8B,CACnC,MAAM+S,EAAW3S,GAAWwS,GAAiBtX,GAC7C,GAAIyX,GAAYC,OAAOD,KAAcC,OAAO1Q,GACxC,OAEJZ,EAAS,kBAAmB,CACxByQ,WAAYA,GAAc,CAAEH,YAAaC,EAAc5B,QAAS6B,GAChEpC,aAAc,CAAE1I,WAAUC,cAElC,MACK,GAAa,gBAATrH,EAAwB,CAC7B,MAAMiT,EAAa,kBACbC,EAAetY,GAAW,0BAGhCwI,EAAAA,QAAMC,MACF4P,EACAC,EACA,CACI,CACI5P,KAAM,YACNN,QAASA,IAAMlB,EAAU,UAGjC,CAAEqR,YAAY,GAEtB,GACD,CAAC1W,EAAaoV,IAGjB,MAAMuB,GAAoBjP,EAAAA,EAAAA,gBAAe,IAClCkP,EAAaC,IAAkBnZ,EAAAA,EAAAA,UAAS,SAE/CU,EAAAA,EAAAA,WAAU,KAEN,MAAM0Y,EAAWzT,YAAY,KACzBsT,EAAkBnY,OAAS,EAC3B,MAAMuY,EAAO1U,KAAK2U,MAAML,EAAkBnY,MAAQ,IAC5CyY,EAAON,EAAkBnY,MAAQ,GACvCqY,EAAe,GAAGE,KAAQE,EAAKnY,WAAWoY,SAAS,EAAG,SACvD,KAEH,MAAO,IAAM9T,cAAc0T,IAC5B,IAEH,MAAMnP,GAAaD,EAAAA,EAAAA,gBAAegH,GAAYC,WACxC/G,GAAUF,EAAAA,EAAAA,gBAAe,CAAEI,EAAG,IAC9BqP,GAAQzP,EAAAA,EAAAA,iBAAgBT,KAE9B7I,EAAAA,EAAAA,WAAU,KACN+Y,EAAM3Y,OAAQ4Y,EAAAA,EAAAA,aAAWjG,EAAAA,EAAAA,YAAWlK,GAAO,CAAEoK,SAAU,OAAU,GAAG,IACrE,IAGH,MAAMgG,GAAkBvS,EAAAA,EAAAA,SAAQ,IAAM,CAClC,CACIjG,GAAI,IACJ0E,KAAM,QACNoJ,MAAO,eACPwH,SAAU,2BACVE,YAAa,kDACbN,QAAS,UACTE,YAAa,UACbC,MAAO,0DACPI,QAAS,eACTN,MAAO,iBAEX,CACInV,GAAI,IACJ0E,KAAM,QACNoJ,MAAO,sBACPwH,SAAU,yBACVE,YAAa,qCACbN,QAAS,UACTE,YAAa,UACbC,MAAO,0DACPI,QAAS,gBACTN,MAAO,iBAEX,CACInV,GAAI,IACJ0E,KAAM,QACNoJ,MAAO,qBACPwH,SAAU,sBACVE,YAAa,+CACbN,QAAS,UACTE,YAAa,UACbC,MAAO,0DACPI,QAAS,WACTN,MAAO,kBAEX,CACInV,GAAI,IACJ0E,KAAM,QACNoJ,MAAO,mBACPwH,SAAU,uBACVE,YAAa,sCACbN,QAAS,UACTE,YAAa,UACbC,MAAO,0DACPI,QAAS,cACTN,MAAO,YAEX,CACInV,GAAI,IACJ0E,KAAM,QACNoJ,MAAO,gBACPwH,SAAU,kBACVE,YAAa,mDACbN,QAAS,UACTE,YAAa,UACbC,MAAO,0DACPI,QAAS,WACTN,MAAO,SAEZ,IA0CGxK,EAAUxB,EAAAA,QAAQC,MACnBC,QAAQ,4CAAAwM,EAAA,QACL9M,EAAO,WAAcD,IAAU,MAAA2P,EAAA,WAA/B1P,EAAQpJ,MAAQ,CAAEsJ,EAAGH,EAAWnJ,MACpC,EADmC,OAClC8Y,EAAAlP,UAAA,CADGR,UAAqBD,cAAU2P,EAAAjP,cAAA,cAAAiP,EAAAhP,WAAAoM,EAAA4C,CAAA,CAD1B,CAAC,CAAD5C,qCACL9M,UAAqBD,gBAExBY,SAAS,2CAAAkM,EAAA,WACN9M,EAAU,QAA8BC,EAAO,YAEnB8G,IAAW,MAAA6I,EAAA,SAHhC1T,GACP8D,EAAWnJ,MAAQqF,EAAM6E,aAAed,EAAQpJ,MAAMsJ,EAEtDH,EAAWnJ,MAAQ6D,KAAK6O,IAAIxC,EAAYE,SAAUvM,KAAKC,IAAIqF,EAAWnJ,MAAOkQ,EAAYC,UAAY,IACzG,EAD2C,OAC1C4I,EAAAnP,UAAA,CAHGT,aAAwCC,UAEZ8G,eAAW6I,EAAAlP,cAAA,cAAAkP,EAAAjP,WAAAmM,EAAA8C,CAAA,CAHjC,CAAC,CAAD9C,oCACN9M,aAAwCC,UAEZ8G,YAAW,MAE1C/F,MAAM,2CAAA6L,EAAA,WACC7M,EAAU,YAAU+G,EAAW,WACZyC,IAAU,MAAAqG,EAAA,WAD7B7P,EAAWnJ,OAASkQ,EAAYC,UAAYD,EAAYE,UAAY,EACpEjH,EAAWnJ,MAAQ2S,EAAWzC,EAAYE,SAAU,CAAEyC,SAAU,MAEhE1J,EAAWnJ,MAAQ2S,EAAWzC,EAAYC,UAAW,CAAE0C,SAAU,KAEzE,EAJqC,OAIpCmG,EAAApP,UAAA,CALOT,aAAoB+G,cACDyC,cAAUqG,EAAAnP,cAAA,cAAAmP,EAAAlP,WAAAkM,EAAAgD,CAAA,CAF9B,CAAC,CAADhD,oCACC7M,aAAoB+G,YAAW,GACZyC,WAAU,gBAMnCG,GAAoBtI,EAAAA,EAAAA,kBAAiB,4CAAA2L,EAAA,WAEThN,EAAU,OAC5BT,IAAM,MAAAuQ,EAAA,WAFlB,MAAO,CACHvO,UAAW,CAAC,CAAEvB,WAAYA,EAAWnJ,QACrC0I,OAAQA,EACR2G,IAAK,EACL6J,aAAc,GAEtB,EAJsB,OAIrBD,EAAArP,UAAA,CALiCT,aAClBT,UAAMuQ,EAAApP,cAAA,cAAAoP,EAAAnP,WAAAqM,EAAA8C,CAAA,CAHqB,CAAC,CAAD9C,qCAEThN,aAClBT,OAAM,MAMhByQ,GAAa3O,EAAAA,EAAAA,kBAAiB,2CAAA4L,EAAA,MACNuC,IAAK,MAAAS,EADCA,KAAA,CAChC1O,UAAW,CAAC,CAAEzB,WAAY0P,EAAM3Y,UAAD,OACjCoZ,EAAAxP,UAAA,CAD4B+O,SAAKS,EAAAvP,cAAA,cAAAuP,EAAAtP,WAAAsM,EAAAgD,CAAA,CADC,CAAC,CAADhD,oCACNuC,WAG9B,OACI7Y,EAAAA,EAAAA,KAACkT,EAAAA,uBAAsB,CAAC9H,MAAO,CAAEiE,KAAM,GAAIpQ,UACvC2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kBAAiB1I,SAAA,EAE7B2I,EAAAA,EAAAA,MAAC6L,GAAO,CACJ3E,IAAK9C,EACL0H,SAAU5D,GACV1E,MAAO,CAAEiE,KAAM,GACfsE,eAAgBsC,GAChBrK,cAAa8L,OAAAC,OAAA,GACNJ,EAAe,CAClBhL,cAAe,KACfC,eAAgB,OAEpB+M,mBAAmB,EACnBC,gBAAgB,EAChBC,gBAAgB,EAAMxa,SAAA,EAGtBe,EAAAA,EAAAA,KAAC+N,GAAM,CACHK,WAAYmJ,EACZmC,MAAI,EACJC,OAAQ,CAAEpQ,EAAG,GAAKC,EAAG,IACrBoQ,mBAAmB,EACnB3R,QAASA,KACD+D,EAAOjJ,SACPiJ,EAAOjJ,QAAQ8W,gBAAenC,OAAAC,OAAC,CAAC,EACzBJ,EAAe,CAClBhL,cAAe,KACfC,eAAgB,OACjB,MAETvN,UAEF2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,8BAA6B1I,SAAA,EACzCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,mGAAkG1I,UAC9Ge,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,WAAW4E,KAAM,GAAI9C,MAAM,aAE9Cd,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAAA7I,SAAA,CAAEqY,EAAS5C,WAAW,2CAKlClO,EAAAA,EAAAA,SAAQ,IAAMuK,EAAQhJ,IAAK+L,IACxB9T,EAAAA,EAAAA,KAAC+N,GAAM,CAEHK,WAAY,CAAE/B,SAAUyH,EAAGzH,SAAUC,UAAWwH,EAAGxH,WACnDrE,QAASA,IAAMiJ,EAAc4C,GAC7B8F,mBAAmB,EAAM3a,UAEzBe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,kFAAkFyD,MAAO,CAAEzC,MAAO,GAAIC,OAAQ,IAAK3J,UAC/He,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CACFC,OAAQ,CAAES,IAAKD,EAAGE,MAClBrM,UAAU,6BACV6L,WAAW,aATd,MAAMM,EAAGvT,OAalB,CAACwQ,QAIT/Q,EAAAA,EAAAA,KAAC0H,EAAAA,aAAY,CAACC,UAAU,6BAA4B1I,UAChDe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAASA,IAAMd,EAAWe,SAC1BP,UAAU,+FAA8F1I,UAExGe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,QAAQ4E,KAAM,GAAI9C,MAAM,eAK/C1I,EAAAA,EAAAA,KAACiL,EAAAA,gBAAe,CAACC,QAASA,EAAQjM,UAC9B2I,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CAACuD,MAAO,CAAC,CAAEC,SAAU,WAAYmE,KAAM,EAAGC,MAAO,EAAGI,gBAAiB,QAASoE,oBAAqB,GAAIC,qBAAsB,GAAIK,UAAW,GAAIC,WAAY,GAAI4E,aAAc,GAAKpG,GAAmB/T,SAAA,EAEhNe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,0DAGhB3H,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,sDAAqD1I,UACjEe,EAAAA,EAAAA,KAACmL,EAAAA,QAAStD,KAAI,CAACuD,MAAO,CAACwD,GAAOgI,SAAUyC,QAE5CrZ,EAAAA,EAAAA,KAAC8Z,EAAAA,WAAU,CAAA7a,UAGP2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,wBAAuB1I,SAAA,EACnC2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kBAAiB1I,SAAA,EAC7B2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,uDAAsD1I,SACjEmY,GAAY7W,GAAK,eAAiB,qBAEvCP,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,6BAA4B1I,SACvCmY,GAAY7W,GACP,qBAAqB6W,EAAW7W,0CAChC,0CAIT6W,GAAYtF,WACTlK,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,uDAAsD1I,SAAA,EAClEe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,WAAW4E,KAAM,GAAI9C,MAAM,aAC1C1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oCAAoCmO,cAAe,EAAE7W,SAChEmY,EAAWtF,kBAM5BlK,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,8FAA6F1I,SAAA,EACzGe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,OAAO4E,KAAM,GAAI9C,MAAM,aACtCd,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,2CAA0C1I,SAAA,CAAC,YAC7CqZ,YAStB1Q,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,OAAM1I,SAAA,EAClBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iEAAgE1I,SAAC,yBACjFe,EAAAA,EAAAA,KAAC+Z,GAAAA,QAAQ,CACLhc,KAAMgb,EACNiB,WAAYA,EAAG7E,WAAWnV,EAAAA,EAAAA,KAACwV,GAAW,CAACL,KAAMA,IAC7C8E,eAAe,EACfC,aAAe/E,GAASA,EAAK5U,SAKrCqH,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbC,QAASA,IAAMd,EAAWR,SAAS,eAAgB,CAAEY,cACrDI,UAAU,4GAA2G1I,SAAA,EAErHe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,eAAe4E,KAAM,GAAI9C,MAAM,WAC9C1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iEAAgE1I,SAAC,sC,0BChdrH,MAgHA,GAhHsBkb,KAClB,MAAM,UAAE3a,GAAcV,KACfsb,EAASC,IAAcjb,EAAAA,EAAAA,UAAS,KAChCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCkb,EAAYC,IAAiBnb,EAAAA,EAAAA,WAAS,IAE7CU,EAAAA,EAAAA,WAAU,KACN0a,KACD,IAEH,MAAMA,EAAetd,UACjBoC,GAAW,GACX,UACUE,IACN,MAAME,QAAYpD,EAAIqD,IAAI,yBACpByS,EAAS1S,EAAI3B,MAAMsU,KAAK,CAACC,EAAGC,IAAM,IAAIpN,KAAKoN,EAAEC,YAAc,IAAIrN,KAAKmN,EAAEE,cAAgB,GAC5F6H,EAAWjI,EACf,CAAE,MAAOxS,GACLzC,QAAQM,MAAM,uBAAwBmC,EAC1C,CAAC,QACGN,GAAW,GACXib,GAAc,EAClB,GAiBEE,EAAcC,IAChB,IAAKA,EAAY,MAAO,GAExB,OADa,IAAIvV,KAAKuV,GACVnF,mBAAmB,QAAS,CACpCoF,IAAK,UAAWC,MAAO,QAASC,KAAM,UACtCC,KAAM,UAAWC,OAAQ,aAuCjC,OAAI1b,IAAYib,GAERta,EAAAA,EAAAA,KAAC0H,EAAAA,aAAY,CAACC,UAAU,8CAA6C1I,UACjEe,EAAAA,EAAAA,KAACyI,EAAAA,QAAiB,CAAC+C,KAAK,QAAQ9C,MAAM,YAM9Cd,EAAAA,EAAAA,MAACF,EAAAA,aAAY,CAACC,UAAU,kBAAiB1I,SAAA,EACrCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,6CAA4C1I,UACxDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,8CAA6C1I,SAAC,qBAElEe,EAAAA,EAAAA,KAAC8Z,GAAAA,QAAU,CACPkB,gBAAgBhb,EAAAA,EAAAA,KAACib,GAAAA,QAAc,CAACX,WAAYA,EAAYY,UAxElDA,KACdX,GAAc,GACdC,OAuEQW,sBAAuB,CAAEC,QAAS,GAAIC,cAAe,KACrDC,8BAA8B,EAAMrc,SAEnCmb,EAAQ9Y,OAAS,EAAI8Y,EAAQrS,IArDfoN,IACvB,MAAMoG,EAnBczd,KACpB,OAAQA,GACJ,IAAK,YAAa,MAAO,+CACzB,IAAK,YAAa,MAAO,yCACzB,IAAK,UAAW,MAAO,4CACvB,QAAS,MAAO,8CAcA0d,CAAerG,EAAKrX,QACxC,OACI8J,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAeF,UAAU,iEAAgE1I,SAAA,EAC1F2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,4CAA2C1I,SAAA,EACvD2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kCAAiC1I,SAAA,EAC7Ce,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,qBAAoC,cAAhBwN,EAAKrX,OAAyB,cAAgB,aAAcmB,SACtE,QAAtBkW,EAAKC,cACFpV,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,YAAY4E,KAAM,GAAI9C,MAAuB,cAAhByM,EAAKrX,OAAyB,UAAY,aAEtFkC,EAAAA,EAAAA,KAACqV,EAAAA,QAAsB,CAACzO,KAAK,YAAY4E,KAAM,GAAI9C,MAAuB,cAAhByM,EAAKrX,OAAyB,UAAY,eAG5G8J,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oCAAmC1I,SAAEkW,EAAKG,WAC1DtV,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAEwb,EAAWtF,EAAK3C,qBAGjExS,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,+BAA+B4T,EAAYE,MAAM,KAAK,MAAMF,EAAYE,MAAM,KAAK,KAAKxc,UACrGe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAW,qBAAqB4T,EAAYE,MAAM,KAAK,KAAKxc,SAAEkW,EAAKrX,eAGjF8J,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,iBAAgB1I,SAAA,EAC5B2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,uBAAsB1I,SAAA,EAClCe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,iBAAiB4E,KAAM,GAAI9C,MAAM,UAAU0C,MAAO,CAAEsQ,UAAW,EAAGjQ,YAAa,MAC9FzL,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA+BmO,cAAe,EAAE7W,SAAEkW,EAAKrD,cAE1EqD,EAAKwG,QACF/T,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,uCAAsC1I,SAAA,CAAC,SAAEkW,EAAKwG,cAzB/DxG,EAAK5U,OAmDRqH,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,qBAAoB1I,SAAA,EAChCe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,oBAAoB4E,KAAM,GAAI9C,MAAM,aACnD1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qBAAoB1I,SAAC,+BCjD7D,GA3DoB2c,EAAGzU,aAAYE,YAC/B,MAAM,KAAEpC,EAAI,MAAEoJ,GAAUhH,EAAMR,QAAU,CAAC,EA+BzC,OACIe,EAAAA,EAAAA,MAACF,EAAAA,aAAY,CAACC,UAAU,kBAAiB1I,SAAA,EACrCe,EAAAA,EAAAA,KAACmT,EAAAA,QAAS,CAACC,SAAS,kBAGpBpT,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,mDAAkD1I,UAC9D2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,wBAAuB1I,SAAA,EACnCe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAASA,IAAMd,EAAWe,SAC1BP,UAAU,oCAAmC1I,UAE7Ce,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,aAAa4E,KAAM,GAAI9C,MAAM,eAEhD1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,yCAAyCmO,cAAe,EAAE7W,SACrEoP,GAAS,4BAKtBzG,EAAAA,EAAAA,MAACkS,GAAAA,QAAU,CAACnS,UAAU,mBAAmB2T,8BAA8B,EAAMrc,SAAA,CAhDjEgG,KAChB,OAAQA,GACJ,IAAK,QACD,OACI2C,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,oGAC/Ce,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,sBAC/Ce,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,gEAG3D,IAAK,UACD,OACI2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,wCAC/Ce,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,qBAC/Ce,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,wEAG3D,IAAK,QACD,OACIe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAAA5I,UACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,8FAG3D,QACI,OAAOe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,gBAAe1I,SAAC,6BAwBtC4c,CAAW5W,IACZjF,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,gB,qCCnDjB,SAASmU,IAAY,WAAE3U,IAClC,MAAM,MAAE/G,EAAK,gBAAEL,GAAoBjB,KAC5BuB,EAAO0b,IAAY3c,EAAAA,EAAAA,UAAS,KAC5BC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAGvCU,EAAAA,EAAAA,WAAU,KACe5C,WACjBC,QAAQC,IAAI,4BAGZ,IACI,MAAM4e,QAAgBtd,YAAYud,aAAa,eAC/C9e,QAAQC,IAAI,yCAA0C4e,EAC1D,CAAE,MAAOrW,GAAKxI,QAAQC,IAAI,yCAA2C,CAErED,QAAQC,IAAI,qDAAsD2C,IAKtEmc,IACD,CAACnc,KAGJD,EAAAA,EAAAA,WAAU,KACFC,IACA5C,QAAQC,IAAI,8DAIR+J,EAAWgV,aACXhV,EAAWe,WAQpB,CAACnI,IAEJ5C,QAAQC,IAAI,0BACIgf,GAAAA,QAAUC,WAkC1B,OACIrc,EAAAA,EAAAA,KAAC0H,EAAAA,aAAY,CAACC,UAAU,kBAAiB1I,UACrCe,EAAAA,EAAAA,KAACsc,GAAAA,QAAoB,CACjBC,SAA8C,SAC9C5U,UAAU,SAAQ1I,UAElB2I,EAAAA,EAAAA,MAACkS,GAAAA,QAAU,CAACqB,sBAAuB,CAAEqB,SAAU,GAAKC,0BAA0B,UAASxd,SAAA,EAEnF2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,uGAAsG1I,SAAA,EAClHe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,6EAChB3H,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,4CAA2C1I,UACvDe,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CAAC1L,UAAU,2BAA2B2L,OAAQC,EAAQ,WAEhEvT,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oDAAmD1I,SAAC,sBAGxE2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,cAAa1I,SAAA,EACzBe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,oBAAmB1I,UAC/Be,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oCAAmC1I,SAAC,yBAGxD2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,mBAAkB1I,SAAA,EAC9Be,EAAAA,EAAAA,KAAC0c,GAAAA,QAAS,CACNC,YAAY,mBACZhV,UAAU,yFACVzH,MAAOG,EACPuc,aAAcb,EACdc,eAAe,OACfC,aAAa,mBAGjB9c,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAhEH/K,UAErB,GADAC,QAAQC,IAAI,6CAA8CiD,GACrDA,EAIL,IACIf,GAAW,GACXnC,QAAQC,IAAI,0CACZ,MAAMW,QAAaqC,EAAMC,GACzBlD,QAAQC,IAAI,uCAAwCW,GAEpDoJ,EAAWR,SAAS,SAAU,CAC1BrG,IAAKvC,EAAKuC,IACVC,GAAIxC,EAAKwC,GACTzC,OAAQC,EAAKD,OACbuC,MAAOA,GAEf,CAAE,MAAOT,GACLzC,QAAQM,MAAM,4BAA6BmC,GAC3C,MAAMa,EAAMb,EAAIhC,UAAUG,MAAMN,OAAS,kCACzC4K,EAAAA,QAAMC,MAAM,eAAgB7H,EAChC,CAAC,QACGnB,GAAW,EACf,MArBI+I,EAAAA,QAAMC,MAAM,QAAS,6BA8DDH,SAAU9I,EACVsI,UAAW,uDAAsDtI,EAAU,cAAgB,eAAgBJ,UAE3Ge,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAEI,EAAU,gBAAkB,2BAQ5G,C,gDC3HO,MAAM0d,GAAgBA,EAAGC,UAASC,UAASC,eAAcnI,mBAwDxD/U,EAAAA,EAAAA,KAACmd,GAAAA,QAAK,CACFH,QAASA,EACTI,aAAW,EACXC,cAAc,OACdC,eAAgBL,EAAQhe,UAExBe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbuV,cAAe,EACftV,QAASgV,EACTtV,UAAU,iCAAgC1I,UAE1Ce,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CAACuV,cAAe,EAAEte,UAC/B2I,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CACV2V,SAAUC,EAAAA,YAAYC,YACtB/V,UAAU,yBAAwB1I,SAAA,EAGlCe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAASgV,EACTtV,UAAU,2FAA0F1I,UAEpGe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,QAAQ4E,KAAM,GAAI9C,MAAM,eAI3C1I,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,WAAU1I,UACtB2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,6BAA4B1I,SAAA,EACxCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,sEAAqE1I,UACjFe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,mBAAmB4E,KAAM,GAAI9C,MAAM,eAEtD1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oCAAmC1I,SAAC,yBAK5De,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,2BAGhBC,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,MAAK1I,SAAA,EAEjB2I,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbC,QAhGF/K,UACtB,IACI,MAAMygB,EAAc,iCAAiC5I,EAAa1I,YAAY0I,EAAazI,kBACrFsR,GAAAA,QAAMC,MAAM,CACdhe,QAAS,+DAA+Dqd,qBAAgCS,IACxGtP,MAAO,uBAEf,CAAE,MAAO5Q,GACLN,QAAQM,MAAM,0BAA2BA,EAC7C,GAwFwBkK,UAAU,sDAAqD1I,SAAA,EAE/De,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,qEAAoE1I,UAChFe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,eAAe4E,KAAM,GAAI9C,MAAM,eAElDd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,SAAQ1I,SAAA,EACpBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,2CAA0C1I,SAAC,yBAC3De,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAC,uEAE5Ce,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,kBAAkB4E,KAAM,GAAI9C,MAAM,gBAIrDd,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbC,QApFJ6V,KACpBzV,EAAAA,QAAMC,MACF,yBACA,oEACA,CACI,CAAEC,KAAM,SAAU6C,MAAO,UACzB,CACI7C,KAAM,eACNN,QAASA,IAAM8V,GAAAA,QAAQC,QAAQ,uBA6EnBrW,UAAU,sDAAqD1I,SAAA,EAE/De,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,qEAAoE1I,UAChFe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,OAAO4E,KAAM,GAAI9C,MAAM,eAE1Cd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,SAAQ1I,SAAA,EACpBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,2CAA0C1I,SAAC,4BAC3De,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAC,gDAE5Ce,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,kBAAkB4E,KAAM,GAAI9C,MAAM,gBAIrDd,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbC,QArFRgW,KAChB5V,EAAAA,QAAMC,MACF,kBACA,iCACA,CACI,CAAEC,KAAM,iBAAkBN,QAASA,IAAMI,EAAAA,QAAMC,MAAM,YAAa,uDAClE,CAAEC,KAAM,kBAAmBN,QAASA,IAAMI,EAAAA,QAAMC,MAAM,YAAa,qCACnE,CAAEC,KAAM,cAAeN,QAASA,IAAMI,EAAAA,QAAMC,MAAM,YAAa,sCAC/D,CAAEC,KAAM,SAAU6C,MAAO,aA8ETzD,UAAU,sDAAqD1I,SAAA,EAE/De,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,qEAAoE1I,UAChFe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,OAAO4E,KAAM,GAAI9C,MAAM,eAE1Cd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,SAAQ1I,SAAA,EACpBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,2CAA0C1I,SAAC,qBAC3De,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAC,0DAE5Ce,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,kBAAkB4E,KAAM,GAAI9C,MAAM,gBAIrDd,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbC,QAjINiW,KAClB7V,EAAAA,QAAMC,MACF,iBACA,gDACA,CACI,CAAEC,KAAM,SAAU6C,MAAO,UACzB,CACI7C,KAAM,OACNN,QAASA,IAAM8V,GAAAA,QAAQC,QAAQ,WAC/B5S,MAAO,kBAyHKzD,UAAU,6BAA4B1I,SAAA,EAEtCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,oEAAmE1I,UAC/Ee,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,UAAU4E,KAAM,GAAI9C,MAAM,eAE7Cd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,SAAQ1I,SAAA,EACpBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,2CAA0C1I,SAAC,cAC3De,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAC,wDAE5Ce,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,kBAAkB4E,KAAM,GAAI9C,MAAM,mBAKzD1I,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,iB,6DC5JxCwW,GAAAA,uBAAqC,CACjCC,mBAAoBlhB,UAAA,CAChBmhB,iBAAiB,EACjBC,kBAAkB,EAClBC,gBAAgB,EAChBC,iBAAiB,EACjBC,gBAAgB,MCgBxB,MAAQ9V,MAAK,GAAEC,OAAO,IAAIC,EAAAA,QAAWlJ,IAAI,UAEnCyQ,GAAc,CAChBC,UAAoB,IAATzH,GACX0H,SAAmB,IAAT1H,IAGR8V,GAAyB,uBACzBC,GAAmB,0BAGzB,SAASC,GAA0BC,EAAMC,EAAMC,EAAMC,GACjD,IACIC,EAAOC,GAAQH,EAAOF,GACtBM,EAAOD,GAAQF,EAAOF,GACtBxM,EACAvO,KAAKqb,IAAIH,EAAO,GAAKlb,KAAKqb,IAAIH,EAAO,GACrClb,KAAKsb,IAAIH,GAAQL,IAAS9a,KAAKsb,IAAIH,GAAQH,IAC3Chb,KAAKqb,IAAID,EAAO,GAAKpb,KAAKqb,IAAID,EAAO,GAGzC,OATQ,MAOA,EAAIpb,KAAKub,MAAMvb,KAAKwb,KAAKjN,GAAIvO,KAAKwb,KAAK,EAAIjN,IAGvD,CAEA,SAAS4M,GAAQM,GACb,OAAOA,GAAOzb,KAAK0b,GAAK,IAC5B,CAaC,MAAAC,GAAA,CAAA7Z,KAAA,8SAAA8Z,GAAA,CAAA9Z,KAAA,0PAAA+Z,GAAA,CAAA/Z,KAAA,oHAAAga,GAAA,CAAAha,KAAA,sKAAAia,GAAA,CAAAja,KAAA,8HAyyBD,GAvyB4Bka,EAAG1Y,YAC3B,MAAMF,GAAaC,EAAAA,EAAAA,iBACb0P,GAAYC,EAAAA,EAAAA,iBAEdhZ,KAAMiiB,EACNjL,aAAckL,EACdhJ,YAAaiJ,EACb5K,QAAS6K,GACT9Y,EAAMR,QAAU,CAAC,GAEf,OAAErF,EAAM,YAAEE,EAAW,iBAAEE,EAAgB,eAAE+B,GAAmBxC,IAClEhE,QAAQC,IAAI4iB,GACZ7iB,QAAQC,IAAI6iB,GAGZ,MAAOnL,EAAUsL,IAAehhB,EAAAA,EAAAA,UAAS,OAClCgY,EAAYC,IAAiBjY,EAAAA,EAAAA,UAAS,OACtC2V,EAAcsL,IAAmBjhB,EAAAA,EAAAA,UAAS6gB,GAAiB,OAC3DK,EAAkBC,IAAuBnhB,EAAAA,EAAAA,UAAS,OAClDohB,EAAeC,IAAoBrhB,EAAAA,EAAAA,UAAS,OAC5CmI,EAAWmZ,IAAgBthB,EAAAA,EAAAA,UAAS,OAG3CU,EAAAA,EAAAA,WAAU,KACN3C,QAAQC,IAAI,kDAAyC,qCAAsC,CACvFujB,YAAanf,EACbI,mBACAgf,iBAAkBlf,EAClBmf,gBAAiBnf,GAAauD,KAC9BsC,YACAuP,eAEL,CAACtV,EAAQI,EAAkBF,EAAa6F,EAAWuP,IAGtD,MAAO/F,EAASC,IAAc5R,EAAAA,EAAAA,UAAS,KAChC6R,EAAYC,IAAiB9R,EAAAA,EAAAA,UAAS,MAGvCwD,GAAYT,EAAAA,EAAAA,SAAO,IACzBrC,EAAAA,EAAAA,WAAU,KACN8C,EAAUG,SAAU,EACb,KAAQH,EAAUG,SAAU,IACpC,KAEHjD,EAAAA,EAAAA,WAAU,KACU5C,WACZ,MAAMiU,QAAYlB,KAClBe,EAAWG,IAEfC,IACD,IAEH,MAAO0P,EAAgBC,IAAqB3hB,EAAAA,EAAAA,WAAS,IAC9C4hB,EAAqBC,IAA0B7hB,EAAAA,EAAAA,WAAS,IACxD8hB,EAAmBC,IAAwB/hB,EAAAA,EAAAA,WAAS,IACpDgiB,EAAmBC,IAAwBjiB,EAAAA,EAAAA,WAAS,IAGpDkiB,GAAqBC,KAA0BniB,EAAAA,EAAAA,WAAS,IACxDoiB,GAAoBC,KAAyBriB,EAAAA,EAAAA,UAAS+F,KAAKC,OAC5Dsc,IAA4Bvf,EAAAA,EAAAA,QAAO,MAEnC6J,IAAS7J,EAAAA,EAAAA,QAAO,MAGhBkH,IAAaD,EAAAA,EAAAA,gBAAegH,GAAYC,WACxC/G,IAAUF,EAAAA,EAAAA,gBAAe,CAAEI,EAAG,IAE9B0B,GAAUxB,EAAAA,QAAQC,MACnBC,QAAQ,4CAAAgW,EAAA,QACLtW,EAAO,WAAcD,IAAU,MAAAsY,EAAA,WAA/BrY,EAAQpJ,MAAQ,CAAEsJ,EAAGH,EAAWnJ,MACpC,EADmC,OAClCyhB,EAAA7X,UAAA,CADGR,UAAqBD,cAAUsY,EAAA5X,cAAA,cAAA4X,EAAA3X,WAAA4V,EAAA+B,CAAA,CAD1B,CAAC,CAAD/B,qCACLtW,WAAqBD,iBAExBY,SAAS,2CAAA0V,EAAA,WACNtW,EAAU,QAA8BC,EAAO,YAEnB8G,IAAW,MAAAwR,EAAA,SAHhCrc,GACP8D,EAAWnJ,MAAQqF,EAAM6E,aAAed,EAAQpJ,MAAMsJ,EAEtDH,EAAWnJ,MAAQ6D,KAAK6O,IAAIxC,EAAYE,SAAUvM,KAAKC,IAAIqF,EAAWnJ,MAAOkQ,EAAYC,UAAY,IACzG,EAD2C,OAC1CuR,EAAA9X,UAAA,CAHGT,aAAwCC,UAEZ8G,eAAWwR,EAAA7X,cAAA,cAAA6X,EAAA5X,WAAA2V,EAAAiC,CAAA,CAHjC,CAAC,CAADjC,oCACNtW,cAAwCC,WAEZ8G,YAAW,MAE1C/F,MAAM,2CAAAqV,EAAA,WACCrW,EAAU,YAAU+G,EAAW,WACZyC,IAAU,MAAAgP,EAAA,WAD7BxY,EAAWnJ,OAASkQ,EAAYC,UAAYD,EAAYE,UAAY,EACpEjH,EAAWnJ,MAAQ2S,EAAWzC,EAAYE,SAAU,CAAEyC,SAAU,MAEhE1J,EAAWnJ,MAAQ2S,EAAWzC,EAAYC,UAAW,CAAE0C,SAAU,KAEzE,EAJqC,OAIpC8O,EAAA/X,UAAA,CALOT,aAAoB+G,cACDyC,cAAUgP,EAAA9X,cAAA,cAAA8X,EAAA7X,WAAA0V,EAAAmC,CAAA,CAF9B,CAAC,CAADnC,oCACCrW,cAAoB+G,YAAW,GACZyC,WAAU,gBAMnCG,IAAoBtI,EAAAA,EAAAA,kBAAiB,2CAAAmV,EAAA,WAETxW,EAAU,OAC5BT,IAAM,MAAAkZ,EAAA,WAFlB,MAAO,CACHlX,UAAW,CAAC,CAAEvB,WAAYA,EAAWnJ,QACrC0I,OAAQA,EACR2G,IAAK,EACL6J,aAAc,GAEtB,EAJsB,OAIrB0I,EAAAhY,UAAA,CALiCT,aAClBT,UAAMkZ,EAAA/X,cAAA,cAAA+X,EAAA9X,WAAA6V,EAAAiC,CAAA,CAHqB,CAAC,CAADjC,oCAETxW,cAClBT,OAAM,MAOhBmZ,IAAqBrX,EAAAA,EAAAA,kBAAiB,2CAAAoV,EAAA,WAEVzW,IAAU,MAAA2Y,EAAA,WADxC,MAAO,CACHpX,UAAW,CAAC,CAAEvB,WAAYA,EAAWnJ,MAAQ,KAErD,EAF4C,OAE3C8hB,EAAAlY,UAAA,CAFiCT,cAAU2Y,EAAAjY,cAAA,cAAAiY,EAAAhY,WAAA8V,EAAAkC,CAAA,CAFA,CAAC,CAADlC,oCAEVzW,kBAKlCvJ,EAAAA,EAAAA,WAAU,KACkB5C,WAEpB,GAAI8iB,EAAW,CACX,MAAMiC,EAAOjC,EAAUnL,iBACjBqN,EAAQlC,EAAU3a,QAAU2a,EAAUva,WAE5CtI,QAAQC,IAAI,+CAAsC,qCAAsC,CACpFmK,UAAW2a,EACXC,qBAAsBD,EACtBhF,aAAc,GAAG+E,EAAKvN,cAAcuN,EAAKtN,YACzCyN,WAAYH,EAAK1hB,GACjByf,UAAWA,IAGfI,EAAY6B,GACZvB,EAAawB,GACbve,IAAiBue,GAEbD,EAAKI,kBACL9B,EAAoB,CAChBlU,SAAUiW,WAAWL,EAAKI,kBAC1B/V,UAAWgW,WAAWL,EAAKM,qBAG/BtC,GAAeI,EAAgBJ,GAGnC,MAAMuC,EAAa,CACf1N,SAAUmN,EACVxc,WAAYyc,EACZlN,cAAeiL,SAEbvhB,EAAAA,aAAyBggB,GAAwBxb,KAAKC,UAAUqf,GAC1E,KAAO,CACH,MAAMtQ,QAAcxT,EAAAA,aAAyBggB,IAC7C,GAAIxM,EAAO,CACP,MAAMC,EAASjP,KAAKsC,MAAM0M,GAC1BkO,EAAYjO,EAAO2C,UACnB4L,EAAavO,EAAO1M,YACpB9B,IAAiBwO,EAAO1M,YACxB4a,EAAgBlO,EAAO6C,cAC3B,CACJ,CAIA,IACI,MAAMwC,QAAkB9Y,EAAAA,aAAyBigB,IACjD,GAAInH,EAAW,CACX,MAAMiL,EAAavf,KAAKsC,MAAMgS,GAC9BH,EAAcoL,EAClB,MAAWvC,GAAmBC,IAE1B9I,EAAc,CACVJ,YAAaiJ,EACb5K,QAAS6K,GAGrB,CAAE,MAAOxa,GACLxI,QAAQM,MAAM,2BAA4BkI,EAC9C,GAGJ+c,IACD,CAAC1C,KAGJlgB,EAAAA,EAAAA,WAAU,KASN,GAPA3C,QAAQC,IAAI,8CAAqC,kBAAmB,CAChEwjB,iBAAkBlf,EAClBihB,eAAgBpb,EAChBuP,YACA8L,eAAgBlhB,IAAgB6F,IAAcuP,MAG7CpV,IAAgB6F,IAAcuP,EAAW,OAY9C,GATA3Z,QAAQC,IAAI,6DAAoD,qCAAsC,CAClG6H,KAAMvD,EAAYuD,KAClBQ,WAAY/D,EAAY+D,WACxBJ,OAAQ3D,EAAY2D,OACpBwd,iBAAkBtb,EAClBub,YAAaphB,IAIQ,6BAArBA,EAAYuD,KAAqC,CAEjD,MAAM8d,EAAqBjO,GAAUvU,GAC/ByiB,EAAqBthB,EAAYuhB,YAEvC9lB,QAAQC,IAAI,2DAAkD,qCAAsC,CAChGiP,SAAU3K,EAAY2K,SACtBC,UAAW5K,EAAY4K,UACvB2W,YAAaD,EACbE,qBAAsBH,EACtB1d,OAAQ3D,EAAY2D,OACpBH,WAAW,IAAIC,MAAOO,uBAIrBqd,GAAsBC,IAAuBD,EAS9C5lB,QAAQc,KAAK,gFARbsiB,EAAoB,CAChBlU,SAAUiW,WAAW5gB,EAAY2K,UACjCC,UAAWgW,WAAW5gB,EAAY4K,aAGtCmV,GAAsBtc,KAAKC,OAC3Bmc,IAAuB,GAI/B,CAKA,GAHiBtJ,OAAOvW,EAAY+D,YAAc/D,EAAY2D,UACzC4S,OAAO1Q,IAEK3E,EAAUG,QACvC,OAAQrB,EAAYuD,MAChB,IAAK,gBAED8b,GAAkB,GAClBpd,IAAiB,MAGjBjF,EAAAA,gBAA4BggB,IAC5BhgB,EAAAA,gBAA4BigB,IAG5B1a,WAAW,KACHrB,EAAUG,SAAS4D,EAAS,SACjC,KACH,MACJ,IAAK,gBACL,IAAK,6BAEDsa,GAAuB,GACvBtd,IAAiB,MAGjBjF,EAAAA,gBAA4BggB,IAC5BhgB,EAAAA,gBAA4BigB,IAG5B1a,WAAW,KACHrB,EAAUG,SAAS4D,EAAS,SACjC,KACH,MAKJ,IAAK,mBACDwa,GAAqB,GACrB9Y,EAAAA,QAAMC,MAAM,mBAAoB,gDAI7C,CAAC5G,EAAa6F,EAAWuP,KAG5BhX,EAAAA,EAAAA,WAAU,KACN,GAAIiV,GAAgBuL,GAAoBxL,EAAU,CAC9C,MAAMqO,EA1RlB,SAAsBC,EAAYC,GAC9B,IAAKD,IAAeC,EAAY,OAAO,KACvC,MAAMC,EAAW1E,GACbwE,EAAW/W,SACX+W,EAAW9W,UACX+W,EAAWhX,SACXgX,EAAW/W,WAIf,OADoBvI,KAAKwf,MAAOD,EADZ,GACsC,IACrC,CACzB,CA+QwBE,CAAazO,EAAcuL,GACvCG,EAAiB0C,GAGjB,MAAMG,EAAW1E,GACb7J,EAAa1I,SACb0I,EAAazI,UACbgU,EAAiBjU,SACjBiU,EAAiBhU,YD5O1BpP,gBAAkD,aACrDggB,EAAY,cACZsD,EAAa,SACb8C,IAoBJ,CCyNYG,CAAmC,CAC/BvG,aAAc,GAAGpI,EAASJ,cAAcI,EAASH,YACjD6L,cAAe2C,EACfG,SAAUA,IAIVtX,GAAOjJ,SACPiJ,GAAOjJ,QAAQ2gB,iBAAiB,CAAC3O,EAAcuL,GAAmB,CAC9DqD,YAAa,CAAEpU,IAAK,IAAKE,MAAO,GAAIC,OAAQ9G,GAAS,EAAG4G,KAAM,IAC9DoU,UAAU,GAGtB,GACD,CAAC7O,EAAcuL,KAGlBxgB,EAAAA,EAAAA,WAAU,KAEN,IAAKgV,IAAavN,EAAW,OAsB7B,OAhBAma,GAA0B3e,QAAUgC,YAAY,KAC5C,MAAM8e,EAAsB1e,KAAKC,MAAQoc,GAErCqC,EALqB,KAMjBvC,KACAnkB,QAAQc,KAAK,yEAAyE8F,KAAK2U,MAAMmL,EAAsB,SACvHtC,IAAuB,IAGtBD,KACDnkB,QAAQC,IAAI,yCACZmkB,IAAuB,KAdC,KAmB7B,KACCG,GAA0B3e,SAC1B+B,cAAc4c,GAA0B3e,WAGjD,CAAC+R,EAAUvN,EAAWia,GAAoBF,MA+B7CxhB,EAAAA,EAAAA,WAAU,KACN3C,QAAQC,IAAI,kDAAmD+J,EAAa,UAAY,YACzF,IAyGHhK,QAAQC,IAAI,+BAAgC0X,EAAU,cAAesC,GA0BrE,IAAKtC,IAAaC,EACd,OACInN,EAAAA,EAAAA,MAACF,EAAAA,aAAY,CAACC,UAAU,8CAA6C1I,SAAA,EACjEe,EAAAA,EAAAA,KAACyI,EAAAA,QAAiB,CAAC+C,KAAK,QAAQ9C,MAAM,aACtC1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iCAAgC1I,SAAC,2BACjDe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CAACC,QAASA,IAAMlB,EAAU,QAASY,UAAU,WAAU1I,UACpEe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,eAAc1I,SAAC,uBA0F/C,OACI2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACuD,MAAO,CAAEiE,KAAM,GAAIpQ,SAAA,CACpB6hB,IApFLlZ,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CACV2V,SAAUsG,EAAAA,OACVnc,UAAU,wFAAuF1I,SAAA,EAEjGe,EAAAA,EAAAA,KAACmL,EAAAA,QAAStD,KAAI,CACV2V,SAAUuG,EAAAA,OAAOjgB,MAAM,KACvB6D,UAAU,kGAAiG1I,UAE3Ge,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,YAAY4E,KAAM,GAAI9C,MAAM,aAG/C1I,EAAAA,EAAAA,KAACmL,EAAAA,QAASrD,KAAI,CACV0V,SAAUsG,EAAAA,OAAOhgB,MAAM,KACvB6D,UAAU,8EAA6E1I,SAC1F,uBAIDe,EAAAA,EAAAA,KAACmL,EAAAA,QAASrD,KAAI,CACV0V,SAAUsG,EAAAA,OAAOhgB,MAAM,KACvB6D,UAAU,uDAAsD1I,SACnE,8DAIA6V,IACGlN,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CACV2V,SAAUsG,EAAAA,OAAOhgB,MAAM,KACvB6D,UAAU,6EAA4E1I,SAAA,EAEtFe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iDAAgD1I,SAAC,yBACjE2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,wDAAuD1I,SAAA,CAClE6V,EAASJ,WAAW,IAAEI,EAASH,iBAK5C3U,EAAAA,EAAAA,KAACmL,EAAAA,QAASrD,KAAI,CACV0V,SAAUsG,EAAAA,OAAOhgB,MAAM,KACvB6D,UAAU,4DAA2D1I,SACxE,8BA6CA+hB,IArCLpZ,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CACV2V,SAAUsG,EAAAA,OACVnc,UAAU,wFAAuF1I,SAAA,EAEjGe,EAAAA,EAAAA,KAACmL,EAAAA,QAAStD,KAAI,CACV2V,SAAUuG,EAAAA,OAAOjgB,MAAM,KACvB6D,UAAU,qEAAoE1I,UAE9Ee,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,QAAQ4E,KAAM,GAAI9C,MAAM,eAG3C1I,EAAAA,EAAAA,KAACmL,EAAAA,QAASrD,KAAI,CACV0V,SAAUsG,EAAAA,OAAOhgB,MAAM,KACvB6D,UAAU,8EAA6E1I,SAC1F,uBAIDe,EAAAA,EAAAA,KAACmL,EAAAA,QAASrD,KAAI,CACV0V,SAAUsG,EAAAA,OAAOhgB,MAAM,KACvB6D,UAAU,uDAAsD1I,SACnE,8CAIDe,EAAAA,EAAAA,KAACmL,EAAAA,QAASrD,KAAI,CACV0V,SAAUsG,EAAAA,OAAOhgB,MAAM,KACvB6D,UAAU,4DAA2D1I,SACxE,+BAUD2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kBAAiB1I,SAAA,EAE7B2I,EAAAA,EAAAA,MAAC6L,GAAO,CACJ3E,IAAK9C,GACL0H,SAAU5D,GACV1E,MAAO,CAAEiE,KAAM,GACfsE,eAlIC,CACb,CAAE,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aACpD,CAAE,YAAe,cAAe,QAAW,CAAC,CAAE,WAAc,SAC5D,CAAE,YAAe,mBAAoB,QAAW,CAAC,CAAE,MAAS,aAC5D,CAAE,YAAe,qBAAsB,QAAW,CAAC,CAAE,MAAS,aAC9D,CAAE,YAAe,iBAAkB,YAAe,kBAAmB,QAAW,CAAC,CAAE,MAAS,aAC5F,CAAE,YAAe,6BAA8B,QAAW,CAAC,CAAE,WAAc,SAC3E,CAAE,YAAe,MAAO,QAAW,CAAC,CAAE,WAAc,SACpD,CAAE,YAAe,WAAY,QAAW,CAAC,CAAE,WAAc,QACzD,CAAE,YAAe,WAAY,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aAC/E,CAAE,YAAe,WAAY,YAAe,gBAAiB,QAAW,CAAC,CAAE,MAAS,aACpF,CAAE,YAAe,OAAQ,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aAC3E,CAAE,YAAe,OAAQ,YAAe,kBAAmB,QAAW,CAAC,CAAE,MAAS,UAAW,OAAU,KACvG,CAAE,YAAe,gBAAiB,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aACpF,CAAE,YAAe,eAAgB,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aACnF,CAAE,YAAe,eAAgB,YAAe,kBAAmB,QAAW,CAAC,CAAE,MAAS,UAAW,OAAU,OAC/G,CAAE,YAAe,aAAc,YAAe,mBAAoB,QAAW,CAAC,CAAE,MAAS,aACzF,CAAE,YAAe,UAAW,QAAW,CAAC,CAAE,WAAc,SACxD,CAAE,YAAe,QAAS,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aAC5E,CAAE,YAAe,QAAS,YAAe,mBAAoB,QAAW,CAAC,CAAE,MAAS,aACpF,CAAE,YAAe,oBAAqB,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aACxF,CAAE,YAAe,8BAA+B,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,aAClG,CAAE,YAAe,4BAA6B,YAAe,WAAY,QAAW,CAAC,CAAE,MAAS,cA6GpF/H,cAAa8L,OAAAC,OAAA,GACN5C,EAAa,CAChBxI,cAAe,IACfC,eAAgB,MAClBvN,SAAA,CAGD8V,GAAgBuL,IACbtgB,EAAAA,EAAAA,KAACkO,GAAQ,CACLI,YAAa,CAACyG,EAAcuL,GAC5B7R,YAAY,QACZE,YAAa,EACbqV,gBAAiB,CAAC,GAAI,IACtBC,UAAU,KAKlBjkB,EAAAA,EAAAA,KAAC+N,GAAM,CAACK,WAAY2G,EAAa9V,UAC7Be,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,8BAA6B1I,UACzCe,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CAACC,OAAQC,EAAQ,MAA0BnI,MAAO,CAAEzC,MAAO,GAAIC,OAAQ,GAAI4N,aAAc,KAAMC,YAAa,EAAGC,YAAa,iBAKzI4J,IACGtgB,EAAAA,EAAAA,KAAC+N,GAAM,CAACK,WAAYkS,EAAiBrhB,UACjC2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,8BAA6B1I,SAAA,CACxC6V,EAASoP,sBACNlkB,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CACFC,OAAQ,CAAES,IAAKe,EAASoP,sBACxB9Y,MAAO,CACHzC,MAAO,GACPC,OAAQ,GACR4N,aAAc,KACdC,YAAa,EACbC,YAAa4K,GAAsB,UAAY,cAIvDthB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,2EAA0E2Z,GAAsB,cAAgB,cAAeriB,UAC5Ie,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,YAAY8B,MAAM,QAAQ8C,KAAM,QAIvDxL,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,wEAAuE2Z,GAAsB,eAAiB,qBAM1IvQ,EAAQhJ,IAAK+L,IACV9T,EAAAA,EAAAA,KAAC+N,GAAM,CAEHK,WAAY,CAAE/B,SAAUyH,EAAGzH,SAAUC,UAAWwH,EAAGxH,WACnDrE,QAASA,IAAMiJ,EAAc4C,GAAI7U,UAEjCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,kFAAkFyD,MAAO,CAAEzC,MAAO,GAAIC,OAAQ,IAAK3J,UAC/He,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CACFC,OAAQ,CAAES,IAAKD,EAAGE,MAClBrM,UAAU,6BACV6L,WAAW,aARd,MAAMM,EAAGvT,WAiBxB+gB,KACEthB,EAAAA,EAAAA,KAACmL,EAAAA,QAAStD,KAAI,CACV2V,SAAUsG,EAAAA,OACVnc,UAAU,0DAAyD1I,UAEnEe,EAAAA,EAAAA,KAAC0H,EAAAA,aAAY,CAACyc,MAAO,CAAC,OAAOllB,UACzB2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,uCAAsC1I,SAAA,EAClDe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,UAAU4E,KAAM,GAAI9C,MAAM,WACzC1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oCAAmC1I,SAAC,6DASpEe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,YAAa2Z,GAAiC,SAAX,gCAA2CJ,EAAoB,cAAgB,qCAAqCjiB,UACpK2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kDAAiD1I,SAAA,EAC7De,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAASA,IAAMd,EAAWe,SAC1BP,UAAU,OAAM1I,UAEhBe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,eAAe4E,KAAM,GAAI9C,MAAM,aAGlDd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,2BAA0B1I,SAAA,EACtCe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAWuZ,EAAoB,kEAAoE,+DAA+DjiB,SACnKiiB,EAAoB,gBAAkB,4BAE3ClhB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qCAAoC1I,SAC/CiiB,EACK,mBACCV,EAAgB,eAAeA,SAAuB,gCAO7ExgB,EAAAA,EAAAA,KAACmL,EAAAA,QAAStD,KAAI,CACVuD,MAAO,CACH,CAAEC,SAAU,WAAYkE,IAAK,EAAGE,MAAO,GAAInE,OAAQ,IACnDyW,IACF9iB,UAEF2I,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbC,QAASA,IAAMoZ,GAAqB,GACpC1Z,UAAU,kEACVyD,MAAO,CAAEmJ,UAAW,GAAItV,SAAA,EAExBe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,mBAAmB4E,KAAM,GAAI9C,MAAM,aAClD1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,yCAAwC1I,SAAC,iBAIjEe,EAAAA,EAAAA,KAACiL,EAAAA,gBAAe,CAACC,QAASA,GAAQjM,UAC9B2I,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CAACuD,MAAO,CAAC,CAAEC,SAAU,WAAYmE,KAAM,EAAGC,MAAO,EAAGI,gBAAiB,QAASoE,oBAAqB,GAAIC,qBAAsB,GAAIK,UAAW,GAAIC,WAAY,GAAI4E,aAAc,GAAKpG,IAAmB/T,SAAA,EAEhNe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,0DAGhB3H,EAAAA,EAAAA,KAAC8Z,EAAAA,WAAU,CAAA7a,UACP2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,oBAAmB1I,SAAA,EAE/B2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,mCAAkC1I,SAAA,EAC9Ce,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,8EAA6E1I,SACxF6V,EAASoP,sBAAuBlkB,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CAACC,OAAQ,CAAES,IAAKe,EAASoP,sBAAwBvc,UAAU,mBAAqB3H,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,wDAAuD1I,UAACe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oBAAmB1I,SAAE6V,EAASJ,WAAW,UAE5P9M,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,SAAQ1I,SAAA,EACpB2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAAA,CAAE6V,EAASJ,WAAW,IAAEI,EAASH,cAClF3U,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAC,0BAE5Ce,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CAACC,QAxYvBmc,KACnBtP,GAAUuP,aACVtG,GAAAA,QAAQC,QAAQ,OAAOlJ,EAASuP,gBAEhC/b,MAAM,+BAoYiEX,UAAU,qFAAoF1I,UAACe,EAAAA,EAAAA,KAACskB,GAAAA,QAAO,CAAC1d,KAAK,aAAa4E,KAAM,GAAI9C,MAAM,gBAG7Ld,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kCAAiC1I,SAAA,EAC7Ce,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iDAAgD1I,SAAC,oBACjEe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAAEmY,GAAY9B,SAAW,uBACxE8B,GAAYH,aAAeG,GAAYhC,gBACrCpV,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,4CAA2C1I,SACtDmY,EAAWH,aAAeG,EAAWhC,mBAMlDxN,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbC,QAASA,IAAMoZ,GAAqB,GACpC1Z,UAAU,wDAAuD1I,SAAA,EAEjEe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,sEAAqE1I,UACjFe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,UAAU4E,KAAM,GAAI9C,MAAM,aAE7Cd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,SAAQ1I,SAAA,EACpBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oCAAmC1I,SAAC,sBACpDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAC,yBAE5Ce,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,kBAAkB4E,KAAM,GAAI9C,MAAM,gBAIrDd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,SAAQ1I,SAAA,EAEpBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,sEAAqE1I,SAAC,yBACtFe,EAAAA,EAAAA,KAAC+Z,GAAAA,QAAQ,CACLhc,KA3ZZ,CACpB,CACIwC,GAAI,IACJ0E,KAAM,QACNoJ,MAAO,eACPwH,SAAU,2BACVE,YAAa,kDACbN,QAAS,UACTE,YAAa,UACbC,MAAO,0DACPI,QAAS,eACTN,MAAO,iBAEX,CACInV,GAAI,IACJ0E,KAAM,QACNoJ,MAAO,sBACPwH,SAAU,yBACVE,YAAa,qCACbN,QAAS,UACTE,YAAa,UACbC,MAAO,0DACPI,QAAS,gBACTN,MAAO,iBAEX,CACInV,GAAI,IACJ0E,KAAM,QACNoJ,MAAO,qBACPwH,SAAU,sBACVE,YAAa,+CACbN,QAAS,UACTE,YAAa,UACbC,MAAO,0DACPI,QAAS,WACTN,MAAO,kBAEX,CACInV,GAAI,IACJ0E,KAAM,QACNoJ,MAAO,mBACPwH,SAAU,uBACVE,YAAa,sCACbN,QAAS,UACTE,YAAa,UACbC,MAAO,0DACPI,QAAS,cACTN,MAAO,YAEX,CACInV,GAAI,IACJ0E,KAAM,QACNoJ,MAAO,gBACPwH,SAAU,kBACVE,YAAa,mDACbN,QAAS,UACTE,YAAa,UACbC,MAAO,0DACPI,QAAS,WACTN,MAAO,SAiWqBsE,WAAYA,EAAG7E,WAAWnV,EAAAA,EAAAA,KAACwV,GAAW,CAACL,KAAMA,IAC7C8E,eAAe,EACfC,aAAe/E,GAASA,EAAK5U,SAIrCP,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CAACC,QAASA,IAAMd,EAAWR,SAAS,eAAgB,CAAEY,cAAcI,UAAU,oGAAmG1I,UAACe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,yBAAwB1I,SAAC,mCAUhQe,EAAAA,EAAAA,KAAC+c,GAAa,CACVC,QAASoE,EACTnE,QAASA,IAAMoE,GAAqB,GACpCnE,aAAcpI,EAAW,GAAGA,EAASJ,cAAcI,EAASH,YAAc,gBAC1EI,aAAcA,QCr1Bf,SAASwP,MACDnd,EAAAA,EAAAA,iBAAnB,MACMC,GAAQC,EAAAA,EAAAA,aACR,WAAE8P,EAAU,aAAErC,GAAiB1N,EAAMR,QAAU,CAAC,GAE/CxH,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChColB,EAAWC,IAAgBrlB,EAAAA,EAAAA,UAAS,KAE3CU,EAAAA,EAAAA,WAAU,KACFiV,GAAc1I,UACdqY,KAEL,CAAC3P,IAEJ,MAAM2P,EAAuBxnB,UACzB,IACI,MAAMqQ,EAAMwH,EAAa1I,SACnBmB,EAAMuH,EAAazI,UACnB9O,EAAM,oDAENmnB,EAAU,CACZrnB,OAAQ,OACRsH,QAAS,CACL,eAAgB,mBAChB,iBA1BE,qDA2BF,kBAAmB,sCAEvBggB,KAAM1hB,KAAKC,UAAU,CACjB0hB,QAAS,CAAC,cAAe,WAAY,eACrCC,SAAU,KACVjZ,OAAQ,KACRyC,YAAa,GAAGf,KAAOC,IACvBuX,MAAO,GACPC,OAAQ,EACRvX,KAAM,GACNwX,OAAO,KAITrnB,QAAiBsnB,MAAM1nB,EAAKmnB,GAC5BQ,QAAevnB,EAASwnB,OAY9B,IAAIC,EAAe,GACfF,EAAOpnB,MAAQmS,MAAMC,QAAQgV,EAAOpnB,QACpCsnB,EAAeF,EAAOpnB,MAI1B,MAMMunB,EANwBD,EAAatd,IAAIka,IAC3C,MAAMsD,EAkBlB,SAAmC1G,EAAMC,EAAMC,EAAMC,GACjD,IAAKD,IAASC,EAAM,OAAO,IAC3B,MAAMwG,EAAI,KACJvG,EAAOC,EAAQH,EAAOF,GACtBM,EAAOD,EAAQF,EAAOF,GACtBxM,EACFvO,KAAKqb,IAAIH,EAAO,GAAKlb,KAAKqb,IAAIH,EAAO,GACrClb,KAAKsb,IAAIH,EAAQL,IAAS9a,KAAKsb,IAAIH,EAAQH,IAC3Chb,KAAKqb,IAAID,EAAO,GAAKpb,KAAKqb,IAAID,EAAO,GACnCsG,EAAI,EAAI1hB,KAAKub,MAAMvb,KAAKwb,KAAKjN,GAAIvO,KAAKwb,KAAK,EAAIjN,IACrD,OAAOkT,EAAIC,CACf,CA7ByB7G,CAA0BrR,EAAKC,EAAKyU,EAAK5V,SAAU4V,EAAK3V,WACrE,OAAAoL,OAAAC,OAAA,GAAYsK,EAAK,CAACqB,SAAUiC,EAAKG,QAAQ,OAKxCC,OAAO1D,GAAQK,WAAWL,EAAKqB,WAAa,IAC5CjR,KAAK,CAACC,EAAGC,IAAM+P,WAAWhQ,EAAEgR,UAAYhB,WAAW/P,EAAE+Q,WAE1DmB,EAAaa,EAEjB,CAAE,MAAO7nB,GACLN,QAAQM,MAAM,mCAAoCA,EACtD,CAAC,QACG6B,GAAW,EACf,GAgBJ,SAAS4f,EAAQM,GACb,OAAOA,GAAOzb,KAAK0b,GAAK,IAC5B,CAuDA,OACI7X,EAAAA,EAAAA,MAACF,EAAAA,aAAY,CAACC,UAAU,0BAAyB1I,SAAA,EAC7C2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,8BAA6B1I,SAAA,EACzC2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,6BAA4B1I,SAAA,EACxCe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CAACC,QAASA,IAAMlB,EAAU,QAASY,UAAU,OAAM1I,UAChEe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,aAAa4E,KAAM,GAAI9C,MAAM,aAEhD1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oBAAmB1I,SAAC,yBAIxC2I,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CACV2V,SAAUoI,EAAAA,SAAS9hB,MAAM,KACzB6D,UAAU,sDAAqD1I,SAAA,EAE/De,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,8BAA6B1I,SAAC,2BAC9Ce,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,uBAAsB1I,SAAC,6FAK1CmY,IACGxP,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CACV2V,SAAUoI,EAAAA,SAAS9hB,MAAM,KACzB6D,UAAU,wBAAuB1I,SAAA,EAEjCe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iDAAgD1I,SAAC,mBACjE2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,0BAAyB1I,SAAA,CAAEmY,EAAWH,YAAY,MAAIG,EAAW9B,iBAK5FjW,GACGuI,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,qCAAoC1I,SAAA,EAChDe,EAAAA,EAAAA,KAACyI,EAAAA,QAAiB,CAAC+C,KAAK,QAAQ9C,MAAM,aACtC1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qBAAoB1I,SAAC,qCAGzCe,EAAAA,EAAAA,KAAC+Z,GAAAA,QAAQ,CACLhc,KAAMymB,EACNtK,aAAe/E,GAASA,EAAK0Q,UAAY1Q,EAAK2Q,aAAe/hB,KAAKgiB,SAASvlB,WAC3EwZ,WA9FGA,EAAG7E,OAAMzR,YACxB1D,EAAAA,EAAAA,KAACmL,EAAAA,QAAStD,KAAI,CACV2V,SAAUwI,EAAAA,WAAWliB,MAAc,IAARJ,GAAaga,YACxC/V,UAAU,OAAM1I,UAEhB2I,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbL,UAAU,oEACVM,QAASA,IAAMkN,EAAKkP,cAAgBtG,GAAAA,QAAQC,QAAQ,OAAO7I,EAAKkP,gBAAgBplB,SAAA,EAGhFe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,oFAAmF1I,SAC9FkW,EAAK8Q,gBAAgB,IAAIC,WACtBlmB,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CAACC,OAAQ,CAAES,IAAKoB,EAAK8Q,cAAc,GAAGC,WAAave,UAAU,gBAAgB6L,WAAW,WAE9FxT,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,YAAY4E,KAAM,GAAI9C,MAAM,eAInDd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,SAAQ1I,SAAA,EACpBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,yCAAwC1I,SAAEkW,EAAKvO,QAC/D5G,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,6BAA6BmO,cAAe,EAAE7W,SAAEkW,EAAKgR,cAAgBhR,EAAKiR,WAE1Fxe,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,6BAA4B1I,SAAA,CACvCkW,EAAKkR,SACFze,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,6BAA4B1I,SAAA,EACxCe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,OAAO4E,KAAM,GAAI9C,MAAM,aACtC1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,uCAAsC1I,SAAEkW,EAAKkR,UAC7Dze,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAA,CAAC,IAAEkW,EAAKmR,aAAa,UAI1EnR,EAAKmO,WACF1b,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,6BAA4B1I,SAAA,EACxCe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,mBAAmB4E,KAAM,GAAI9C,MAAM,aAClDd,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAA,CAAEkW,EAAKmO,SAAS,aAItEtjB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAW,sBAA8C,SAAzBwN,EAAKoR,gBAA6B,iBAAmB,gBAAiBtnB,SACvGkW,EAAKoR,kBAAoBpR,EAAKqR,eAAiBrR,EAAKqR,eAAiB,aAKlFxmB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,sBAAqB1I,UACjCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,iEAAgE1I,UAC5Ee,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,OAAO4E,KAAM,GAAI9C,MAAM,qBAiD1CyS,sBAAuB,CAAEC,QAAS,GAAIC,cAAe,KACrDoL,oBACI7e,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CACV2V,SAAUuG,EAAAA,OACVpc,UAAU,yCAAwC1I,SAAA,EAElDe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,sEAAqE1I,UACjFe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,SAAS4E,KAAM,GAAI9C,MAAM,eAE5C1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,uCAAsC1I,SAAC,+BACvDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iCAAgC1I,SAAC,2FAIjD2I,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbC,QAASA,IAAM8V,GAAAA,QAAQC,QAAQ,oEAC/BrW,UAAU,yFAAwF1I,SAAA,EAElGe,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CACFC,OAAQ,CAAES,IAAK,uHACfpM,UAAU,eACV6L,WAAW,aAEfxT,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oCAAmC1I,SAAC,oCAUpF,CChOA,MA0MA,GA1MkBynB,KACd,MAAMrf,GAAQC,EAAAA,EAAAA,YACRH,GAAaC,EAAAA,EAAAA,kBACb,UAAE5H,GAAcV,KAGhB,MAAEuB,EAAK,IAAEC,EAAG,GAAEC,EAAE,OAAEzC,GAAWuJ,EAAMR,QAAU,CAAC,GAE7C/F,EAAK6lB,IAAUvnB,EAAAA,EAAAA,UAAS,KACxBC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCwnB,EAAOC,IAAYznB,EAAAA,EAAAA,UAAS,KAC5B0nB,EAAWC,IAAgB3nB,EAAAA,EAAAA,WAAS,GACrC4nB,GAAc7kB,EAAAA,EAAAA,QAAO,OAC3BrC,EAAAA,EAAAA,WAAU,KAEN,MAAM8mB,EAAQ3iB,WAAW,KACrB+iB,EAAYjkB,SAASkkB,SACtB,KACH,MAAO,IAAMjhB,aAAa4gB,IAC3B,KAEH9mB,EAAAA,EAAAA,WAAU,KACN,IAAI0Y,EAMJ,OALIoO,EAAQ,EACRpO,EAAWzT,YAAY,IAAM8hB,EAAUK,GAASA,EAAO,GAAI,KAE3DH,GAAa,GAEV,IAAMjiB,cAAc0T,IAC5B,CAACoO,IA8DJ,OACI5mB,EAAAA,EAAAA,KAAC0H,EAAAA,aAAY,CAACC,UAAU,kBAAiB1I,UACrC2I,EAAAA,EAAAA,MAAC0U,GAAAA,QAAoB,CACjBC,SAA8C,SAC9C5U,UAAU,SAAQ1I,SAAA,EAGlB2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,qDAAoD1I,SAAA,EAChEe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CAACC,QAASA,IAAMd,EAAWe,SAAUP,UAAU,MAAK1I,UACjEe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,aAAa4E,KAAM,GAAI9C,MAAM,aAEhD1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,2DAA0D1I,SAAC,yBAK/E2I,EAAAA,EAAAA,MAACkS,GAAAA,QAAU,CAACqB,sBAAuB,CAAEqB,SAAU,GAAKC,0BAA0B,UAASxd,SAAA,EACnF2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,oBAAmB1I,SAAA,EAC/Be,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oDAAmD1I,SACnD,aAAXnB,EAAwB,2BAA6B,mBAE1DkC,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qDAAoD1I,SAAC,sBAIrE2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,sCAAqC1I,SAAA,CAAC,uCACb,MACrCe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,0BAAyB1I,SAAEoB,WAInDuH,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,iCAAgC1I,SAAA,EAG5C2I,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbuV,cAAe,EACftV,QAASA,IAAM+e,EAAYjkB,SAASkkB,QACpCtf,UAAU,qDAAoD1I,SAAA,CAG7DiR,MAAM,GAAGiX,OAAOpf,IAAI,CAACqf,EAAGC,KACrBrnB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAEDF,UAAW,4DAA2D7G,EAAIumB,GACpE,6BACA,4BACCpoB,UAEPe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAC5C6B,EAAIumB,MAPJA,KAabrnB,EAAAA,EAAAA,KAAC0c,GAAAA,QAAS,CACN5N,IAAKkY,EACL9mB,MAAOY,EACP8b,aAAerU,IACX,MAAM+e,EAAU/e,EAAK/D,QAAQ,UAAW,IACpC8iB,EAAQhmB,QAAU,GAClBqlB,EAAOW,IAGfC,UAAW,EACXzK,aAAa,aACb0K,aAAa,EACbC,eAAe,cACfrc,MAAO,CACHC,SAAU,WACV1C,MAAO,OACPC,OAAQ,OACR8e,QAAS,EACTC,SAAU,GAEdC,WAAW,QAKnB5nB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,QAAO1I,SAClB6nB,GACG9mB,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CAACC,QAjGzB/K,UACjBoC,GAAW,GACX,UAEUhD,EAAIiC,KAAK,qBAAsB,CAAE8B,UACvCwmB,EAAS,IACTE,GAAa,GACb1e,EAAAA,QAAMC,MAAM,UAAW,qCAC3B,CAAE,MAAO7K,GACL4K,EAAAA,QAAMC,MAAM,QAAS,yCACzB,CAAC,QACGhJ,GAAW,EACf,GAqFgEL,UACpCe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oCAAmC1I,SAAC,mBAGxD2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,0BAAyB1I,SAAA,CAAC,mBACvB2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,4BAA2B1I,SAAA,CAAE2nB,EAAM,aAM9E5mB,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QA1JH/K,UAEjB,GADAC,QAAQC,IAAI,kCAAmC,CAAE0D,MAAKT,WACjDS,GAAOA,EAAIQ,OAAS,EACrB+G,EAAAA,QAAMC,MAAM,cAAe,yCAD/B,CAKAhJ,GAAW,GACX,IAEInC,QAAQC,IAAI,8CAKZ,MAAMQ,QAAiBtB,EAAIiC,KAAK,qBAAsB,CAClDgC,GAAIA,EACJO,IAAKA,EACLR,IAAKA,IAETnD,QAAQC,IAAI,qCAAsCQ,EAASG,MAGnC,MAApBH,EAASE,QAAsC,MAApBF,EAASE,SAErB,aAAXA,GAEAX,QAAQC,IAAI,+CACZ+J,EAAW3C,QAAQ,cAAe,CAAEnE,QAAOE,cAErCf,IAIlB,CAAE,MAAO/B,GACLN,QAAQM,MAAM,gCAAiCA,GAC/C,MAAMoqB,EAAWpqB,EAAMG,UAAUG,MAAMN,OAAS,uBAChD4K,EAAAA,QAAMC,MAAM,QAASuf,GACrBlB,EAAO,IACPK,EAAYjkB,SAASkkB,OACzB,CAAC,QACG3nB,GAAW,EACf,CArCA,GAsJoB6I,SAAU9I,EACVsI,UAAW,kDAAiDtI,EAAU,cAAgB,eAAgBJ,UAEtGe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,6CAA4C1I,SACvDI,EAAU,eAAiB,yBC6I5D,GA1U0ByoB,MACH1gB,EAAAA,EAAAA,iBAAnB,MACMC,GAAQC,EAAAA,EAAAA,aACR,UAAE9H,GAAcV,KAGhB,OAAEhB,EAAS,SAAQ,MAAEuC,EAAK,GAAEE,GAAO8G,EAAMR,QAAU,CAAC,GAEnDkhB,EAAMC,IAAW5oB,EAAAA,EAAAA,UAAS,IAC1BC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCqY,EAAUwQ,IAAe7oB,EAAAA,EAAAA,UAAS,CACrC8oB,UAAW,GACXC,SAAU,GACVC,MAAO,MAEJC,EAAQC,IAAalpB,EAAAA,EAAAA,UAAS,CAAC,GAchCmpB,EAAsBA,KACxB,IAAIC,EAAY,CAAC,EASjB,OARa,IAATT,GACKtQ,EAASyQ,YAAWM,EAAUN,UAAY,0BAC1CzQ,EAAS0Q,WAAUK,EAAUL,SAAW,0BAC7B,IAATJ,IACFtQ,EAAS2Q,QAAOI,EAAUJ,MAAQ,4BACnC3Q,EAAS2Q,MAAM9mB,OAAS,KAAIknB,EAAUJ,MAAQ,+BAEtDE,EAAUE,GAC+B,IAAlC9Q,OAAO+Q,KAAKD,GAAWlnB,QAG5BonB,EAAexrB,UACjBoC,GAAW,GACXgpB,EAAU,CAAC,GAEX,MAAMvnB,EAAU,CACZR,GAAIA,EACJmU,WAAuB,WAAX5W,EAAsB,KAAO2Z,EAASyQ,UAClDvT,UAAsB,WAAX7W,EAAsB,KAAO2Z,EAAS0Q,SAEjDQ,cAAelR,EAAS2Q,MAAMQ,WAAW,OAASnR,EAAS2Q,MAAQ,MAAM3Q,EAAS2Q,QAClF3T,YAAa,MAGjB,IACItX,QAAQC,IAAI,6BAA8B2D,GAC1C,MAAMrB,QAAYpD,EAAIiC,KAAK,yBAA0BwC,GACrD5D,QAAQC,IAAI,sBAAuBsC,EAAI3B,MAGvCiqB,EAASa,GAAMA,EAAI,GAGnB5kB,WAAW/G,gBACDsC,KACP,IAEP,CAAE,MAAOI,GACLzC,QAAQM,MAAM,eAAgBmC,GAC1BA,EAAIhC,WACJT,QAAQC,IAAI,mBAAoB8F,KAAKC,UAAUvD,EAAIhC,SAASG,KAAM,KAAM,IACxEZ,QAAQC,IAAI,qBAAsBwC,EAAIhC,SAASE,SAEnD,MAAM2C,EAAMb,EAAIhC,UAAUG,MAAM6C,QAAU,qCAC1CyH,EAAAA,QAAMC,MAAM,QAAS7H,EACzB,CAAC,QACGnB,GAAW,EACf,GAwMJ,OACIU,EAAAA,EAAAA,KAAC0H,EAAAA,aAAY,CAACC,UAAU,kBAAiB1I,UACrC2I,EAAAA,EAAAA,MAAC0U,GAAAA,QAAoB,CAACC,SAA8C,SAAU5U,UAAU,SAAQ1I,SAAA,EAE5Fe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,4BAA2B1I,SACtC8oB,EAAO,GAAKA,EAAO,GAAgB,WAAXjqB,GACrBkC,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CAACC,QApQrB6gB,KACbd,EAAQD,EAAO,IAmQsCpgB,UAAU,8BAA6B1I,UACxEe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,aAAa4E,KAAM,GAAI9C,MAAM,aAGhD1I,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,YAIxBC,EAAAA,EAAAA,MAACkS,GAAAA,QAAU,CAACqB,sBAAuB,CAAEqB,SAAU,EAAGuM,kBAAmB,GAAI1N,cAAe,IAAKpc,SAAA,CAG7E,WAAXnB,GAAuBiqB,GAAQ,IAAK/nB,EAAAA,EAAAA,KArNjCgpB,EAAGC,kBAGfjpB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,aAAY1I,UACxB2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,iDAAgD1I,SAAA,EAE5De,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,oEALd,CAAC,WAAY,UAAW,UAOnBI,IAAI,CAACmhB,EAAWxlB,KACnB,MACMylB,EAAWF,GADDvlB,EAAQ,EAExB,OACIkE,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAaF,UAAU,yBAAwB1I,SAAA,EAChDe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CACDF,UAAW,8DAA6DwhB,EAC9D,8BACA,4BACHlqB,SAENkqB,GACGnpB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,kCAChB,QAER3H,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAW,wDAAuDwhB,EAAW,gBAAkB,iBAC9FlqB,SACFiqB,MAbExlB,UAyM8B,CAACulB,YAAalB,KAG/D/nB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,wBAAuB1I,SApLjCmqB,MAClB,GAAa,IAATrB,EACA,OACIngB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,oCAAmC1I,SAAA,EAC/Ce,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,sEAAqE1I,UACjFe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,kBAAkB4E,KAAM,GAAI9C,MAAM,eAErD1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wCAAuC1I,SAAC,cACxDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iCAAgC1I,SAAC,gFACjDe,EAAAA,EAAAA,KAACyI,EAAAA,QAAiB,CAAC+C,KAAK,QAAQ9C,MAAM,UAAUf,UAAU,YAMtE,GAAe,WAAX7J,EACA,OACI8J,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,iBAAgB1I,SAAA,EAC5B2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,oBAAmB1I,SAAA,EAC/Be,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,qEAAoE1I,UAChFe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,yBAAyB4E,KAAM,GAAI9C,MAAM,eAE5D1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+CAA8C1I,SAAC,oBAC/De,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iCAAgC1I,SAAC,yEAGrD2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qEAAoE1I,SAAC,kBACrF2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,+HAA8H1I,SAAA,EAC1Ie,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,oFAAmF1I,UAC/Fe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,0BAAyB1I,SAAC,WAE9Ce,EAAAA,EAAAA,KAAC0c,GAAAA,QAAS,CACNxc,MAAOuX,EAAS2Q,MAChBxL,aAAerU,IACX,MAAM+e,EAAU/e,EAAK/D,QAAQ,UAAW,IACpC8iB,EAAQhmB,QAAU,IAAI2mB,EAAWvQ,OAAAC,OAAC,CAAC,EAAIF,EAAS,CAAC2Q,MAAOd,MAEhE3K,YAAY,cACZ0M,qBAAqB,UACrBvM,aAAa,aACbyK,UAAW,GACX5f,UAAU,4DAGjB0gB,EAAOD,QAASpoB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iCAAgC1I,SAAEopB,EAAOD,YAG9EpoB,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAASygB,EACTvgB,SAAU9I,EACVsI,UAAU,sHAAqH1I,SAE9HI,GAAUW,EAAAA,EAAAA,KAACyI,EAAAA,QAAiB,CAACC,MAAM,UAAY1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,wBAO/G,OAAQ8oB,GACJ,KAAK,EACD,OACIngB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,YAAW1I,SAAA,EACvB2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,oBAAmB1I,SAAA,EAC/Be,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,mCAAkC1I,SAAC,sBACnDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,gBAAe1I,SAAC,qCAGpC2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qEAAoE1I,SAAC,gBACrFe,EAAAA,EAAAA,KAAC0c,GAAAA,QAAS,CACNxc,MAAOuX,EAASyQ,UAChBtL,aAAerU,GAAS0f,EAAWvQ,OAAAC,OAAC,CAAC,EAAIF,EAAS,CAACyQ,UAAW3f,KAC9DZ,UAAU,oIACVgV,YAAY,aACZ0M,qBAAqB,YAExBhB,EAAOH,YAAaloB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iCAAgC1I,SAAEopB,EAAOH,gBAElFtgB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qEAAoE1I,SAAC,eACrFe,EAAAA,EAAAA,KAAC0c,GAAAA,QAAS,CACNxc,MAAOuX,EAAS0Q,SAChBvL,aAAerU,GAAS0f,EAAWvQ,OAAAC,OAAC,CAAC,EAAIF,EAAS,CAAC0Q,SAAU5f,KAC7DZ,UAAU,oIACVgV,YAAY,cACZ0M,qBAAqB,YAExBhB,EAAOF,WAAYnoB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iCAAgC1I,SAAEopB,EAAOF,iBAI7F,KAAK,EACD,OACIvgB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,YAAW1I,SAAA,EACvB2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,oBAAmB1I,SAAA,EAC/Be,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,mCAAkC1I,SAAC,aACnDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,gBAAe1I,SAAC,iDAGpC2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qEAAoE1I,SAAC,kBACrF2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,+HAA8H1I,SAAA,EAC1Ie,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,oFAAmF1I,UAC/Fe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,0BAAyB1I,SAAC,WAE9Ce,EAAAA,EAAAA,KAAC0c,GAAAA,QAAS,CACNxc,MAAOuX,EAAS2Q,MAChBxL,aAAerU,IACX,MAAM+e,EAAU/e,EAAK/D,QAAQ,UAAW,IACpC8iB,EAAQhmB,QAAU,IAAI2mB,EAAWvQ,OAAAC,OAAC,CAAC,EAAIF,EAAS,CAAC2Q,MAAOd,MAEhE3K,YAAY,cACZ0M,qBAAqB,UACrBvM,aAAa,aACbyK,UAAW,GACX5f,UAAU,4DAGjB0gB,EAAOD,QAASpoB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iCAAgC1I,SAAEopB,EAAOD,cAI1F,KAAK,EACD,OACIxgB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACD2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,oBAAmB1I,SAAA,EAC/Be,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,mCAAkC1I,SAAC,aACnDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,gBAAe1I,SAAC,mCAGpC2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,sEAAqE1I,SAAA,EACjF2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,wBAAuB1I,SAAA,EACnCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,4FAA2F1I,UACvGe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,SAAS4E,KAAM,GAAI9C,MAAM,eAE5Cd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,gEAA+D1I,SAAC,eAChF2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAAA,CAAEwY,EAASyQ,UAAU,IAAEzQ,EAAS0Q,mBAIzFvgB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,wBAAuB1I,SAAA,EACnCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,8FAA6F1I,UACzGe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,OAAO4E,KAAM,GAAI9C,MAAM,eAE1Cd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,gEAA+D1I,SAAC,WAChF2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAAA,CAAC,OAAKwY,EAAS2Q,qBAMxF,QACI,OAAO,OAyBEgB,KAIJrB,EAAO,GAAgB,WAAXjqB,IACTkC,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,QAAO1I,SAClB8oB,EAAO,GACJ/nB,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAjSfqhB,KACTf,KACAP,EAAQD,EAAO,IAgSSpgB,UAAU,iHAAgH1I,UAE1He,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,gBAGnDe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAASygB,EACTvgB,SAAU9I,EACVsI,UAAU,iHAAgH1I,SAEzHI,GAAUW,EAAAA,EAAAA,KAACyI,EAAAA,QAAiB,CAACC,MAAM,UAAY1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,gCCzFnI,GAtOsBsqB,EAAGpiB,iBACrB,MAAM,OAAElG,EAAQd,QAAS6W,EAAQ,UAAExX,GAAcV,KAE1C0qB,EAAYC,IAAiBrqB,EAAAA,EAAAA,UAAS,KAEtCgb,EAASC,IAAcjb,EAAAA,EAAAA,UAAS,KAChCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCkb,EAAYC,IAAiBnb,EAAAA,EAAAA,WAAS,IAK7CU,EAAAA,EAAAA,WAAU,KACN4pB,KACD,IAEH,MAAMA,EAAexsB,UACjBoC,GAAW,GACX,UAEUE,UAEAgb,GACV,CAAC,QACGlb,GAAW,GACXib,GAAc,EAClB,GAIEjD,EAAWN,GAAY,CAAC,EAExBwD,EAAetd,UACjB,IACI,MACMysB,SADYrtB,EAAIqD,IAAI,0BACL5B,MAAQ,GAI7B4rB,EAAStX,KAAK,CAACC,EAAGC,IAAM,IAAIpN,KAAKoN,EAAEC,YAAc,IAAIrN,KAAKmN,EAAEE,aAE5DiX,EAAcE,GAEdtP,EAAWsP,EAASlX,MAAM,EAjCX,IAkCnB,CAAE,MAAO7S,GACLzC,QAAQM,MAAM,uBAAwBmC,EAC1C,GAyBE6a,EAAcC,IAChB,IAAKA,EAAY,MAAO,GAExB,OADa,IAAIvV,KAAKuV,GACVnF,mBAAmB,QAAS,CACpCoF,IAAK,UAAWC,MAAO,QAASC,KAAM,UACtCC,KAAM,UAAWC,OAAQ,aAsDjC,GAAI1b,IAAYib,EACZ,OACIta,EAAAA,EAAAA,KAAC0H,EAAAA,aAAY,CAACC,UAAU,8CAA6C1I,UACjEe,EAAAA,EAAAA,KAACyI,EAAAA,QAAiB,CAAC+C,KAAK,QAAQ9C,MAAM,WAKlD,MAAMwf,EAAY5Q,EAAS5C,YAAc,OACnCyT,EAAW7Q,EAAS3C,WAAa,GACjCtU,EAAQiX,EAASjX,OAAS,WAC1B+nB,EAAQ9Q,EAASqR,eAAiB,WAClCiB,GAAY1B,EAAU,IAAMC,EAAS,IAAM,KAAK5qB,cAEtD,OACIqK,EAAAA,EAAAA,MAACF,EAAAA,aAAY,CAACC,UAAU,kBAAiB1I,SAAA,EAErC2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,mEAAkE1I,SAAA,EAC9Ee,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CAACC,QAASA,IAAMd,EAAWe,SAAUP,UAAU,2BAA0B1I,UACtFe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,aAAa4E,KAAM,GAAI9C,MAAM,aAEhD1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qDAAoD1I,SAAC,mBAKzEe,EAAAA,EAAAA,KAAC8Z,GAAAA,QAAU,CACPkB,gBAAgBhb,EAAAA,EAAAA,KAACib,GAAAA,QAAc,CAACX,WAAYA,EAAYY,UApGlDA,KACdX,GAAc,GACdmP,OAmGQvO,sBAAuB,CAAEE,cAAe,IACxCC,8BAA8B,EAAMrc,UAEpC2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,WAAU1I,SAAA,EAEtB2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,oBAAmB1I,SAAA,EAC/Be,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,qIAAoI1I,SAC/IqY,EAAS7C,aACNzU,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CAACC,OAAQ,CAAES,IAAKuD,EAAS7C,aAAe9M,UAAU,mBAExD3H,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,mCAAkC1I,SAAE2qB,OAG5DhiB,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,mCAAkC1I,SAAA,CAAEipB,EAAU,IAAEC,MAChEnoB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,4BAA2B1I,SAAEoB,KAC7CL,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,gEAA+D1I,UAC3Ee,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAAEmpB,UAK3DxgB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,sFAAqF1I,SAAA,EACjG2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,+CAA8C1I,SAAA,EAC1De,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,gCAA+B1I,SAAEuqB,EAAW7D,OAAOkE,GAAkB,cAAbA,EAAE/rB,QAAwBwD,UAClGtB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,sDAAqD1I,SAAC,iBAE1E2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,sBAAqB1I,SAAA,EACjCe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,gCAA+B1I,SAAEuqB,EAAWloB,UAC5DtB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,sDAAqD1I,SAAC,iBAK9E2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,OAAM1I,SAAA,EAClBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,uCAAsC1I,SAAC,oBACtDmb,EAAQ9Y,OAAS,GACdsG,EAAAA,EAAAA,MAAAkiB,EAAAA,SAAA,CAAA7qB,SAAA,CACKmb,EAAQrS,IAnHVoN,IACvB,MAAMoG,EAnBczd,KACpB,OAAQA,GACJ,IAAK,YAAa,MAAO,+CACzB,IAAK,YAAa,MAAO,yCACzB,IAAK,UAAW,MAAO,4CACvB,QAAS,MAAO,8CAcA0d,CAAerG,EAAKrX,QACpBqX,EAAKrX,OAEzB,OACI8J,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAeF,UAAU,iEAAgE1I,SAAA,EAC1F2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,4CAA2C1I,SAAA,EACvD2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kCAAiC1I,SAAA,EAC7Ce,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,qBAAoC,cAAhBwN,EAAKrX,OAAyB,cAAgB,aAAcmB,SACtE,QAAtBkW,EAAKC,cACFpV,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,YAAY4E,KAAM,GAAI9C,MAAuB,cAAhByM,EAAKrX,OAAyB,UAAY,aAEtFkC,EAAAA,EAAAA,KAACqV,EAAAA,QAAsB,CAACzO,KAAK,YAAY4E,KAAM,GAAI9C,MAAuB,cAAhByM,EAAKrX,OAAyB,UAAY,eAG5G8J,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oCAAmC1I,SAAEkW,EAAKG,WAC1DtV,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAEwb,EAAWtF,EAAK3C,qBAGjExS,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,+BAA+B4T,EAAYE,MAAM,KAAK,MAAMF,EAAYE,MAAM,KAAK,KAAKxc,UACrGe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAW,qBAAqB4T,EAAYE,MAAM,KAAK,KAAKxc,SAAEkW,EAAKrX,eAIjF8J,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,iBAAgB1I,SAAA,EAC5B2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,uBAAsB1I,SAAA,EAClCe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,iBAAiB4E,KAAM,GAAI9C,MAAM,UAAU0C,MAAO,CAAEsQ,UAAW,EAAGjQ,YAAa,MAC9FzL,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA+BmO,cAAe,EAAE7W,SAC3DkW,EAAKrD,cAIbqD,EAAKwG,QACF/T,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,6BAA4B1I,SAAA,EACxC2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAAA,CAAC,SAAEkW,EAAKwG,UACzD3b,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,6BAA4B1I,SAAC,aAIpC,cAAhBkW,EAAKrX,QAA0BqX,EAAK/M,sBACjCR,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,mCAAkC1I,SAAA,CAAC,WACtCkW,EAAK/M,4BArCnB+M,EAAK5U,MAiHK6Z,EAAQ9Y,OAASkoB,EAAWloB,SACzBtB,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAvJZ8hB,KACpB,MAAMC,EAAgB5P,EAAQ9Y,OACxB2oB,EAAYT,EAAW/W,MAAMuX,EAAeA,EAzC/B,IA0CfC,EAAU3oB,OAAS,GACnB+Y,EAAW6M,GAAQ,IAAIA,KAAS+C,KAoJJtiB,UAAU,mEAAkE1I,UAE5Ee,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAAC,oBAK9D2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kFAAiF1I,SAAA,EAC7Fe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,wBAAwB4E,KAAM,GAAI9C,MAAM,aACvD1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qBAAoB1I,SAAC,oCAMjDe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,0CAAyC1I,UACrDe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAAShH,EACT0G,UAAU,iEAAgE1I,UAE1Ee,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iCAAgC1I,SAAC,wB,0BC3M7E,MAAQ0J,MAAK,GAAEC,OAAO,IAAIC,EAAAA,QAAWlJ,IAAI,UAGnCuqB,GAAgB,CAClB,CAAE3pB,GAAI,OAAQqG,KAAM,iBAAkBujB,KAAM,YAAaC,QAAS/U,EAAAA,SAClE,CAAE9U,GAAI,MAAOqG,KAAM,cAAeujB,KAAM,WAAYC,QAAS/U,EAAAA,SAC7D,CAAE9U,GAAI,QAASqG,KAAM,cAAeujB,KAAM,QAASC,QAAS/U,EAAAA,UAG1DgV,GAAW,CACbC,KAAM,CACF,CAAE1jB,KAAM,kBAAmBujB,KAAM,UACjC,CAAEvjB,KAAM,cAAeujB,KAAM,OAC7B,CAAEvjB,KAAM,eAAgBujB,KAAM,QAC9B,CAAEvjB,KAAM,mBAAoBujB,KAAM,SAClC,CAAEvjB,KAAM,gBAAiBujB,KAAM,SAC/B,CAAEvjB,KAAM,YAAaujB,KAAM,OAC3B,CAAEvjB,KAAM,kBAAmBujB,KAAM,UACjC,CAAEvjB,KAAM,QAASujB,KAAM,gBAE3BI,IAAK,CACD,CAAE3jB,KAAM,kBAAmBujB,KAAM,UACjC,CAAEvjB,KAAM,cAAeujB,KAAM,OAC7B,CAAEvjB,KAAM,oBAAqBujB,KAAM,oBACnC,CAAEvjB,KAAM,mBAAoBujB,KAAM,YAClC,CAAEvjB,KAAM,gBAAiBujB,KAAM,SAC/B,CAAEvjB,KAAM,cAAeujB,KAAM,OAC7B,CAAEvjB,KAAM,kBAAmBujB,KAAM,eACjC,CAAEvjB,KAAM,QAASujB,KAAM,gBAE3BK,MAAO,CACH,CAAE5jB,KAAM,kBAAmBujB,KAAM,UACjC,CAAEvjB,KAAM,cAAeujB,KAAM,OAC7B,CAAEvjB,KAAM,oBAAqBujB,KAAM,oBACnC,CAAEvjB,KAAM,mBAAoBujB,KAAM,YAClC,CAAEvjB,KAAM,gBAAiBujB,KAAM,SAC/B,CAAEvjB,KAAM,eAAgBujB,KAAM,OAC9B,CAAEvjB,KAAM,QAASujB,KAAM,iBAIzBxL,GAAmB,0BACV,SAAS8L,KACpB,MAAMtjB,GAAaC,EAAAA,EAAAA,kBACZ2gB,EAAMC,IAAW5oB,EAAAA,EAAAA,UAAS,IAC1BC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCsrB,EAAcC,IAAmBvrB,EAAAA,EAAAA,WAAS,IAC1CwrB,EAAaC,IAAkBzrB,EAAAA,EAAAA,WAAS,IACxC0rB,EAAcC,IAAmB3rB,EAAAA,EAAAA,UAAS,MAE3C4M,GAAS7J,EAAAA,EAAAA,QAAO,OACfsV,EAAUwQ,IAAe7oB,EAAAA,EAAAA,UAAS,CACrC6X,YAAa,GACbnF,SAAU,wBACVzF,SAAU,QACVC,UAAW,QACXgJ,QAAS,GACT0V,gBAAiB,MAIdja,EAASC,IAAc5R,EAAAA,EAAAA,UAAS,KAChC6R,EAAYC,IAAiB9R,EAAAA,EAAAA,UAAS,OAE7CU,EAAAA,EAAAA,WAAU,KACU5C,WACZ,MAAMiU,QAAYlB,KAClBe,EAAWG,IAEfC,IACD,IAEH,MAAO6Z,EAAWC,IAAgB9rB,EAAAA,EAAAA,UAAS,CACvCiN,SAAU,QACVC,UAAW,QACXC,cAAe,KACfC,eAAgB,QAIpB1M,EAAAA,EAAAA,WAAU,KACN,WACI,IACI,MAAMoS,QAAcxT,EAAAA,aAAyBigB,IACzCzM,IACA+V,EAAY/kB,KAAKsC,MAAM0M,IACvB/U,QAAQC,IAAI,yCAEpB,CAAE,MAAOuI,GACLxI,QAAQc,KAAK,wBAAyB0H,EAC1C,CACH,EAVD,IAWD,KAGH7F,EAAAA,EAAAA,WAAU,KACN,MAAMqrB,EAAclnB,WAAW,KAC3BvF,EAAAA,aAAyBigB,GAAkBzb,KAAKC,UAAUsU,KAC3D,KACH,MAAO,IAAMzR,aAAamlB,IAC3B,CAAC1T,IAEJ,MAoDM2T,EAAaA,IACF,IAATrD,IAAqBtQ,EAASR,YACrB,IAAT8Q,IACS,IAATA,IAAqBtQ,EAASnC,QACrB,IAATyS,GACS,IAATA,IAKRjoB,EAAAA,EAAAA,WAAU,KACO,IAATioB,GACAsD,KAEL,CAACtD,IAEJ,MAAMuD,EAAuBpuB,MAAOmP,EAAUC,KAC1C,IACI,MAAMif,QAAwB3Z,EAAS4Z,oBAAoB,CAAEnf,WAAUC,cACvE,GAAIif,GAAmBA,EAAgBjqB,OAAS,EAAG,CAC/C,MAAMmqB,EAAOF,EAAgB,GAC7B,MAAO,CACHE,EAAK7kB,KACL6kB,EAAKC,OACLD,EAAKE,UACLF,EAAKG,KACLH,EAAKI,YACPlG,OAAOmG,SAASC,KAAK,KAC3B,CACJ,CAAE,MAAOtuB,GACLN,QAAQc,KAAK,2BAA4BR,EAC7C,CACA,MAAO,QAAQ4O,EAASqZ,QAAQ,YAAYpZ,EAAUoZ,QAAQ,MAG5D2F,EAAwBnuB,UAC1B+qB,EAAYf,GAAIxP,OAAAC,OAAA,GAAUuP,EAAK,CAACpV,SAAU,kCAC1C,IACI,IAAI,OAAEhU,SAAiB8T,EAASC,oCAChC,GAAe,YAAX/T,EAEA,YADAwK,MAAM,qBAIV,IAAIwJ,QAAiBF,EAASG,wBAAwB,CAClDia,SAAUpa,GAAAA,iBAAkBqa,WAEhC,MAAM,SAAE5f,EAAQ,UAAEC,GAAcwF,EAASG,OACnCmU,QAAgBkF,EAAqBjf,EAAUC,GAE/C4f,EAAY,CACd7f,WACAC,YACAC,cAAe,KACfC,eAAgB,MAGpByb,EAAYf,GAAIxP,OAAAC,OAAA,GAAUuP,EAAK,CAAC7a,WAAUC,YAAWwF,SAAUsU,KAC/D8E,EAAagB,GAETlgB,EAAOjJ,SACPiJ,EAAOjJ,QAAQ8W,gBAAgBqS,EAAW,IAElD,CAAE,MAAOzuB,GACLN,QAAQM,MAAMA,GACdwqB,EAAYf,GAAIxP,OAAAC,OAAA,GAAUuP,EAAK,CAACpV,SAAU,yBAC9C,GAqRJ,OACIlK,EAAAA,EAAAA,MAACF,EAAAA,aAAY,CAACC,UAAU,kBAAiB1I,SAAA,EACrCe,EAAAA,EAAAA,KAACmT,EAAAA,QAAS,CAACC,SAAS,iBACnBwX,IAxCLhjB,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CACV2V,SAAUsG,EAAAA,OACVnc,UAAU,wFAAuF1I,SAAA,EAEjGe,EAAAA,EAAAA,KAACmL,EAAAA,QAAStD,KAAI,CACV2V,SAAUuG,EAAAA,OAAOjgB,MAAM,KACvB6D,UAAU,kGAAiG1I,UAE3Ge,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,YAAY4E,KAAM,GAAI9C,MAAM,aAG/C1I,EAAAA,EAAAA,KAACmL,EAAAA,QAASrD,KAAI,CACV0V,SAAUsG,EAAAA,OAAOhgB,MAAM,KACvB6D,UAAU,8EAA6E1I,SAC1F,uBAIDe,EAAAA,EAAAA,KAACmL,EAAAA,QAASrD,KAAI,CACV0V,SAAUsG,EAAAA,OAAOhgB,MAAM,KACvB6D,UAAU,uDAAsD1I,SACnE,qCAID2I,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CACV2V,SAAUsG,EAAAA,OAAOhgB,MAAM,KACvB6D,UAAU,wEAAuE1I,SAAA,EAEjFe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,iDAAgD1I,SAAC,sBACjEe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wDAAuD1I,SAClEwY,EAAS3F,kBAYlB9R,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,mDAAkD1I,UAC9D2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,wBAAuB1I,SAAA,EACnCe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAASA,IAAM8f,EAAO,OA7YlCA,EAAO,GAAGC,EAAQD,EAAO,IA6Y4B5gB,EAAWe,SACpDP,UAAU,mCAAkC1I,UAE5Ce,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,aAAa4E,KAAM,GAAI9C,MAAM,eAGhDd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,+BAA8B1I,SAAA,EAC1C2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,oEAAmE1I,SAAA,EAC/Ee,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,mDAAkDogB,GAAQ,EAAI,UAAY,UAC3F/nB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,mDAAkDogB,GAAQ,EAAI,UAAY,UAC3F/nB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,mDAAkDogB,GAAQ,EAAI,UAAY,UAC3F/nB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,mDAAkDogB,GAAQ,EAAI,UAAY,UAC3F/nB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAW,mDAAkDogB,GAAQ,EAAI,UAAY,aAE/FngB,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAAA,CAAC,QAAM8oB,EAAK,iBAKzEngB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,uBAAsB1I,SAAA,CACxB,IAAT8oB,IA5STngB,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CAAC2V,SAAU2O,EAAAA,aAAcC,QAASC,EAAAA,aAAc1kB,UAAU,mBAAkB1I,SAAA,EACtFe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wCAAuC1I,SAAC,oBACxDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qBAAoB1I,SAAC,4CAErCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,qCAAoC1I,SAC/CirB,GAAcniB,IAAKukB,IAChB,MAAMC,EAAa9U,EAASR,cAAgBqV,EAAE/rB,GAC9C,OACIqH,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CAEbC,QAASA,IAAMggB,EAAWvQ,OAAAC,OAAC,CAAC,EAAIF,EAAS,CAACR,YAAaqV,EAAE/rB,GAAI+U,QAAS,MACtE3N,UAAW,qFAAoF4kB,EAAa,6BAA+B,4BAA6BttB,SAAA,EAExKe,EAAAA,EAAAA,KAACssB,EAAElC,QAAO,CACNxjB,KAAM0lB,EAAEnC,KACR3e,KAAM,GACN9C,MAAO6jB,EAAa,UAAY,aAEpCvsB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAW,mBAAkB4kB,EAAa,gBAAkB,iBAAkBttB,SAC/EqtB,EAAE1lB,OAEN2lB,IACGvsB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,sDAAqD1I,UACjEe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,YAAY4E,KAAM,GAAI9C,MAAM,cAd9C4jB,EAAE/rB,WAoST,IAATwnB,IA1QTngB,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CAAC2V,SAAU2O,EAAAA,aAAcC,QAASC,EAAAA,aAAc1kB,UAAU,oBAAmB1I,SAAA,EACvF2I,EAAAA,EAAAA,MAAC6L,GAAO,CACJ3E,IAAK9C,EACL0H,SAAU5D,GACV1E,MAAO,CAAEiE,KAAM,GACfxD,OAAQof,EACRuB,uBAAwBtvB,UAEpBguB,EAAarf,GAGb,MAAMua,QAAgBkF,EAAqBzf,EAAOQ,SAAUR,EAAOS,WACnE2b,EAAYf,GAAIxP,OAAAC,OAAA,GACTuP,EAAK,CACR7a,SAAUR,EAAOQ,SACjBC,UAAWT,EAAOS,UAClBwF,SAAUsU,MAEhBnnB,SAAA,EAGFe,EAAAA,EAAAA,KAAC+N,GAAM,CACHK,WAAY,CAAE/B,SAAUoL,EAASpL,SAAUC,UAAWmL,EAASnL,WAC/Dob,QAAS,IAGZ3W,EAAQhJ,IAAK+L,IACV9T,EAAAA,EAAAA,KAAC+N,GAAM,CAEHK,WAAY,CAAE/B,SAAUyH,EAAGzH,SAAUC,UAAWwH,EAAGxH,WACnDrE,QAASA,IAAMiJ,EAAc4C,GAAI7U,UAEjCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,kFAAkFyD,MAAO,CAAEzC,MAAO,GAAIC,OAAQ,IAAK3J,UAC/He,EAAAA,EAAAA,KAACqT,EAAAA,QAAK,CACFC,OAAQ,CAAES,IAAKD,EAAGE,MAClBrM,UAAU,6BACV6L,WAAW,aARd,MAAMM,EAAGvT,WAgB1BqH,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAC4kB,cAAc,OAAO9kB,UAAU,0EAAyE1I,SAAA,EAC1Ge,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,uEAAsE1I,UAClFe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,uEAAsE1I,UAClFe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,0CAGxB3H,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,8CAGpB3H,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAASojB,EACT1jB,UAAU,wFAAuF1I,UAEjGe,EAAAA,EAAAA,KAAC0sB,GAAAA,QAAa,CAAC9lB,KAAK,cAAc4E,KAAM,GAAI9C,MAAM,eAGtDd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,yEAAwE1I,SAAA,EACpFe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+DAA8D1I,SAAC,sBAC/Ee,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,uCAAuCmO,cAAe,EAAE7W,SAC7C,4BAAtBwY,EAAS3F,SAAyC,MAAQ2F,EAAS3F,YAExElK,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,4DAA2D1I,SAAA,EACvEe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,qBAAqB4E,KAAM,GAAI9C,MAAM,aACpD1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,+BAA8B1I,SAAC,8DAwMzC,IAAT8oB,IA9LTngB,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CAAC2V,SAAU2O,EAAAA,aAAcC,QAASC,EAAAA,aAAc1kB,UAAU,mBAAkB1I,SAAA,EACtFe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wCAAuC1I,SAAC,kBACxDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qBAAoB1I,SAAC,mCAErCe,EAAAA,EAAAA,KAAC8Z,GAAAA,QAAU,CAACwB,8BAA8B,EAAOH,sBAAuB,CAAEE,cAAe,KAAMpc,UAC3Fe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,qCAAoC1I,SAC/CorB,GAAS5S,EAASR,aAAe,QAAQlP,IAAI,CAAC4kB,EAAGC,KAC9C,MAAML,EAAa9U,EAASnC,UAAYqX,EAAE/lB,KAE1C,IAAIiE,EAAW,YAWf,MAVe,QAAX8hB,EAAExC,OAAgBtf,EAAW,WAClB,qBAAX8hB,EAAExC,OAA6Btf,EAAW,oBAC/B,aAAX8hB,EAAExC,OAAqBtf,EAAW,OACvB,QAAX8hB,EAAExC,OAAgBtf,EAAW,OAClB,UAAX8hB,EAAExC,OAAkBtf,EAAW,SACpB,UAAX8hB,EAAExC,OAAkBtf,EAAW,SACpB,WAAX8hB,EAAExC,OAAmBtf,EAAW,UACrB,gBAAX8hB,EAAExC,OAAwBtf,EAAW,eAC1B,gBAAX8hB,EAAExC,OAAwBtf,EAAW,gBAGrCjD,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CAEbC,QAASA,IAAMggB,EAAWvQ,OAAAC,OAAC,CAAC,EAAIF,EAAS,CAACnC,QAASqX,EAAE/lB,QACrDe,UAAW,8GAA6G4kB,EAAa,uCAAyC,sCAAuCttB,SAAA,EAErNe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAMiE,EAAUW,KAAM,GAAI9C,MAAO6jB,EAAa,UAAY,aACpEvsB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAW,mCAAkC4kB,EAAa,0BAA4B,iBAAkBttB,SACzG0tB,EAAE/lB,SANFgmB,YAyKX,IAAT7E,IAvJTngB,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CAAC2V,SAAU2O,EAAAA,aAAcC,QAASC,EAAAA,aAAc1kB,UAAU,mBAAkB1I,SAAA,EACtFe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wCAAuC1I,SAAC,wBACxDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qBAAoB1I,SAAC,mDAErCe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,4DAA2D1I,UACvEe,EAAAA,EAAAA,KAAC0c,GAAAA,QAAS,CACN/U,UAAU,gDACVklB,WAAS,EACTlQ,YAAY,iFACZ0M,qBAAqB,UACrBnpB,MAAOuX,EAASuT,gBAChBpO,aAAekQ,GAAM7E,EAAWvQ,OAAAC,OAAC,CAAC,EAAIF,EAAS,CAACuT,gBAAiB8B,KACjElF,WAAS,SA4IH,IAATG,IApITngB,EAAAA,EAAAA,MAACuD,EAAAA,QAAStD,KAAI,CAAC2V,SAAU2O,EAAAA,aAAcC,QAASC,EAAAA,aAAc1kB,UAAU,mBAAkB1I,SAAA,EACtFe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,wCAAuC1I,SAAC,oBACxDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,qBAAoB1I,SAAC,8CAErC2I,EAAAA,EAAAA,MAACkS,GAAAA,QAAU,CAACwB,8BAA8B,EAAOH,sBAAuB,CAAEE,cAAe,KAAMpc,SAAA,EAG3F2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,iEAAgE1I,SAAA,EAC5E2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,0DAAyD1I,SAAA,EACrEe,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,qEAAoE1I,SAC/E,MACG,MAAMqtB,EAAIpC,GAAc6C,KAAKD,GAAKA,EAAEvsB,KAAOkX,EAASR,aACpD,OAAIqV,GAAUtsB,EAAAA,EAAAA,KAACssB,EAAElC,QAAO,CAACxjB,KAAM0lB,EAAEnC,KAAM3e,KAAM,GAAI9C,MAAM,aAChD1I,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,MAAM4E,KAAM,GAAI9C,MAAM,WAC/C,EAJA,MAMLd,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,2DAA0D1I,SAAC,kBAC3Ee,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,6CAA4C1I,SAAEwY,EAASR,qBAI/ErP,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAA5I,SAAA,EACDe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,gEAA+D1I,SAAC,aAChFe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,kCAAiC1I,SAAEwY,EAASnC,iBAKpE1N,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,iEAAgE1I,SAAA,EAC5E2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,uBAAsB1I,SAAA,EAClCe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,WAAW4E,KAAM,GAAI9C,MAAM,UAAU0C,MAAO,CAAEsQ,UAAW,EAAGjQ,YAAa,OACxF7D,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,SAAQ1I,SAAA,EACpBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,gEAA+D1I,SAAC,sBAChFe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,sCAAqC1I,SAAEwY,EAAS3F,kBAGxElK,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,6DAA4D1I,SAAA,EACxE2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAA,CAAC,QAAMwY,EAASpL,SAASqZ,QAAQ,OACxE9d,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAA,CAAC,QAAMwY,EAASnL,UAAUoZ,QAAQ,aAKjF1lB,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,iEAAgE1I,UAC5E2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,uBAAsB1I,SAAA,EAClCe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,SAAS4E,KAAM,GAAI9C,MAAM,UAAU0C,MAAO,CAAEsQ,UAAW,EAAGjQ,YAAa,OACtF7D,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,SAAQ1I,SAAA,EACpBe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,gEAA+D1I,SAAC,sBAChFe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,uBAAsB1I,SACjCwY,EAASuT,gBAAkBvT,EAASuT,gBAAkB,sDAqF3EhrB,EAAAA,EAAAA,KAACsc,GAAAA,QAAoB,CAACC,cAA8CyQ,EAAU/tB,UAC1Ee,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,mFAAkF1I,UAC9Fe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAAkB,IAAT8f,EAxaR7qB,UACjBoC,GAAW,GACX,IACInC,QAAQC,IAAI,sBAAuBqa,GACnC,MAAM7Z,QAAiBtB,EAAIiC,KAAK,8BAA+B,CAC3D8N,SAAUoL,EAASpL,SACnBC,UAAWmL,EAASnL,UACpBwF,SAAU2F,EAAS3F,UAAY,sBAC/BsD,aAAcqC,EAASR,YACvB3B,QAASmC,EAASnC,QAClB2X,mBAAoBxV,EAASuT,kBAGjC7tB,QAAQC,IAAI,YAAaQ,EAASG,MAKlCgtB,EAAgBntB,EAASG,MACzBuB,GAAW,GACXurB,GAAe,GAGf5mB,WAAW,KACPkD,EAAWR,SAAS,kBAAmB,CACnCY,UAAW3J,EAASG,KAAK0H,WACzB4G,SAAUoL,EAASpL,SACnBC,UAAWmL,EAASnL,UACpB2K,YAAaQ,EAASR,YACtB3B,QAASmC,EAASnC,UAGtBrR,WAAW,IAAM4mB,GAAe,GAAQ,MACzC,KAEP,CAAE,MAAOptB,GACLN,QAAQM,MAAM,oBAAqBA,GACnC6K,MAAM,+CACNhJ,GAAW,EACf,GAjDe4tB,KACX9B,KACApD,EAAQD,EAAO,IAibH5f,UAAWijB,KAAgB/rB,EAC3BsI,UAAW,+FAA8FyjB,IAAe,8BAAgC,kCAAmCnsB,SAE1LI,GAAUW,EAAAA,EAAAA,KAACyI,EAAAA,QAAiB,CAACC,MAAM,WAChCd,EAAAA,EAAAA,MAAAkiB,EAAAA,SAAA,CAAA7qB,SAAA,EACIe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,oCAAmC1I,SACrC,IAAT8oB,EAAa,iBAAmB,eAErC/nB,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,gBAAgB4E,KAAM,GAAI9C,MAAM,qBAQ/E,C,oqDC7bA,GA/HuBykB,EAAGhmB,iBACtB,MAAM,OAAElG,EAAM,QAAEd,GAAYrB,IACtBsuB,EAAaC,IAAaC,MAAMC,SAAW,QA4B3CC,EAAWA,EAAGrD,OAAMsD,QAAOxlB,UAASS,QAAQ,cAC9Cd,EAAAA,EAAAA,MAACI,EAAAA,QAAgB,CACbC,QAASA,EACTN,UAAU,0EAAyE1I,SAAA,EAEnF2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kCAAiC1I,SAAA,EAC7Ce,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,QAAO1I,UACnBe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAMujB,EAAM3e,KAAM,GAAI9C,MAAOA,OAE3C1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,2CAA0C1I,SAAEwuB,QAEhEztB,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,kBAAkB4E,KAAM,GAAI9C,MAAM,eAIzD,OACId,EAAAA,EAAAA,MAACF,EAAAA,aAAY,CAACC,UAAU,kBAAiB1I,SAAA,EACrCe,EAAAA,EAAAA,KAACmT,EAAAA,QAAS,CAACC,SAAS,kBAGpBpT,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,mDAAkD1I,UAC9D2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,wBAAuB1I,SAAA,EACnCe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAASA,IAAMd,EAAWe,SAC1BP,UAAU,oCAAmC1I,UAE7Ce,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,aAAa4E,KAAM,GAAI9C,MAAM,eAEhD1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,mCAAkC1I,SAAC,mBAI3D2I,EAAAA,EAAAA,MAACkS,GAAAA,QAAU,CAACnS,UAAU,mBAAmB2T,8BAA8B,EAAMrc,SAAA,EACzEe,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,sEAAqE1I,SAAC,aACtFe,EAAAA,EAAAA,KAACwtB,EAAQ,CACLrD,KAAK,SACLsD,MAAM,aACNxlB,QAASA,IAAMd,EAAWR,SAAS,WACnC+B,MAAM,aAEV1I,EAAAA,EAAAA,KAACwtB,EAAQ,CACLrD,KAAK,YACLsD,MAAM,kBACNxlB,QAASA,IAAMd,EAAWR,SAAS,kBACnC+B,MAAM,aAIV1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,2EAA0E1I,SAAC,iBAC3Fe,EAAAA,EAAAA,KAACwtB,EAAQ,CACLrD,KAAK,gBACLsD,MAAM,qBACNxlB,QA7ES/K,UACrBmL,EAAAA,QAAMC,MACF,iBACA,mFACA,CACI,CAAEC,KAAM,SAAU6C,MAAO,UACzB,CACI7C,KAAM,aACN6C,MAAO,cACPnD,QAAS/K,UACL,UAEUwB,EAAAA,gBAA4B,8BAC5BA,EAAAA,gBAA4B,2BAElC2J,EAAAA,QAAMC,MAAM,UAAW,sDAC3B,CAAE,MAAO7K,GACL4K,EAAAA,QAAMC,MAAM,QAAS,wBACzB,OA4DJI,MAAM,aAIV1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,2EAA0E1I,SAAC,qBAC3Fe,EAAAA,EAAAA,KAACwtB,EAAQ,CACLrD,KAAK,gBACLsD,MAAM,qBACNxlB,QAASA,IAAMd,EAAWR,SAAS,QAAS,CAAE1B,KAAM,QAASoJ,MAAO,0BAExErO,EAAAA,EAAAA,KAACwtB,EAAQ,CACLrD,KAAK,mBACLsD,MAAM,iBACNxlB,QAASA,IAAMd,EAAWR,SAAS,QAAS,CAAE1B,KAAM,UAAWoJ,MAAO,sBAE1ErO,EAAAA,EAAAA,KAACwtB,EAAQ,CACLrD,KAAK,qBACLsD,MAAM,WACNxlB,QAASA,IAAMd,EAAWR,SAAS,QAAS,CAAE1B,KAAM,QAASoJ,MAAO,gBAIxErO,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,2EAA0E1I,SAAC,SAC3Fe,EAAAA,EAAAA,KAACgI,EAAAA,QAAgB,CACbC,QAAShH,EACT0G,UAAU,4FAA2F1I,UAErG2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,kCAAiC1I,SAAA,EAC7Ce,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,sCAAqC1I,UACjDe,EAAAA,EAAAA,KAACuL,EAAAA,QAAQ,CAAC3E,KAAK,UAAU4E,KAAM,GAAI9C,MAAM,eAE7C1I,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,0CAAyC1I,SAAC,iBAIlE2I,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACF,UAAU,0BAAyB1I,SAAA,EACrC2I,EAAAA,EAAAA,MAACE,EAAAA,QAAI,CAACH,UAAU,wBAAuB1I,SAAA,CAAC,WAASmuB,MACjDptB,EAAAA,EAAAA,KAAC8H,EAAAA,QAAI,CAACH,UAAU,6BAA4B1I,SAAC,sC,gBCtHjEyuB,EAAAA,EAAAA,2BAA0B,CACtBC,MAAOC,EAAAA,mBAAmB3vB,KAC1B4vB,QAAQ,IAkBZ,MAAMC,IAAQC,EAAAA,EAAAA,8BAERC,GAAaA,KACf,MAAM,gBAAEjuB,GAAoBjB,IAE5B,OAAwB,OAApBiB,GAEIC,EAAAA,EAAAA,KAAC6H,EAAAA,QAAI,CAACF,UAAU,iDAAgD1I,UAC5De,EAAAA,EAAAA,KAACyI,EAAAA,QAAiB,CAAC+C,KAAK,QAAQ9C,MAAM,eAO9C1I,EAAAA,EAAAA,KAACiuB,EAAAA,oBAAmB,CAACnf,IAAKrI,EAAcxH,UACpCe,EAAAA,EAAAA,KAAC8tB,GAAMI,UAAS,CAACC,cAAe,CAAEC,aAAa,GAAQnvB,SACjDc,GAOE6H,EAAAA,EAAAA,MAAAkiB,EAAAA,SAAA,CAAA7qB,SAAA,EACIe,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,OAAO0nB,UAAW3d,MACrC3Q,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,UAAU0nB,UAAW/E,MACxCvpB,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,UAAU0nB,UAAWnU,MACxCna,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,iBAAiB0nB,UAAW7D,MAC/CzqB,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,kBAAkB0nB,UAAWzX,MAChD7W,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,gBAAgB0nB,UAAWvO,MAC9C/f,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,eAAe0nB,UAAWpnB,KAC7ClH,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,WAAW0nB,UAAWnB,MACzCntB,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,kBAAkB0nB,UAAW/J,MAChDvkB,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,QAAQ0nB,UAAW1S,SAhB1ChU,EAAAA,EAAAA,MAAAkiB,EAAAA,SAAA,CAAA7qB,SAAA,EACIe,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,QAAQ0nB,UAAWxS,MACtC9b,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,SAAS0nB,UAAW5H,MACvC1mB,EAAAA,EAAAA,KAAC8tB,GAAMO,OAAM,CAACznB,KAAK,cAAc0nB,UAAWxG,aA2BrD,SAASyG,KAMpB,OALAzuB,EAAAA,EAAAA,WAAU,MR9DP5C,iBA4BH,GAAIsxB,GAAOC,SAAU,CACjB,MAAQ3wB,OAAQ4wB,SAAyBvQ,GAAAA,sBACzC,IAAIwQ,EAAcD,EAElB,GAAuB,YAAnBA,EAA8B,CAC9B,MAAM,OAAE5wB,SAAiBqgB,GAAAA,0BACzBwQ,EAAc7wB,CAClB,CAEA,GAAoB,YAAhB6wB,EACArmB,MAAM,+CAGd,MACIA,MAAM,kDAId,CQkBQsmB,IACD,KAGC5uB,EAAAA,EAAAA,KAAC6uB,GAAAA,iBAAgB,CAAA5vB,UACbe,EAAAA,EAAAA,KAACkT,EAAAA,uBAAsB,CAAC9H,MAAO,CAAEiE,KAAM,GAAIpQ,UACvCe,EAAAA,EAAAA,KAAChB,EAAY,CAAAC,UACTe,EAAAA,EAAAA,KAACuB,EAAiB,CAAAtC,UACde,EAAAA,EAAAA,KAACguB,GAAU,WAMnC,C,2EC7FIc,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBhC,IAAjBiC,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUK,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,OACf,CAGAH,EAAoBO,EAAIF,ECzBxBL,EAAoBQ,KAAO,CAAC,E,MCA5B,IAAIC,EAAW,GACfT,EAAoBU,EAAI,CAACtK,EAAQuK,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASzI,EAAI,EAAGA,EAAImI,EAASluB,OAAQ+lB,IAAK,CAGzC,IAFA,IAAKqI,EAAUC,EAAIC,GAAYJ,EAASnI,GACpC0I,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAASpuB,OAAQ0uB,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAalY,OAAO+Q,KAAKsG,EAAoBU,GAAGQ,MAAO3vB,GAASyuB,EAAoBU,EAAEnvB,GAAKovB,EAASM,KAC9IN,EAASQ,OAAOF,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACbP,EAASU,OAAO7I,IAAK,GACrB,IAAI8I,EAAIR,SACE3C,IAANmD,IAAiBhL,EAASgL,EAC/B,CACD,CACA,OAAOhL,CAnBP,CAJCyK,EAAWA,GAAY,EACvB,IAAI,IAAIvI,EAAImI,EAASluB,OAAQ+lB,EAAI,GAAKmI,EAASnI,EAAI,GAAG,GAAKuI,EAAUvI,IAAKmI,EAASnI,GAAKmI,EAASnI,EAAI,GACrGmI,EAASnI,GAAK,CAACqI,EAAUC,EAAIC,G,KCJ/Bb,EAAoBqB,EAAKjB,IACxB,IAAIkB,EAASlB,GAAUA,EAAOmB,WAC7B,IAAOnB,EAAiB,QACxB,IAAM,EAEP,OADAJ,EAAoBwB,EAAEF,EAAQ,CAAE/d,EAAG+d,IAC5BA,GCLRtB,EAAoBwB,EAAI,CAACrB,EAASsB,KACjC,IAAI,IAAIlwB,KAAOkwB,EACXzB,EAAoB0B,EAAED,EAAYlwB,KAASyuB,EAAoB0B,EAAEvB,EAAS5uB,IAC5EoX,OAAOgZ,eAAexB,EAAS5uB,EAAK,CAAEqwB,YAAY,EAAMhxB,IAAK6wB,EAAWlwB,MCJ3EyuB,EAAoB6B,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOC,MAAQ,IAAIC,SAAS,cAAb,EAChB,CAAE,MAAOprB,GACR,GAAsB,kBAAX8G,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxBsiB,EAAoB0B,EAAI,CAACO,EAAKC,IAAUvZ,OAAOwZ,UAAUC,eAAe9B,KAAK2B,EAAKC,GCClFlC,EAAoBoB,EAAKjB,IACH,qBAAXkC,QAA0BA,OAAOC,aAC1C3Z,OAAOgZ,eAAexB,EAASkC,OAAOC,YAAa,CAAEnxB,MAAO,WAE7DwX,OAAOgZ,eAAexB,EAAS,aAAc,CAAEhvB,OAAO,KCLvD6uB,EAAoBpC,EAAI,I,MCKxB,IAAI2E,EAAkB,CACrB,IAAK,GAaNvC,EAAoBU,EAAEO,EAAKuB,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4B1zB,KACvD,IAGIixB,EAAUuC,GAHT7B,EAAUgC,EAAaC,GAAW5zB,EAGhBspB,EAAI,EAC3B,GAAGqI,EAASkC,KAAMrxB,GAAgC,IAAxB+wB,EAAgB/wB,IAAa,CACtD,IAAIyuB,KAAY0C,EACZ3C,EAAoB0B,EAAEiB,EAAa1C,KACrCD,EAAoBO,EAAEN,GAAY0C,EAAY1C,IAGhD,GAAG2C,EAAS,IAAIxM,EAASwM,EAAQ5C,EAClC,CAEA,IADG0C,GAA4BA,EAA2B1zB,GACrDspB,EAAIqI,EAASpuB,OAAQ+lB,IACzBkK,EAAU7B,EAASrI,GAChB0H,EAAoB0B,EAAEa,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOxC,EAAoBU,EAAEtK,IAG1B0M,EAAqBC,KAAsB,gBAAIA,KAAsB,iBAAK,GAC9ED,EAAmBpzB,QAAQ+yB,EAAqBO,KAAK,KAAM,IAC3DF,EAAmBvzB,KAAOkzB,EAAqBO,KAAK,KAAMF,EAAmBvzB,KAAKyzB,KAAKF,G,KC7CvF,IAAIG,EAAsBjD,EAAoBU,OAAEzC,EAAW,CAAC,KAAM,IAAO+B,EAAoB,OAC7FiD,EAAsBjD,EAAoBU,EAAEuC,E","sources":["src/utils/api.js","src/context/AuthContext.js","src/context/WebSocketContext.js","src/utils/navigationRef.js","src/screens/CancellationScreen.jsx","src/components/ConnectionStatus.jsx","src/components/WebMapView.js","src/components/PlatformMap.web.js","src/utils/adsCache.js","src/screens/DashboardScreen.jsx","src/components/ImageAdCard.jsx","src/screens/FindingMechanicScreen.jsx","src/screens/HistoryScreen.jsx","src/screens/LegalScreen.jsx","src/screens/LoginScreen.jsx","src/components/SafetyToolkit.jsx","src/utils/notifications.js","src/screens/MechanicFoundScreen.jsx","src/screens/NearbyMechanicsScreen.jsx","src/screens/OTPScreen.jsx","src/screens/ProcessFormScreen.jsx","src/screens/ProfileScreen.jsx","src/screens/ServiceRequestScreen.jsx","src/screens/SettingsScreen.jsx","App.js","webpack/bootstrap","webpack/runtime/amd options","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import axios from 'axios';\r\nimport * as SecureStore from 'expo-secure-store';\r\n\r\nexport const API_URL = process.env.EXPO_PUBLIC_API_URL || 'https://mechanic-setu.onrender.com/api';\r\n\r\nconst api = axios.create({\r\n    baseURL: API_URL,\r\n    withCredentials: true,\r\n    xsrfCookieName: 'csrftoken',\r\n    xsrfHeaderName: 'X-CSRFToken',\r\n});\r\n\r\n// Flags to avoid loops\r\nlet isRefreshing = false;\r\nlet refreshSubscribers = [];\r\n\r\n// Retry queued requests after refresh\r\nfunction onRefreshed() {\r\n    refreshSubscribers.forEach((cb) => cb());\r\n    refreshSubscribers = [];\r\n}\r\n\r\nfunction subscribeTokenRefresh(cb) {\r\n    refreshSubscribers.push(cb);\r\n}\r\n\r\n// Request Interceptor: Logging\r\napi.interceptors.request.use(\r\n    async (config) => {\r\n        console.log(`[API Request] ${config.method?.toUpperCase()} ${config.url}`);\r\n\r\n        // Add debugger breakpoint if needed\r\n        // debugger; \r\n\r\n        // Optional: If you need to attach token manually from Store\r\n        // const token = await SecureStore.getItemAsync('token');\r\n        // if (token) config.headers.Authorization = `Bearer ${token}`;\r\n\r\n        return config;\r\n    },\r\n    (error) => {\r\n        console.error('[API Request Error]', error);\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// Response Interceptor: Handling Refreshes & Logging\r\napi.interceptors.response.use(\r\n    (response) => {\r\n        if (response.config.url.includes(\"Profile/UserHistory/\")) {\r\n            console.log(`[API Response] ${response.status} ${response.config.url}`);\r\n        } else {\r\n            console.log(`[API Response] ${response.status} ${response.config.url}`, response.data);\r\n        }\r\n        return response;\r\n    },\r\n    async (error) => {\r\n        const originalRequest = error.config;\r\n\r\n        console.warn(`[API Error] ${error.response?.status} ${originalRequest?.url}`, error.response?.data);\r\n\r\n        // Prevent infinite loop if refresh request itself fails\r\n        // Note: ensure the URL path matches your backend\r\n        const isRefreshRequest = originalRequest?.url?.includes('/token/refresh/');\r\n\r\n        if (\r\n            error.response?.status === 401 &&\r\n            !originalRequest?._retry &&\r\n            !isRefreshRequest\r\n        ) {\r\n            if (isRefreshing) {\r\n                return new Promise((resolve) => {\r\n                    subscribeTokenRefresh(() => resolve(api(originalRequest)));\r\n                });\r\n            }\r\n\r\n            originalRequest._retry = true;\r\n            isRefreshing = true;\r\n\r\n            try {\r\n                console.log(\"Attempting to refresh token...\");\r\n                await axios.post(`${BASE_URL}/core/token/refresh/`, {}, { withCredentials: true });\r\n                console.log(\"Token refresh successful.\");\r\n\r\n                isRefreshing = false;\r\n                onRefreshed();\r\n\r\n                // Simulating Cookies.set(\"Logged\", true)\r\n                await SecureStore.setItemAsync(\"Logged\", \"true\");\r\n\r\n                return api(originalRequest);\r\n            } catch (refreshError) {\r\n                console.error(\"Token refresh failed:\", refreshError);\r\n                isRefreshing = false;\r\n\r\n                // Clear logged status\r\n                await SecureStore.setItemAsync(\"Logged\", \"false\");\r\n                await SecureStore.deleteItemAsync(\"otp_ctx\");\r\n\r\n                // Redirect only if not already on login page\r\n                // Expo Router doesn't give synchronous access to current path easily outside of hooks,\r\n                // but we can force navigation to login.\r\n                // Redirect logic handled by AuthContext or Main Navigation state\r\n                // router.replace('/login');\r\n\r\n                return Promise.reject(refreshError);\r\n            }\r\n        }\r\n\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default api;\r\n","import * as SecureStore from 'expo-secure-store';\r\nimport { createContext, useCallback, useContext, useEffect, useState } from 'react';\r\nimport api from '../utils/api';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n\r\n    // Debugging hook to check router availability\r\n    // Check Login Status & Fetch Profile\r\n    const checkAuth = useCallback(async () => {\r\n        console.log(\"[AuthContext] checkAuth: Checking login status...\");\r\n        try {\r\n            // Try fetching the full profile directly which serves as auth check + data\r\n            const res = await api.get(\"/Profile/UserProfile/\");\r\n            console.log(\"[AuthContext] checkAuth: User profile fetched:\", res.data);\r\n\r\n            setUser(res.data);\r\n            await SecureStore.setItemAsync(\"Logged\", \"true\");\r\n        } catch (err) {\r\n            console.log(\"[AuthContext] checkAuth: Not logged in or session expired:\", err.message);\r\n            setUser(null);\r\n            await SecureStore.setItemAsync(\"Logged\", \"false\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        checkAuth();\r\n    }, [checkAuth]);\r\n\r\n\r\n    // Rename loginWithEmail -> login to align with LoginScreen.jsx\r\n    const login = async (email) => {\r\n        setError('');\r\n        console.log(`[AuthContext] login called with: ${email}`);\r\n        try {\r\n            console.log(`[AuthContext] Sending POST to /users/Login_SignUp/`);\r\n            const res = await api.post('/users/Login_SignUp/', { email });\r\n            console.log(\"[AuthContext] Login API response:\", res.data);\r\n\r\n            // Navigate to Verify\r\n            const ctx = {\r\n                key: res.data.key,\r\n                id: res.data.id?.toString(),\r\n                status: res.data.status,\r\n                email: email\r\n            };\r\n\r\n            // Store context if needed for persistence across hard reloads\r\n            // await SecureStore.setItemAsync('otp_ctx', JSON.stringify(ctx));\r\n\r\n            // Note: Components like LoginScreen might handle navigation themselves using the return value.\r\n            // But we can also push here if we are using expo-router exclusively.\r\n            // Since LoginScreen uses navigation.navigate('Verify'), we can return data and let it handle UI.\r\n            // IF we want to use router.push, do it here. \r\n            // Current LoginScreen uses: navigation.navigate('Verify', { ...data })\r\n\r\n            return res.data;\r\n        } catch (err) {\r\n            console.error(\"[AuthContext] Login failed:\", err);\r\n            const msg = err.response?.data?.error || 'Login failed. Please check your email or try again.';\r\n            setError(msg);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const googleLogin = async (token) => {\r\n        setError('');\r\n        console.log(\"[AuthContext] googleLogin with token\");\r\n        try {\r\n            const res = await api.post(\"/users/google/\", { token });\r\n            console.log(\"[AuthContext] Google login success:\", res.data);\r\n\r\n            if (res.data.status === 'New User') {\r\n                // Use router if available, or return logic\r\n                // router.push({ pathname: '/form', ... });\r\n                return { status: 'New User' };\r\n            } else {\r\n                await checkAuth();\r\n                // router.replace('/');\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Google login error:\", err);\r\n            setError(err.response?.data?.detail || \"Google login failed on our server.\");\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const verifyOtp = async (key, id, otp, status) => {\r\n        setError('');\r\n        console.log(`[AuthContext] verifyOtp: ${otp}`);\r\n        try {\r\n            const payload = { key, id, otp };\r\n            await api.post('/users/otp-verify/', payload);\r\n\r\n            await checkAuth();\r\n\r\n            if (status === 'New User') {\r\n                // Return status so component can navigate to ProcessForm\r\n                // router.replace({ pathname: '/form', ... });\r\n                return { status: 'New User' };\r\n            } else {\r\n                // State update handles redirect to Home\r\n                // router.replace('/');\r\n            }\r\n        } catch (err) {\r\n            console.error('[AuthContext] OTP verify failed:', err);\r\n            const msg = err?.response?.data?.error || 'Verification failed. Try again.';\r\n            setError(msg);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const resendOtp = async (key, id) => {\r\n        console.log(\"[AuthContext] Resending OTP...\");\r\n        try {\r\n            const res = await api.post('/users/resend-otp/', { key, id });\r\n            console.log(\"[AuthContext] Resend success:\", res.data);\r\n            return res.data;\r\n        } catch (err) {\r\n            console.error('[AuthContext] Resend failed:', err);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const logout = async () => {\r\n        console.log(\"[AuthContext] Logging out...\");\r\n        try {\r\n            await api.post('/users/logout/');\r\n        } catch (err) {\r\n            console.error('[AuthContext] Logout failed on server:', err);\r\n        } finally {\r\n            setUser(null);\r\n            await SecureStore.deleteItemAsync(\"Logged\");\r\n            await SecureStore.deleteItemAsync(\"otp_ctx\");\r\n            // router.replace('/login'); // Removed: State change handles navigation\r\n        }\r\n    };\r\n    const isAuthenticated = loading ? null : !!user;\r\n\r\n    return (\r\n        <AuthContext.Provider value={{\r\n            user,\r\n            loading,\r\n            error,\r\n            isAuthenticated,\r\n            checkAuth,\r\n            profile: user, // Alias user as profile for Dashboard usage\r\n            login,\r\n            googleLogin,\r\n            verifyOtp,\r\n            resendOtp,\r\n            logout,\r\n            setError\r\n        }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport default AuthContext;\r\n","import { createContext, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { AppState } from 'react-native';\r\nimport api, { BASE_URL } from '../utils/api';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst WebSocketContext = createContext(null);\r\n\r\nexport const useWebSocket = () => useContext(WebSocketContext);\r\n\r\n// Exponential backoff delays in milliseconds\r\nconst BACKOFF_DELAYS = [1000, 2000, 5000, 10000, 30000]; // 1s, 2s, 5s, 10s, 30s\r\nconst MAX_BACKOFF_INDEX = BACKOFF_DELAYS.length - 1;\r\n\r\nexport const WebSocketProvider = ({ children }) => {\r\n    const { isAuthenticated, user } = useAuth();\r\n    const [socket, setSocket] = useState(null);\r\n    const [lastMessage, setLastMessage] = useState(null);\r\n    const [connectionStatus, setConnectionStatus] = useState('disconnected');\r\n    const [queueSize, setQueueSize] = useState(0);\r\n    const [reconnectAttemptCount, setReconnectAttemptCount] = useState(0);\r\n    const ws = useRef(null);\r\n    const appState = useRef(AppState.currentState);\r\n    const reconnectInterval = useRef(null);\r\n    const reconnectTimeout = useRef(null);\r\n    const reconnectAttempt = useRef(0);\r\n    const messageQueue = useRef([]);\r\n    const isReconnecting = useRef(false);\r\n    const isMounted = useRef(false);\r\n    const heartbeatInterval = useRef(null); // For periodic heartbeat\r\n    const activeJobId = useRef(null); // Use ref instead of state to avoid closure issues\r\n\r\n    // Track mounted state\r\n    useEffect(() => {\r\n        isMounted.current = true;\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    // Function to send a message (with automatic queuing if offline)\r\n    const sendMessage = useCallback((message) => {\r\n        const messageData = typeof message === 'string' ? message : JSON.stringify(message);\r\n\r\n        if (ws.current && ws.current.readyState === WebSocket.OPEN) {\r\n            // Connection is open, send immediately\r\n            try {\r\n                ws.current.send(messageData);\r\n                console.log('%c[WS-PROVIDER] Message sent:', 'color: #00CED1;', messageData);\r\n                return true;\r\n            } catch (error) {\r\n                console.error('[WS-PROVIDER] Error sending message:', error);\r\n                // Queue the message if send fails\r\n                messageQueue.current.push(messageData);\r\n                if (isMounted.current) {\r\n                    setQueueSize(messageQueue.current.length);\r\n                }\r\n                console.log('%c[WS-PROVIDER] Message queued (send failed):', 'color: #FFA500;', messageData);\r\n                return false;\r\n            }\r\n        } else {\r\n            // Connection not open, queue the message\r\n            messageQueue.current.push(messageData);\r\n            if (isMounted.current) {\r\n                setQueueSize(messageQueue.current.length);\r\n            }\r\n            console.log('%c[WS-PROVIDER] Message queued (offline):', 'color: #FFA500;', messageData);\r\n            console.log(`[WS-PROVIDER] Queue size: ${messageQueue.current.length}`);\r\n            return false;\r\n        }\r\n    }, []);\r\n\r\n    // Function to flush the message queue\r\n    const flushMessageQueue = useCallback(() => {\r\n        if (messageQueue.current.length > 0 && ws.current && ws.current.readyState === WebSocket.OPEN) {\r\n            console.log(`%c[WS-PROVIDER] Flushing ${messageQueue.current.length} queued messages...`, 'color: #32CD32; font-weight: bold;');\r\n\r\n            const queueCopy = [...messageQueue.current];\r\n            messageQueue.current = [];\r\n            if (isMounted.current) {\r\n                setQueueSize(0);\r\n            }\r\n\r\n            queueCopy.forEach((message, index) => {\r\n                try {\r\n                    ws.current.send(message);\r\n                    console.log(`%c[WS-PROVIDER] Sent queued message ${index + 1}/${queueCopy.length}:`, 'color: #32CD32;', message);\r\n                } catch (error) {\r\n                    console.error(`[WS-PROVIDER] Failed to send queued message ${index + 1}:`, error);\r\n                    // Re-queue failed messages\r\n                    messageQueue.current.push(message);\r\n                    if (isMounted.current) {\r\n                        setQueueSize(messageQueue.current.length);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    // Function to set active job ID\r\n    const setActiveJobId = useCallback((jobId) => {\r\n        activeJobId.current = jobId;\r\n        console.log('[WS-PROVIDER] Active job ID updated:', jobId);\r\n    }, []);\r\n\r\n    // Exponential backoff reconnect\r\n    const scheduleReconnect = useCallback(() => {\r\n        if (!isAuthenticated || isReconnecting.current) return;\r\n\r\n        const delay = BACKOFF_DELAYS[Math.min(reconnectAttempt.current, MAX_BACKOFF_INDEX)];\r\n        console.log(`%c[WS-PROVIDER] Scheduling reconnect attempt ${reconnectAttempt.current + 1} in ${delay}ms...`, 'color: #FF6347;');\r\n\r\n        reconnectTimeout.current = setTimeout(() => {\r\n            reconnectAttempt.current += 1;\r\n            if (isMounted.current) {\r\n                setReconnectAttemptCount(reconnectAttempt.current);\r\n            }\r\n            connect();\r\n        }, delay);\r\n    }, [isAuthenticated]);\r\n\r\n    const connect = useCallback(async () => {\r\n        // Prevent connection if not authenticated\r\n        if (!isAuthenticated) {\r\n            console.log('%c[WS-PROVIDER] User not connected (No Auth). Skipping WS connection.', 'color: #ff4500;');\r\n            return;\r\n        }\r\n\r\n        // Avoid double connection\r\n        if (ws.current && (ws.current.readyState === WebSocket.OPEN || ws.current.readyState === WebSocket.CONNECTING)) {\r\n            console.log('%c[WS-PROVIDER] WebSocket already connected or connecting.', 'color: #008000;');\r\n            return;\r\n        }\r\n\r\n        // Set reconnecting flag\r\n        isReconnecting.current = true;\r\n        setConnectionStatus('connecting');\r\n        console.log(`%c[WS-PROVIDER] Starting connection for User: ${user?.email || 'Unknown'} (Attempt: ${reconnectAttempt.current + 1})`, 'color: #8A2BE2;');\r\n\r\n        try {\r\n            // 1. Get One-Time Token for WS Auth\r\n            const res = await api.get(\"/core/ws-token/\");\r\n            const wsToken = res.data.ws_token;\r\n\r\n            if (!wsToken) throw new Error(\"Failed to get WebSocket token\");\r\n\r\n            // 2. Determine WebSocket URL\r\n            let wsHost = BASE_URL.replace(/^https?:\\/\\//, '').replace(/\\/api\\/?$/, '');\r\n            const wsScheme = BASE_URL.startsWith('https') ? 'wss' : 'ws';\r\n            const wsUrl = `${wsScheme}://${wsHost}/ws/job_notifications/?token=${wsToken}`;\r\n\r\n            console.log(`[WS-PROVIDER] Connecting to: ${wsUrl}`);\r\n            const origin = `${wsScheme === 'wss' ? 'https' : 'http'}://${wsHost}`;\r\n\r\n            ws.current = new WebSocket(wsUrl, null, {\r\n                headers: {\r\n                    'Origin': origin\r\n                }\r\n            });\r\n\r\n            ws.current.onopen = () => {\r\n                console.log('%c[WS-PROVIDER] ==> Connection successful!', 'color: #008000; font-weight: bold;');\r\n                if (!isMounted.current) return;\r\n\r\n                setConnectionStatus('connected');\r\n                setSocket(ws.current);\r\n                isReconnecting.current = false;\r\n\r\n                // Reset reconnect attempt counter on successful connection\r\n                reconnectAttempt.current = 0;\r\n                setReconnectAttemptCount(0);\r\n\r\n                // Start periodic heartbeat (every 25 seconds)\r\n                if (heartbeatInterval.current) {\r\n                    clearInterval(heartbeatInterval.current);\r\n                }\r\n\r\n                heartbeatInterval.current = setInterval(() => {\r\n                    if (ws.current && ws.current.readyState === WebSocket.OPEN) {\r\n                        try {\r\n                            const heartbeatMessage = JSON.stringify({\r\n                                type: 'user_heartbeat',\r\n                                timestamp: Date.now(),\r\n                                job_id: activeJobId.current // Include active job ID if available\r\n                            });\r\n                            ws.current.send(heartbeatMessage);\r\n                            console.log('%c[WS-PROVIDER]  Heartbeat sent:', 'color: #3b82f6;', { job_id: activeJobId.current });\r\n                        } catch (err) {\r\n                            console.error('[WS-PROVIDER] Failed to send heartbeat:', err);\r\n                        }\r\n                    }\r\n                }, 25000); // Every 25 seconds\r\n\r\n                // Flush any queued messages\r\n                flushMessageQueue();\r\n            };\r\n\r\n            ws.current.onmessage = (event) => {\r\n                try {\r\n                    const data = JSON.parse(event.data);\r\n\r\n                    // ENHANCED LOGGING: Show all message details\r\n                    console.log('%c', 'color: #22c55e; font-weight: bold;');\r\n                    console.log('%c  [WS-PROVIDER]  MESSAGE RECEIVED', 'color: #22c55e; font-weight: bold;');\r\n                    console.log('%c', 'color: #22c55e;');\r\n                    console.log('%c  Type:', 'color: #22c55e;', data.type);\r\n                    console.log('%c  Request ID:', 'color: #22c55e;', data.request_id);\r\n                    console.log('%c  Job ID:', 'color: #22c55e;', data.job_id);\r\n                    console.log('%c  Timestamp:', 'color: #22c55e;', new Date().toLocaleTimeString());\r\n                    console.log('%c  Full Data:', 'color: #22c55e;', data);\r\n                    console.log('%c', 'color: #22c55e; font-weight: bold;');\r\n\r\n                    if (isMounted.current) {\r\n                        setLastMessage(data);\r\n                    }\r\n                } catch (e) {\r\n                    console.warn('[WS-PROVIDER] Received non-JSON message:', event.data);\r\n                }\r\n            };\r\n\r\n            ws.current.onclose = (event) => {\r\n                console.warn(`[WS-PROVIDER] ==> Disconnected. Code: ${event.code}, Reason: ${event.reason}`);\r\n                if (isMounted.current) {\r\n                    setConnectionStatus('disconnected');\r\n                    setSocket(null);\r\n                }\r\n                isReconnecting.current = false;\r\n\r\n                // Only auto-reconnect if not a normal closure and user is authenticated\r\n                if (event.code !== 1000 && isAuthenticated) {\r\n                    scheduleReconnect();\r\n                }\r\n            };\r\n\r\n            ws.current.onerror = (error) => {\r\n                console.error('[WS-PROVIDER] ==> An error occurred:', error.message);\r\n                if (isMounted.current) {\r\n                    setConnectionStatus('error');\r\n                }\r\n            };\r\n\r\n        } catch (error) {\r\n            console.error('[WS-PROVIDER] ==> Connection setup failed:', error);\r\n            setConnectionStatus('error');\r\n            isReconnecting.current = false;\r\n\r\n            // Schedule reconnect on error\r\n            if (isAuthenticated) {\r\n                scheduleReconnect();\r\n            }\r\n        }\r\n    }, [isAuthenticated, user, flushMessageQueue, scheduleReconnect]);\r\n\r\n    // 1. Monitor Auth State & Connect/Disconnect\r\n    useEffect(() => {\r\n        if (isAuthenticated) {\r\n            connect();\r\n        } else {\r\n            // Clear any pending reconnect attempts\r\n            if (reconnectTimeout.current) {\r\n                clearTimeout(reconnectTimeout.current);\r\n                reconnectTimeout.current = null;\r\n            }\r\n            reconnectAttempt.current = 0;\r\n            if (isMounted.current) {\r\n                setReconnectAttemptCount(0);\r\n            }\r\n\r\n            if (ws.current) {\r\n                console.log('[WS-PROVIDER] User logged out. Closing WebSocket.');\r\n                ws.current.close(1000, \"User logged out\");\r\n                ws.current = null;\r\n                if (isMounted.current) {\r\n                    setConnectionStatus('disconnected');\r\n                }\r\n            }\r\n\r\n            // Clear message queue on logout\r\n            if (messageQueue.current.length > 0) {\r\n                console.log(`[WS-PROVIDER] Clearing ${messageQueue.current.length} queued messages due to logout.`);\r\n                messageQueue.current = [];\r\n                if (isMounted.current) {\r\n                    setQueueSize(0);\r\n                }\r\n            }\r\n        }\r\n    }, [isAuthenticated, connect]);\r\n\r\n    // 2. Periodic Re-connection (3-5 mins) to refresh token\r\n    useEffect(() => {\r\n        if (isAuthenticated && connectionStatus === 'connected') {\r\n            // Clear existing interval if any\r\n            if (reconnectInterval.current) clearInterval(reconnectInterval.current);\r\n\r\n            // Set new interval (e.g., 4 minutes = 240000 ms)\r\n            reconnectInterval.current = setInterval(() => {\r\n                console.log('%c[WS-PROVIDER] Auto-reconnecting to refresh session (4 min check)...', 'color: #FF4500;');\r\n                if (ws.current) {\r\n                    ws.current.close(1000, \"Auto-refresh\");\r\n                }\r\n                // Reset attempt counter for planned reconnect\r\n                reconnectAttempt.current = 0;\r\n                if (isMounted.current) {\r\n                    setReconnectAttemptCount(0);\r\n                }\r\n                setTimeout(() => connect(), 500);\r\n            }, 240000);\r\n\r\n            return () => clearInterval(reconnectInterval.current);\r\n        }\r\n    }, [isAuthenticated, connectionStatus, connect]);\r\n\r\n    // 3. Handle App State (Background/Foreground)\r\n    useEffect(() => {\r\n        const subscription = AppState.addEventListener('change', nextAppState => {\r\n            if (appState.current.match(/inactive|background/) && nextAppState === 'active') {\r\n                console.log('[WS-PROVIDER] App came to foreground. Reconnecting if needed...');\r\n                if (isAuthenticated && (!ws.current || ws.current.readyState === WebSocket.CLOSED)) {\r\n                    // Reset attempt counter when app comes to foreground\r\n                    reconnectAttempt.current = 0;\r\n                    if (isMounted.current) {\r\n                        setReconnectAttemptCount(0);\r\n                    }\r\n                    connect();\r\n                }\r\n            }\r\n            appState.current = nextAppState;\r\n        });\r\n\r\n        return () => {\r\n            subscription.remove();\r\n        };\r\n    }, [isAuthenticated, connect]);\r\n\r\n    // Cleanup on unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            if (reconnectInterval.current) clearInterval(reconnectInterval.current);\r\n            if (reconnectTimeout.current) clearTimeout(reconnectTimeout.current);\r\n            if (heartbeatInterval.current) clearInterval(heartbeatInterval.current);\r\n\r\n            if (ws.current) {\r\n                console.log('[WS-PROVIDER] Provider unmounting. Closing WebSocket.');\r\n                ws.current.close(1000, \"Provider unmounted\");\r\n                ws.current = null;\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const value = useMemo(() => ({\r\n        socket,\r\n        lastMessage,\r\n        connectionStatus,\r\n        sendMessage,\r\n        queueSize,\r\n        reconnectAttempt: reconnectAttemptCount,\r\n        setActiveJobId // Expose function to update active job ID\r\n    }), [socket, lastMessage, connectionStatus, sendMessage, queueSize, reconnectAttemptCount, setActiveJobId]);\r\n\r\n    return (\r\n        <WebSocketContext.Provider value={value}>\r\n            {children}\r\n        </WebSocketContext.Provider>\r\n    );\r\n};\r\n","import { createNavigationContainerRef } from '@react-navigation/native';\r\n\r\nexport const navigationRef = createNavigationContainerRef();\r\n\r\nexport function navigate(name, params) {\r\n    if (navigationRef.isReady()) {\r\n        try {\r\n            navigationRef.navigate(name, params);\r\n        } catch (e) {\r\n            console.warn(\"Navigation failed (navigate):\", e);\r\n        }\r\n    }\r\n}\r\n\r\nexport function resetRoot(name) {\r\n    if (navigationRef.isReady()) {\r\n        try {\r\n            navigationRef.reset({\r\n                index: 0,\r\n                routes: [{ name }],\r\n            });\r\n        } catch (e) {\r\n            console.warn(\"Navigation failed (resetRoot):\", e);\r\n        }\r\n    }\r\n}","import { useNavigation, useRoute } from '@react-navigation/native';\r\nimport * as SecureStore from 'expo-secure-store';\r\nimport { useState } from 'react';\r\nimport { ActivityIndicator, Alert, Text, TouchableOpacity, View } from 'react-native';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport api from '../utils/api';\r\nimport { resetRoot } from '../utils/navigationRef';\r\n\r\nconst ACTIVE_JOB_STORAGE_KEY = 'mechanicAcceptedData';\r\nconst FORM_STORAGE_KEY = 'punctureRequestFormData';\r\n\r\nconst CancellationScreen = () => {\r\n    const navigation = useNavigation();\r\n    const route = useRoute();\r\n    const { requestId } = route.params || {};\r\n    const [selectedReason, setSelectedReason] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleConfirmCancel = async () => {\r\n        if (!selectedReason) {\r\n            Alert.alert(\"Selection Required\", \"Please select a reason.\");\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        try {\r\n            // 1. Call API\r\n            await api.post(`jobs/CancelServiceRequest/${requestId}/`, {\r\n                cancellation_reason: selectedReason\r\n            });\r\n\r\n            // 2. Clear Local Storage\r\n            await SecureStore.deleteItemAsync(ACTIVE_JOB_STORAGE_KEY);\r\n            await SecureStore.deleteItemAsync(FORM_STORAGE_KEY);\r\n\r\n            // 3. Navigate Home Safely\r\n            Alert.alert(\"Request Cancelled\", \"Your service request has been cancelled.\", [\r\n                { text: \"OK\", onPress: () => resetRoot('Main') }\r\n            ]);\r\n\r\n        } catch (error) {\r\n            console.error(\"Cancellation failed\", error);\r\n            const errorMessage = error.response?.data?.error || \"Failed to cancel. Try again.\";\r\n            Alert.alert(\"Error\", errorMessage);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const reasons = ['Mechanic delayed', 'Found help elsewhere', 'Incorrect details', 'Other'];\r\n\r\n    return (\r\n        <SafeAreaView className=\"flex-1 bg-white\">\r\n            <View className=\"px-6 pt-6\">\r\n                <Text className=\"text-2xl font-black text-gray-900 mb-2\">Cancel Service?</Text>\r\n                <Text className=\"text-gray-500 mb-8\">Please tell us why you want to cancel the request.</Text>\r\n\r\n                {reasons.map((reason) => (\r\n                    <TouchableOpacity\r\n                        key={reason}\r\n                        onPress={() => setSelectedReason(reason)}\r\n                        className={`flex-row items-center justify-between p-4 mb-3 rounded-2xl border ${selectedReason === reason ? 'bg-blue-50 border-blue-200' : 'bg-white border-gray-100'\r\n                            }`}\r\n                    >\r\n                        <Text className={`font-bold ${selectedReason === reason ? 'text-blue-600' : 'text-gray-700'}`}>\r\n                            {reason}\r\n                        </Text>\r\n                        <View className={`w-5 h-5 rounded-full border-2 items-center justify-center ${selectedReason === reason ? 'border-blue-500' : 'border-gray-300'\r\n                            }`}>\r\n                            {selectedReason === reason && <View className=\"w-2.5 h-2.5 bg-blue-500 rounded-full\" />}\r\n                        </View>\r\n                    </TouchableOpacity>\r\n                ))}\r\n\r\n                <View className=\"flex-row space-x-3 mt-8\">\r\n                    <TouchableOpacity\r\n                        onPress={() => navigation.goBack()}\r\n                        className=\"flex-1 py-4 bg-gray-100 rounded-2xl items-center\"\r\n                        disabled={loading}\r\n                    >\r\n                        <Text className=\"font-bold text-gray-700\">Go Back</Text>\r\n                    </TouchableOpacity>\r\n\r\n                    <TouchableOpacity\r\n                        onPress={handleConfirmCancel}\r\n                        disabled={!selectedReason || loading}\r\n                        className={`flex-1 py-4 rounded-2xl items-center flex-row justify-center ${selectedReason ? 'bg-red-500' : 'bg-gray-200'\r\n                            }`}\r\n                    >\r\n                        {loading ? (\r\n                            <ActivityIndicator color=\"white\" />\r\n                        ) : (\r\n                            <Text className=\"font-bold text-white\">Confirm</Text>\r\n                        )}\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </View>\r\n        </SafeAreaView>\r\n    );\r\n};\r\n\r\nexport default CancellationScreen;\r\n","\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { Dimensions, Text, View } from 'react-native';\r\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\r\nimport Animated, { useAnimatedStyle, useSharedValue, withSpring } from 'react-native-reanimated';\r\nimport { useWebSocket } from '../context/WebSocketContext';\r\n\r\nconst { width, height } = Dimensions.get('window');\r\n\r\nconst ConnectionStatus = () => {\r\n    const { connectionStatus } = useWebSocket();\r\n\r\n    const translateX = useSharedValue(width - 120); // Initial X position\r\n    const translateY = useSharedValue(height - 220); // Initial Y position\r\n    const context = useSharedValue({ x: 0, y: 0 });\r\n\r\n    const dragGesture = Gesture.Pan()\r\n        .onStart(() => {\r\n            context.value = { x: translateX.value, y: translateY.value };\r\n        })\r\n        .onUpdate((event) => {\r\n            translateX.value = event.translationX + context.value.x;\r\n            translateY.value = event.translationY + context.value.y;\r\n        })\r\n        .onEnd(() => {\r\n            // Optional: Snap to edge\r\n            if (translateX.value > width / 2) {\r\n                translateX.value = withSpring(width - 150, { damping: 15 });\r\n            } else {\r\n                translateX.value = withSpring(20, { damping: 15 });\r\n            }\r\n        });\r\n\r\n    const rStyle = useAnimatedStyle(() => {\r\n        return {\r\n            transform: [\r\n                { translateX: translateX.value },\r\n                { translateY: translateY.value }\r\n            ],\r\n        };\r\n    });\r\n\r\n    let iconName, statusText, colorClass, bgColorClass;\r\n\r\n    switch (connectionStatus) {\r\n        case 'connected':\r\n            iconName = \"wifi\";\r\n            statusText = \"Connected\";\r\n            colorClass = \"text-green-600\";\r\n            bgColorClass = \"bg-green-50 border-green-200\";\r\n            break;\r\n        case 'connecting':\r\n            iconName = \"time\";\r\n            statusText = \"Connecting...\";\r\n            colorClass = \"text-yellow-600\";\r\n            bgColorClass = \"bg-yellow-50 border-yellow-200\";\r\n            break;\r\n        default:\r\n            iconName = \"wifi-outline\"; // or wifi-off if available in set\r\n            statusText = \"Disconnected\";\r\n            colorClass = \"text-red-600\";\r\n            bgColorClass = \"bg-red-50 border-red-200\";\r\n            break;\r\n    }\r\n\r\n    // Only render if you want it visible always, or conditionally\r\n    return (\r\n        <GestureDetector gesture={dragGesture}>\r\n            <Animated.View\r\n                style={[\r\n                    { position: 'absolute', zIndex: 100 },\r\n                    rStyle\r\n                ]}\r\n            >\r\n                <View className={`flex-row items-center px-4 py-2 rounded-full border shadow-sm ${bgColorClass}`}>\r\n                    <Ionicons name={iconName} size={16} className={`mr-2 ${colorClass}`} style={{ marginRight: 6 }} color={connectionStatus === 'connected' ? '#16a34a' : connectionStatus === 'connecting' ? '#ca8a04' : '#dc2626'} />\r\n                    <Text className={`text-xs font-bold ${colorClass}`}>\r\n                        {statusText}\r\n                    </Text>\r\n                </View>\r\n            </Animated.View>\r\n        </GestureDetector>\r\n    );\r\n};\r\n\r\nexport default ConnectionStatus;\r\n","import React, { useEffect, useRef } from 'react';\r\nimport { StyleSheet, Text, View } from 'react-native';\r\n\r\n/**\r\n * Web-compatible MapView component\r\n * Uses Google Maps Embed API for web\r\n */\r\nconst WebMapView = ({\r\n    children,\r\n    style,\r\n    initialRegion,\r\n    region,\r\n    onRegionChange,\r\n    onRegionChangeComplete,\r\n    provider,\r\n    showsUserLocation,\r\n    followsUserLocation,\r\n    ...props\r\n}) => {\r\n    const mapRef = useRef(null);\r\n    const [mapLoaded, setMapLoaded] = React.useState(false);\r\n\r\n    // Use region or initialRegion\r\n    const currentRegion = region || initialRegion || {\r\n        latitude: 28.6139,\r\n        longitude: 77.2090,\r\n        latitudeDelta: 0.0922,\r\n        longitudeDelta: 0.0421,\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Load Google Maps script\r\n        if (!window.google) {\r\n            const script = document.createElement('script');\r\n            script.src = `https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKW4nM5UPKsNHEMhhPcSilNv3I`;\r\n            script.async = true;\r\n            script.defer = true;\r\n            script.onload = () => {\r\n                setMapLoaded(true);\r\n                initializeMap();\r\n            };\r\n            document.head.appendChild(script);\r\n        } else {\r\n            setMapLoaded(true);\r\n            initializeMap();\r\n        }\r\n    }, []);\r\n\r\n    const initializeMap = () => {\r\n        if (mapRef.current && window.google) {\r\n            const map = new window.google.maps.Map(mapRef.current, {\r\n                center: {\r\n                    lat: currentRegion.latitude,\r\n                    lng: currentRegion.longitude\r\n                },\r\n                zoom: 13,\r\n                mapTypeControl: false,\r\n                streetViewControl: false,\r\n                fullscreenControl: false,\r\n            });\r\n\r\n            // Store map instance for children to access\r\n            mapRef.current.googleMap = map;\r\n\r\n            // Render markers\r\n            if (children) {\r\n                React.Children.forEach(children, (child) => {\r\n                    if (child && child.type === Marker) {\r\n                        renderMarker(map, child.props);\r\n                    } else if (child && child.type === Polyline) {\r\n                        renderPolyline(map, child.props);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const renderMarker = (map, props) => {\r\n        if (props.coordinate && window.google) {\r\n            new window.google.maps.Marker({\r\n                position: {\r\n                    lat: props.coordinate.latitude,\r\n                    lng: props.coordinate.longitude\r\n                },\r\n                map: map,\r\n                title: props.title || '',\r\n            });\r\n        }\r\n    };\r\n\r\n    const renderPolyline = (map, props) => {\r\n        if (props.coordinates && window.google) {\r\n            const path = props.coordinates.map(coord => ({\r\n                lat: coord.latitude,\r\n                lng: coord.longitude,\r\n            }));\r\n\r\n            new window.google.maps.Polyline({\r\n                path: path,\r\n                map: map,\r\n                strokeColor: props.strokeColor || '#000',\r\n                strokeWeight: props.strokeWidth || 2,\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (mapLoaded && mapRef.current?.googleMap) {\r\n            initializeMap();\r\n        }\r\n    }, [children, mapLoaded]);\r\n\r\n    return (\r\n        <View style={[styles.container, style]}>\r\n            <div\r\n                ref={mapRef}\r\n                style={{\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    minHeight: 400,\r\n                }}\r\n            />\r\n            {!mapLoaded && (\r\n                <View style={styles.loading}>\r\n                    <Text>Loading map...</Text>\r\n                </View>\r\n            )}\r\n        </View>\r\n    );\r\n};\r\n\r\n/**\r\n * Web-compatible Marker component\r\n */\r\nconst Marker = ({ coordinate, title, description, onPress, children, ...props }) => {\r\n    // This is a placeholder - actual rendering happens in WebMapView\r\n    return null;\r\n};\r\n\r\n/**\r\n * Web-compatible Polyline component\r\n */\r\nconst Polyline = ({ coordinates, strokeColor, strokeWidth, ...props }) => {\r\n    // This is a placeholder - actual rendering happens in WebMapView\r\n    return null;\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        overflow: 'hidden',\r\n    },\r\n    loading: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: '#f0f0f0',\r\n    },\r\n});\r\n\r\nWebMapView.Marker = Marker;\r\nWebMapView.Polyline = Polyline;\r\n\r\nexport default WebMapView;\r\nexport { Marker, Polyline };\r\n","// Web map component - uses WebMapView\r\nimport WebMapView, { Marker, Polyline } from './WebMapView';\r\n\r\nconst PROVIDER_GOOGLE = 'google';\r\n\r\nexport { WebMapView as default, Marker, Polyline, PROVIDER_GOOGLE };\r\n","import api from './api';\r\n\r\nlet cachedAds = [];\r\nlet lastFetchTime = 0;\r\nconst CACHE_DURATION = 15 * 60 * 1000; // 15 minutes\r\n\r\nexport const getMapAds = async () => {\r\n    const now = Date.now();\r\n\r\n    // Return cached data if within duration\r\n    if (cachedAds.length > 0 && (now - lastFetchTime < CACHE_DURATION)) {\r\n        console.log(\"[AdsCache] Returning cached ads\");\r\n        return cachedAds;\r\n    }\r\n\r\n    try {\r\n        console.log(\"[AdsCache] Fetching new ads from server\");\r\n        const res = await api.get('/core/map-ads/');\r\n        if (Array.isArray(res.data)) {\r\n            cachedAds = res.data;\r\n            lastFetchTime = now;\r\n            return cachedAds;\r\n        }\r\n    } catch (e) {\r\n        console.log(\"Error fetching ads:\", e);\r\n        // Fallback: If network fails but we have data, return it even if expired\r\n        if (cachedAds.length > 0) {\r\n            console.log(\"[AdsCache] Network failed, returning stale cache\");\r\n            return cachedAds;\r\n        }\r\n    }\r\n    return [];\r\n};\r\n","import { Ionicons, MaterialCommunityIcons } from '@expo/vector-icons';\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\nimport * as Location from 'expo-location';\r\nimport * as SecureStore from 'expo-secure-store';\r\nimport { useEffect, useState } from 'react';\r\nimport { Dimensions, Image, StatusBar, Text, TouchableOpacity, View } from 'react-native';\r\nimport { Gesture, GestureDetector, GestureHandlerRootView } from 'react-native-gesture-handler';\r\nimport Animated, { useAnimatedStyle, useSharedValue, withTiming } from 'react-native-reanimated';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport ConnectionStatus from '../components/ConnectionStatus';\r\nimport MapView, { Marker, PROVIDER_GOOGLE } from '../components/PlatformMap';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { getMapAds } from '../utils/adsCache';\r\nimport api from '../utils/api';\r\n\r\nconst { width, height } = Dimensions.get('window');\r\n\r\n// Dynamic Snap Points\r\nconst SNAP_POINTS = {\r\n    COLLAPSED: height * 0.75, // Lower on screen (showing less)\r\n    EXPANDED: height * 0.4,   // Higher on screen (showing more)\r\n};\r\n\r\nconst DashboardScreen = ({ navigation }) => {\r\n    const { logout, profile } = useAuth();\r\n    const userProfile = profile || {}; // Safety fallback\r\n\r\n    const [recentHistory, setRecentHistory] = useState([]);\r\n\r\n    const [adsData, setAdsData] = useState([]);\r\n    const [selectedAd, setSelectedAd] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const loadAds = async () => {\r\n            const ads = await getMapAds();\r\n            setAdsData(ads);\r\n        };\r\n        loadAds();\r\n    }, []);\r\n\r\n    const [activeJob, setActiveJob] = useState(null);\r\n\r\n    // Animation Values\r\n    const translateY = useSharedValue(SNAP_POINTS.COLLAPSED);\r\n    const context = useSharedValue({ y: 0 });\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = navigation.addListener('focus', () => {\r\n            checkActiveJob();\r\n            getUserLocation();\r\n        });\r\n\r\n        fetchRecentHistory();\r\n        checkActiveJob();\r\n        getUserLocation();\r\n\r\n        return unsubscribe;\r\n    }, [navigation]);\r\n\r\n    const getUserLocation = async () => {\r\n        try {\r\n            const { status } = await Location.requestForegroundPermissionsAsync();\r\n            if (status !== 'granted') {\r\n                console.log('Permission to access location was denied');\r\n                return;\r\n            }\r\n\r\n            const location = await Location.getCurrentPositionAsync({});\r\n            setRegion({\r\n                latitude: location.coords.latitude,\r\n                longitude: location.coords.longitude,\r\n                latitudeDelta: 0.005,\r\n                longitudeDelta: 0.005,\r\n            });\r\n        } catch (err) {\r\n            console.warn(\"Error getting location:\", err);\r\n        }\r\n    };\r\n\r\n    const checkActiveJob = async () => {\r\n        try {\r\n            const saved = await SecureStore.getItemAsync('mechanicAcceptedData'); // ACTIVE_JOB_STORAGE_KEY\r\n            if (saved) {\r\n                const parsed = JSON.parse(saved);\r\n                console.log(\"Found active job:\", parsed.request_id);\r\n                setActiveJob(parsed);\r\n                // We no longer auto-navigate, just show the card\r\n            } else {\r\n                setActiveJob(null);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to check active job\", error);\r\n        }\r\n    };\r\n\r\n    const handleOpenActiveJob = () => {\r\n        if (activeJob) {\r\n            navigation.navigate(\"MechanicFound\", {\r\n                data: {\r\n                    mechanic_details: activeJob.mechanic,\r\n                    job_id: activeJob.request_id,\r\n                },\r\n                userLocation: activeJob.user_location\r\n            });\r\n        }\r\n    };\r\n\r\n    // ... history code ...\r\n\r\n    const fetchRecentHistory = async () => {\r\n        try {\r\n            const res = await api.get('/Profile/UserHistory/');\r\n            const sorted = res.data?.sort((a, b) => new Date(b.created_at) - new Date(a.created_at)) || [];\r\n            setRecentHistory(sorted.slice(0, 3));\r\n        } catch (err) {\r\n            console.error(\"Dashboard history fetch error:\", err);\r\n        }\r\n    };\r\n\r\n    // ... gestures ...\r\n    // --- Bottom Sheet Gesture ---\r\n    const gesture = Gesture.Pan()\r\n        .onStart(() => {\r\n            context.value = { y: translateY.value };\r\n        })\r\n        .onUpdate((event) => {\r\n            translateY.value = event.translationY + context.value.y;\r\n            // Limit movement\r\n            translateY.value = Math.max(translateY.value, SNAP_POINTS.EXPANDED - 50);\r\n        })\r\n        .onEnd(() => {\r\n            if (translateY.value < (SNAP_POINTS.COLLAPSED + SNAP_POINTS.EXPANDED) / 2) {\r\n                translateY.value = withTiming(SNAP_POINTS.EXPANDED, { duration: 300 });\r\n            } else {\r\n                translateY.value = withTiming(SNAP_POINTS.COLLAPSED, { duration: 300 });\r\n            }\r\n        });\r\n\r\n    const rBottomSheetStyle = useAnimatedStyle(() => {\r\n        return {\r\n            transform: [{ translateY: translateY.value }],\r\n        };\r\n    });\r\n\r\n    // Default location (Fallback until permissions granted)\r\n    const [region, setRegion] = useState({\r\n        latitude: 23.0225,\r\n        longitude: 72.5714,\r\n        latitudeDelta: 0.1, // Zoomed out initially\r\n        longitudeDelta: 0.1,\r\n    });\r\n\r\n    const getStatusIcon = (type) => type === 'car' ? 'car-sport' : 'motorbike';\r\n\r\n    const mapStyle = [\r\n        { \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#f5f7fa\" }] },\r\n        { \"elementType\": \"labels.icon\", \"stylers\": [{ \"visibility\": \"off\" }] },\r\n        { \"elementType\": \"labels.text.fill\", \"stylers\": [{ \"color\": \"#4a5568\" }] },\r\n        { \"elementType\": \"labels.text.stroke\", \"stylers\": [{ \"color\": \"#f5f7fa\" }] },\r\n        { \"featureType\": \"administrative\", \"elementType\": \"geometry.stroke\", \"stylers\": [{ \"color\": \"#cbd5e0\" }] },\r\n        { \"featureType\": \"administrative.land_parcel\", \"stylers\": [{ \"visibility\": \"off\" }] },\r\n        { \"featureType\": \"poi\", \"stylers\": [{ \"visibility\": \"off\" }] },\r\n        { \"featureType\": \"poi.park\", \"stylers\": [{ \"visibility\": \"on\" }] },\r\n        { \"featureType\": \"poi.park\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#e6f4ea\" }] },\r\n        { \"featureType\": \"poi.park\", \"elementType\": \"geometry.fill\", \"stylers\": [{ \"color\": \"#b7e6c6\" }] },\r\n        { \"featureType\": \"road\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#ffffff\" }] },\r\n        { \"featureType\": \"road\", \"elementType\": \"geometry.stroke\", \"stylers\": [{ \"color\": \"#e2e8f0\", \"weight\": 1 }] },\r\n        { \"featureType\": \"road.arterial\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#edf2f7\" }] },\r\n        { \"featureType\": \"road.highway\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#e2e8f0\" }] },\r\n        { \"featureType\": \"road.highway\", \"elementType\": \"geometry.stroke\", \"stylers\": [{ \"color\": \"#cbd5e0\", \"weight\": 1.5 }] },\r\n        { \"featureType\": \"road.local\", \"elementType\": \"labels.text.fill\", \"stylers\": [{ \"color\": \"#a0aec0\" }] },\r\n        { \"featureType\": \"transit\", \"stylers\": [{ \"visibility\": \"off\" }] },\r\n        { \"featureType\": \"water\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#4299e1\" }] },\r\n        { \"featureType\": \"water\", \"elementType\": \"labels.text.fill\", \"stylers\": [{ \"color\": \"#2d3748\" }] },\r\n        { \"featureType\": \"landscape.natural\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#e6f4ea\" }] },\r\n        { \"featureType\": \"landscape.natural.landcover\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#c6f6d5\" }] },\r\n        { \"featureType\": \"landscape.natural.terrain\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#d4edda\" }] }\r\n    ];\r\n\r\n    return (\r\n        <GestureHandlerRootView style={{ flex: 1 }}>\r\n            <View className=\"flex-1 bg-white\">\r\n                <StatusBar barStyle=\"dark-content\" />\r\n\r\n                {/* Header - Transparent/Overlay */}\r\n                <View className=\"absolute top-0 left-0 right-0 z-10\">\r\n                    <SafeAreaView className=\"bg-white/90 shadow-sm border-b border-gray-200\">\r\n                        <View className=\"px-4 py-3 flex-row items-center justify-between\">\r\n                            <View className=\"flex-row items-center\">\r\n                                <Image\r\n                                    source={require('../../assets/logo.png')}\r\n                                    className=\"w-10 h-10\"\r\n                                    resizeMode=\"contain\"\r\n                                />\r\n                                <Text className=\"text-xl font-bold text-gray-900 tracking-wide ml-2\">Mechanic Setu</Text>\r\n                            </View>\r\n\r\n                            <TouchableOpacity\r\n                                onPress={() => navigation.navigate('Settings')}\r\n                                className=\"p-2 bg-gray-100 rounded-full\"\r\n                            >\r\n                                <Ionicons name=\"settings-outline\" size={24} color=\"#374151\" />\r\n                            </TouchableOpacity>\r\n                        </View>\r\n                    </SafeAreaView>\r\n                </View>\r\n\r\n                {/* Map Background */}\r\n                <MapView\r\n                    provider={PROVIDER_GOOGLE}\r\n                    style={{ flex: 1, width: '100%', height: '100%' }}\r\n                    region={region}\r\n                    customMapStyle={mapStyle}\r\n                    showsUserLocation={true}\r\n                    showsMyLocationButton={false}\r\n                >\r\n                    {adsData.map((ad) => (\r\n                        <Marker\r\n                            key={`ad-${ad.id}`}\r\n                            coordinate={{ latitude: ad.latitude, longitude: ad.longitude }}\r\n                            onPress={() => setSelectedAd(ad)}\r\n                        >\r\n                            <View className=\"bg-white p-0.5 rounded-full border-2 border-amber-400 shadow-lg overflow-hidden\" style={{ width: 36, height: 36 }}>\r\n                                <Image\r\n                                    source={{ uri: ad.logo }}\r\n                                    className=\"w-full h-full rounded-full\"\r\n                                    resizeMode=\"cover\"\r\n                                />\r\n                            </View>\r\n                        </Marker>\r\n                    ))}\r\n                </MapView>\r\n\r\n                {/* Floating Connection Status */}\r\n                <ConnectionStatus />\r\n\r\n                {/* Draggable Bottom Sheet */}\r\n                <GestureDetector gesture={gesture}>\r\n                    <Animated.View\r\n                        style={[\r\n                            {\r\n                                position: 'absolute',\r\n                                left: 0,\r\n                                right: 0,\r\n                                height: height, // Content height\r\n                                top: 0, // We offset using translateY\r\n                                backgroundColor: 'white',\r\n                                borderTopLeftRadius: 30,\r\n                                borderTopRightRadius: 30,\r\n                                shadowColor: \"#000\",\r\n                                shadowOffset: {\r\n                                    width: 0,\r\n                                    height: -3,\r\n                                },\r\n                                shadowOpacity: 0.1,\r\n                                shadowRadius: 5,\r\n                                elevation: 10,\r\n                                paddingTop: 10\r\n                            },\r\n                            rBottomSheetStyle\r\n                        ]}\r\n                    >\r\n                        {/* Drag Handle */}\r\n                        <View className=\"w-12 h-1.5 bg-gray-300 rounded-full self-center mb-2\" />\r\n\r\n                        <View className=\"px-6 pb-20\">\r\n                            {/* User Profile Card */}\r\n                            <TouchableOpacity\r\n                                onPress={() => navigation.navigate('Profile')}\r\n                                className=\"flex-row items-center bg-gray-50 p-4 rounded-2xl mb-6 border border-gray-100\"\r\n                            >\r\n                                {userProfile.profile_pic ? (\r\n                                    <Image source={{ uri: userProfile.profile_pic }} className=\"w-12 h-12 rounded-full mr-4\" />\r\n                                ) : (\r\n                                    <View className=\"w-12 h-12 rounded-full bg-blue-100 items-center justify-center mr-4\">\r\n                                        <Text className=\"text-xl font-bold text-blue-600\">\r\n                                            {userProfile.first_name ? userProfile.first_name[0] : 'U'}\r\n                                        </Text>\r\n                                    </View>\r\n                                )}\r\n                                <View className=\"flex-1\">\r\n                                    <Text className=\"text-lg font-bold text-gray-900\">\r\n                                        {userProfile.first_name ? `${userProfile.first_name} ${userProfile.last_name || ''}` : 'Welcome User'}\r\n                                    </Text>\r\n                                    <Text className=\"text-sm text-gray-500\">{userProfile.email || 'No Email'}</Text>\r\n                                </View>\r\n                                <View className=\"bg-gray-200 p-2 rounded-full\">\r\n                                    <Ionicons name=\"arrow-forward\" size={20} color=\"#4b5563\" />\r\n                                </View>\r\n                            </TouchableOpacity>\r\n\r\n                            {/* Active Job or Request Button */}\r\n                            {activeJob ? (\r\n                                <TouchableOpacity\r\n                                    className=\"w-full p-4 rounded-xl bg-green-500 shadow-lg shadow-green-500/30 active:scale-95 transition-transform mb-8 items-center flex-row justify-between\"\r\n                                    onPress={handleOpenActiveJob}\r\n                                >\r\n                                    <View>\r\n                                        <Text className=\"text-white font-bold text-lg\">Active Service</Text>\r\n                                        <Text className=\"text-green-100 text-sm\">Mechanic {activeJob.mechanic?.first_name} is active</Text>\r\n                                    </View>\r\n                                    <View className=\"bg-white/20 p-2 rounded-full\">\r\n                                        <Ionicons name=\"navigate-circle\" size={32} color=\"white\" />\r\n                                    </View>\r\n                                </TouchableOpacity>\r\n                            ) : (\r\n                                <TouchableOpacity\r\n                                    className=\"w-full py-4 rounded-xl bg-blue-500 shadow-lg shadow-blue-500/30 active:scale-95 transition-transform mb-8\"\r\n                                    onPress={() => navigation.navigate(\"ServiceRequest\")}\r\n                                >\r\n                                    <LinearGradient\r\n                                        colors={['#3b82f6', '#2563eb']}\r\n                                        className=\"absolute inset-0 rounded-xl\"\r\n                                    />\r\n                                    <Text className=\"text-white text-center font-bold text-lg tracking-wide\">\r\n                                        Request Now\r\n                                    </Text>\r\n                                </TouchableOpacity>\r\n                            )}\r\n\r\n                            {/* Recent Activity Section */}\r\n                            <View className=\"mb-4\">\r\n                                <Text className=\"text-lg font-bold text-gray-900 mb-4\">Recent Activity</Text>\r\n                                {recentHistory.length > 0 ? (\r\n                                    recentHistory.map((item) => (\r\n                                        <View key={item.id} className=\"flex-row items-center justify-between p-4 bg-gray-50 rounded-xl mb-3 border border-gray-100\">\r\n                                            <View className=\"flex-row items-center space-x-3\">\r\n                                                <View className={`p-2 rounded-full ${item.status === 'COMPLETED' ? 'bg-green-100' : 'bg-gray-200'}`}>\r\n                                                    {item.vehical_type === 'car' ? (\r\n                                                        <Ionicons name=\"car-sport\" size={18} color={item.status === 'COMPLETED' ? '#16a34a' : '#6b7280'} />\r\n                                                    ) : (\r\n                                                        <MaterialCommunityIcons name=\"motorbike\" size={18} color={item.status === 'COMPLETED' ? '#16a34a' : '#6b7280'} />\r\n                                                    )}\r\n                                                </View>\r\n                                                <View>\r\n                                                    <Text className=\"text-gray-900 font-bold\">{item.problem}</Text>\r\n                                                    <Text className=\"text-xs text-gray-500\">{new Date(item.created_at).toLocaleDateString()}</Text>\r\n                                                </View>\r\n                                            </View>\r\n                                            <Text className={`text-xs font-bold ${item.status === 'COMPLETED' ? 'text-green-600' :\r\n                                                item.status === 'CANCELLED' ? 'text-red-500' : 'text-gray-500'\r\n                                                }`}>\r\n                                                {item.status}\r\n                                            </Text>\r\n                                        </View>\r\n                                    ))\r\n                                ) : (\r\n                                    <Text className=\"text-gray-400 text-center italic\">No recent activity.</Text>\r\n                                )}\r\n                            </View>\r\n                        </View>\r\n                    </Animated.View>\r\n                </GestureDetector>\r\n            </View>\r\n        </GestureHandlerRootView>\r\n    );\r\n};\r\n\r\nexport default DashboardScreen;\r\n","import { Ionicons } from '@expo/vector-icons';\r\nimport { Dimensions, Image, Text, TouchableOpacity, View } from 'react-native';\r\n\r\nconst { width } = Dimensions.get('window');\r\n\r\nexport const ImageAdCard = ({ item }) => (\r\n    <TouchableOpacity\r\n        className=\"rounded-3xl shadow-lg overflow-hidden mb-4 relative\"\r\n        style={{ width: '100%', backgroundColor: item.bgColor }}\r\n    >\r\n        {/* Ads Badge */}\r\n        <View className=\"absolute top-3 left-3 bg-white/90 px-3 py-1 rounded-full z-10 flex-row items-center\">\r\n            <View className=\"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5\" />\r\n            <Text className=\"text-gray-600 font-bold text-xs\">Ad</Text>\r\n        </View>\r\n\r\n        {/* Badge (Limited Offer, Price, etc) */}\r\n        {item.badge && (\r\n            <View\r\n                className=\"absolute top-3 right-3 px-3 py-1.5 rounded-full z-10\"\r\n                style={{ backgroundColor: item.accentColor }}\r\n            >\r\n                <Text className=\"text-white font-black text-xs uppercase tracking-wider\">\r\n                    {item.badge}\r\n                </Text>\r\n            </View>\r\n        )}\r\n\r\n        {/* Content Container */}\r\n        <View className=\"p-5\">\r\n            {/* Main Image */}\r\n            <View className=\"items-center justify-center mb-4 mt-4\">\r\n                <Image\r\n                    source={{ uri: item.image }}\r\n                    style={{ width: 120, height: 120 }}\r\n                    resizeMode=\"contain\"\r\n                />\r\n            </View>\r\n\r\n            {/* Text Content */}\r\n            <View className=\"mb-4\">\r\n                <Text className=\"font-black text-xl mb-1\" style={{ color: item.accentColor }}>\r\n                    {item.title}\r\n                </Text>\r\n                <Text className=\"text-gray-700 font-bold text-base mb-2\">\r\n                    {item.subtitle}\r\n                </Text>\r\n                <Text className=\"text-gray-600 text-sm leading-5\" numberOfLines={2}>\r\n                    {item.description}\r\n                </Text>\r\n            </View>\r\n\r\n            {/* CTA Button */}\r\n            <TouchableOpacity\r\n                className=\"py-3 px-6 rounded-xl flex-row items-center justify-center\"\r\n                style={{ backgroundColor: item.accentColor }}\r\n            >\r\n                <Text className=\"text-white font-bold text-sm mr-2\">\r\n                    {item.ctaText}\r\n                </Text>\r\n                <Ionicons name=\"arrow-forward\" size={16} color=\"white\" />\r\n            </TouchableOpacity>\r\n        </View>\r\n    </TouchableOpacity>\r\n);\r\n","import { Ionicons } from '@expo/vector-icons';\r\nimport { useIsFocused, useNavigation, useRoute } from '@react-navigation/native';\r\nimport * as SecureStore from 'expo-secure-store';\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport {\r\n    Alert,\r\n    Dimensions,\r\n    FlatList,\r\n    Image,\r\n    StyleSheet,\r\n    Text,\r\n    TouchableOpacity,\r\n    View\r\n} from 'react-native';\r\nimport { Gesture, GestureDetector, GestureHandlerRootView, ScrollView } from 'react-native-gesture-handler';\r\nimport Animated, {\r\n    useAnimatedStyle,\r\n    useSharedValue,\r\n    withRepeat,\r\n    withTiming\r\n} from 'react-native-reanimated';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport { ImageAdCard } from '../components/ImageAdCard';\r\nimport MapView, { Marker, PROVIDER_GOOGLE } from '../components/PlatformMap';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useWebSocket } from '../context/WebSocketContext';\r\nimport { getMapAds } from '../utils/adsCache';\r\nimport { navigate, resetRoot } from '../utils/navigationRef';\r\n\r\nconst { width, height } = Dimensions.get('window');\r\n\r\nconst SNAP_POINTS = {\r\n    COLLAPSED: height * 0.65,\r\n    EXPANDED: height * 0.35,\r\n};\r\n\r\nconst mapStyle = [\r\n    { \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#f5f5f5\" }] },\r\n    { \"elementType\": \"labels.icon\", \"stylers\": [{ \"visibility\": \"off\" }] },\r\n    { \"featureType\": \"road\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#ffffff\" }] },\r\n    { \"featureType\": \"water\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#e9e9e9\" }] }\r\n];\r\n\r\nconst FORM_STORAGE_KEY = 'punctureRequestFormData';\r\n\r\n\r\nconst FindingMechanicScreen = () => {\r\n    const navigation = useNavigation();\r\n    const isFocused = useIsFocused();\r\n    const { profile: authUser } = useAuth();\r\n    const route = useRoute();\r\n    const mapRef = useRef(null);\r\n    const { requestId, latitude, longitude, vehicleType: paramVehicle, problem: paramProblem } = route.params || {};\r\n\r\n    const [jobDetails, setJobDetails] = useState(null);\r\n    const userData = authUser || {};\r\n\r\n    const [adsData, setAdsData] = useState([]);\r\n    const [selectedAd, setSelectedAd] = useState(null);\r\n\r\n    // FIX: Mounted Ref to prevent memory leaks/crashes\r\n    const isMounted = useRef(true);\r\n    useEffect(() => {\r\n        isMounted.current = true;\r\n        return () => { isMounted.current = false; };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const loadAds = async () => {\r\n            const ads = await getMapAds();\r\n            setAdsData(ads);\r\n        };\r\n        loadAds();\r\n    }, []);\r\n\r\n\r\n\r\n    // FIXED: Use a memoized coordinate to prevent the icon from \"moving\" during state re-renders\r\n    const staticLocation = useMemo(() => ({\r\n        latitude: latitude || 23.0225,\r\n        longitude: longitude || 72.5714\r\n    }), [latitude, longitude]);\r\n\r\n    useEffect(() => {\r\n        const loadJobDetails = async () => {\r\n            try {\r\n                const savedForm = await SecureStore.getItemAsync(FORM_STORAGE_KEY);\r\n                if (savedForm) {\r\n                    const formData = JSON.parse(savedForm);\r\n                    // Initialize with requestId if available\r\n                    setJobDetails({\r\n                        ...formData,\r\n                        id: requestId || formData.id\r\n                    });\r\n                } else if (requestId) {\r\n                    // If no saved form, at least set the ID from params\r\n                    setJobDetails({\r\n                        vehicleType: paramVehicle,\r\n                        problem: paramProblem,\r\n                        id: requestId\r\n                    });\r\n                }\r\n            } catch (e) {\r\n                console.error(\"Failed to load form data\", e);\r\n            }\r\n        };\r\n        loadJobDetails();\r\n    }, [requestId]);\r\n    // console.log(jobDetails)\r\n    const { socket, lastMessage } = useWebSocket();\r\n\r\n    useEffect(() => {\r\n        // SAFETY CHECK: Stop if component is unmounted OR screen is not focused\r\n        if (!isMounted.current || !lastMessage || !isFocused) return;\r\n\r\n        console.log(\"[FindingMechanic] New Message:\", lastMessage);\r\n        const { type, service_request, message, job_id } = lastMessage;\r\n\r\n        // 1. Handle Job Confirmation\r\n        if (type === 'new_job' && service_request) {\r\n            if (service_request.id === parseInt(requestId)) {\r\n                console.log(\"[FindingMechanic] Server confirmed job is live.\");\r\n\r\n                // Safety check before setting state\r\n                if (isMounted.current) {\r\n                    setJobDetails({\r\n                        vehicleType: service_request.vehical_type,\r\n                        problem: service_request.problem,\r\n                        location: service_request.location,\r\n                        id: service_request.id\r\n                    });\r\n                }\r\n\r\n                if (typeof startFakeMechanicSimulation === 'function') {\r\n                    startFakeMechanicSimulation();\r\n                }\r\n            }\r\n        }\r\n\r\n        // 2. Mechanic Found\r\n        else if (lastMessage.type === 'mechanic_accepted') {\r\n            navigate(\"MechanicFound\", {\r\n                data: lastMessage,\r\n                userLocation: { latitude, longitude },\r\n                vehicleType: jobDetails?.vehicleType || paramVehicle,\r\n                problem: jobDetails?.problem || paramProblem\r\n            });\r\n        }\r\n\r\n        // 3. Error Cases\r\n        else if (type === 'no_mechanic_found') {\r\n            const msgJobId = job_id || (service_request?.id);\r\n            if (msgJobId && String(msgJobId) !== String(requestId)) {\r\n                return;\r\n            }\r\n            navigate(\"NearbyMechanics\", {\r\n                jobDetails: jobDetails || { vehicleType: paramVehicle, problem: paramProblem },\r\n                userLocation: { latitude, longitude }\r\n            });\r\n        }\r\n        else if (type === 'job_expired') {\r\n            const alertTitle = \"Request Expired\";\r\n            const alertMessage = message || \"Please try again later.\";\r\n\r\n            // Use global navigation safely\r\n            Alert.alert(\r\n                alertTitle,\r\n                alertMessage,\r\n                [\r\n                    {\r\n                        text: \"Try Again\",\r\n                        onPress: () => resetRoot('Main')\r\n                    }\r\n                ],\r\n                { cancelable: false }\r\n            );\r\n        }\r\n    }, [lastMessage, isFocused]);\r\n\r\n    //  Performance: Use shared value for timer instead of state to avoid re-renders\r\n    const searchTimeSeconds = useSharedValue(0);\r\n    const [displayTime, setDisplayTime] = useState('0:00');\r\n\r\n    useEffect(() => {\r\n        // Update display time with minimal re-renders (only once per second)\r\n        const interval = setInterval(() => {\r\n            searchTimeSeconds.value += 1;\r\n            const mins = Math.floor(searchTimeSeconds.value / 60);\r\n            const secs = searchTimeSeconds.value % 60;\r\n            setDisplayTime(`${mins}:${secs.toString().padStart(2, '0')}`);\r\n        }, 1000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const translateY = useSharedValue(SNAP_POINTS.COLLAPSED);\r\n    const context = useSharedValue({ y: 0 });\r\n    const scanX = useSharedValue(-width);\r\n\r\n    useEffect(() => {\r\n        scanX.value = withRepeat(withTiming(width, { duration: 2000 }), -1, false);\r\n    }, []);\r\n\r\n    //  Memoized ads data to prevent recreation on every render\r\n    const RECOMMENDED_ADS = useMemo(() => [\r\n        {\r\n            id: '1',\r\n            type: 'image',\r\n            title: 'Flat 20% OFF',\r\n            subtitle: 'on Premium Car Servicing',\r\n            description: 'Book comprehensive car service at your doorstep',\r\n            bgColor: '#EEF2FF',\r\n            accentColor: '#4F46E5',\r\n            image: 'https://cdn-icons-png.flaticon.com/512/3097/3097136.png',\r\n            ctaText: 'Book Service',\r\n            badge: 'LIMITED OFFER'\r\n        },\r\n        {\r\n            id: '2',\r\n            type: 'image',\r\n            title: 'Roadside Assistance',\r\n            subtitle: '24/7 Emergency Support',\r\n            description: 'Get instant help anywhere, anytime',\r\n            bgColor: '#FEF3C7',\r\n            accentColor: '#F59E0B',\r\n            image: 'https://cdn-icons-png.flaticon.com/512/2917/2917995.png',\r\n            ctaText: 'Subscribe Now',\r\n            badge: '99/Year'\r\n        },\r\n        {\r\n            id: '3',\r\n            type: 'image',\r\n            title: 'Castrol Engine Oil',\r\n            subtitle: 'Magnatec Protection',\r\n            description: 'Premium engine oil with 75% less engine wear',\r\n            bgColor: '#D1FAE5',\r\n            accentColor: '#059669',\r\n            image: 'https://cdn-icons-png.flaticon.com/512/2917/2917242.png',\r\n            ctaText: 'Shop Now',\r\n            badge: 'From 499'\r\n        },\r\n        {\r\n            id: '4',\r\n            type: 'image',\r\n            title: 'Tyre Replacement',\r\n            subtitle: 'Top Brands Available',\r\n            description: 'Get the best deals on premium tyres',\r\n            bgColor: '#FEE2E2',\r\n            accentColor: '#DC2626',\r\n            image: 'https://cdn-icons-png.flaticon.com/512/3097/3097039.png',\r\n            ctaText: 'View Offers',\r\n            badge: 'Save Big'\r\n        },\r\n        {\r\n            id: '5',\r\n            type: 'image',\r\n            title: 'Battery Check',\r\n            subtitle: 'Free Inspection',\r\n            description: 'Avoid unexpected breakdowns with battery testing',\r\n            bgColor: '#DBEAFE',\r\n            accentColor: '#2563EB',\r\n            image: 'https://cdn-icons-png.flaticon.com/512/2917/2917439.png',\r\n            ctaText: 'Book Now',\r\n            badge: 'FREE'\r\n        },\r\n    ], []);\r\n\r\n    const renderAdItem = ({ item }) => (\r\n        <TouchableOpacity\r\n            className=\"bg-white rounded-2xl shadow-md border-2 border-gray-300/30 overflow-hidden mr-4 relative\"\r\n            style={{ width: width * 0.8 }}\r\n        >\r\n            {/* Ads Tab */}\r\n            <View className=\"absolute top-0 left-0 bg-gray-400/30 px-3 py-1 rounded-br-lg\">\r\n                <Text className=\"text-gray-400 font-bold text-xs\">Ads</Text>\r\n            </View>\r\n\r\n            {/* Top Icon Section */}\r\n            <View className=\"flex-row items-center p-4 mt-4\">\r\n                <View\r\n                    className=\"p-3 rounded-xl mr-3\"\r\n                    style={{ backgroundColor: item.color + '20' }}\r\n                >\r\n                    <Ionicons name={item.icon} size={28} color={item.color} />\r\n                </View>\r\n                <View className=\"flex-1\">\r\n                    <Text className=\"text-gray-900 font-bold text-base\" numberOfLines={1}>\r\n                        {item.title}\r\n                    </Text>\r\n                    <Text className=\"text-gray-500 text-sm\" numberOfLines={1}>\r\n                        {item.subtitle}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n\r\n            {/* Divider */}\r\n            <View className=\"border-t border-gray-100\" />\r\n\r\n            {/* Bottom Price + Action */}\r\n            <View className=\"flex-row items-center justify-between p-4\">\r\n                <Text className=\"text-blue-600 font-bold text-sm\">{item.price}</Text>\r\n                <Ionicons name=\"chevron-forward\" size={18} color=\"#9ca3af\" />\r\n            </View>\r\n        </TouchableOpacity>\r\n    );\r\n\r\n\r\n    const gesture = Gesture.Pan()\r\n        .onStart(() => {\r\n            context.value = { y: translateY.value };\r\n        })\r\n        .onUpdate((event) => {\r\n            translateY.value = event.translationY + context.value.y;\r\n            // Limit range: EXPANDED (top) to COLLAPSED (bottom)\r\n            translateY.value = Math.max(SNAP_POINTS.EXPANDED, Math.min(translateY.value, SNAP_POINTS.COLLAPSED + 50));\r\n        })\r\n        .onEnd(() => {\r\n            if (translateY.value < (SNAP_POINTS.COLLAPSED + SNAP_POINTS.EXPANDED) / 2) {\r\n                translateY.value = withTiming(SNAP_POINTS.EXPANDED, { duration: 300 });\r\n            } else {\r\n                translateY.value = withTiming(SNAP_POINTS.COLLAPSED, { duration: 300 });\r\n            }\r\n        });\r\n\r\n    const rBottomSheetStyle = useAnimatedStyle(() => {\r\n        return {\r\n            transform: [{ translateY: translateY.value }],\r\n            height: height,\r\n            top: 0,\r\n            marginBottom: 16\r\n        };\r\n    });\r\n\r\n    const rScanStyle = useAnimatedStyle(() => ({\r\n        transform: [{ translateX: scanX.value }],\r\n    }));\r\n\r\n    return (\r\n        <GestureHandlerRootView style={{ flex: 1 }}>\r\n            <View className=\"flex-1 bg-white\">\r\n                {/*  Optimized MapView with performance props */}\r\n                <MapView\r\n                    ref={mapRef}\r\n                    provider={PROVIDER_GOOGLE}\r\n                    style={{ flex: 1 }}\r\n                    customMapStyle={mapStyle}\r\n                    initialRegion={{\r\n                        ...staticLocation,\r\n                        latitudeDelta: 0.005,\r\n                        longitudeDelta: 0.005,\r\n                    }}\r\n                    moveOnMarkerPress={false}\r\n                    toolbarEnabled={false}\r\n                    loadingEnabled={false}\r\n                >\r\n                    {/* User Location Marker */}\r\n                    <Marker\r\n                        coordinate={staticLocation}\r\n                        flat\r\n                        anchor={{ x: 0.5, y: 0.5 }}\r\n                        tracksViewChanges={false}\r\n                        onPress={() => {\r\n                            if (mapRef.current) {\r\n                                mapRef.current.animateToRegion({\r\n                                    ...staticLocation,\r\n                                    latitudeDelta: 0.005,\r\n                                    longitudeDelta: 0.005,\r\n                                }, 2000);\r\n                            }\r\n                        }}\r\n                    >\r\n                        <View className=\"items-center justify-center\">\r\n                            <View className=\"w-10 h-10 bg-black rounded-full border-[3px] border-white shadow-2xl items-center justify-center\">\r\n                                <Ionicons name=\"location\" size={18} color=\"white\" />\r\n                            </View>\r\n                            <Text>{userData.first_name} </Text>\r\n                        </View>\r\n                    </Marker>\r\n\r\n                    {/*  Memoized Ad Markers - only re-render when adsData changes */}\r\n                    {useMemo(() => adsData.map((ad) => (\r\n                        <Marker\r\n                            key={`ad-${ad.id}`}\r\n                            coordinate={{ latitude: ad.latitude, longitude: ad.longitude }}\r\n                            onPress={() => setSelectedAd(ad)}\r\n                            tracksViewChanges={false}\r\n                        >\r\n                            <View className=\"bg-white p-0.5 rounded-full border-2 border-amber-400 shadow-lg overflow-hidden\" style={{ width: 36, height: 36 }}>\r\n                                <Image\r\n                                    source={{ uri: ad.logo }}\r\n                                    className=\"w-full h-full rounded-full\"\r\n                                    resizeMode=\"cover\"\r\n                                />\r\n                            </View>\r\n                        </Marker>\r\n                    )), [adsData])}\r\n                </MapView>\r\n\r\n                {/* Floating Navigation */}\r\n                <SafeAreaView className=\"absolute top-4 left-4 z-20\">\r\n                    <TouchableOpacity\r\n                        onPress={() => navigation.goBack()}\r\n                        className=\"bg-white w-10 h-10 rounded-full shadow-lg items-center justify-center border border-gray-100\"\r\n                    >\r\n                        <Ionicons name=\"close\" size={24} color=\"black\" />\r\n                    </TouchableOpacity>\r\n                </SafeAreaView>\r\n\r\n                {/* BOTTOM SHEET */}\r\n                <GestureDetector gesture={gesture}>\r\n                    <Animated.View style={[{ position: 'absolute', left: 0, right: 0, backgroundColor: 'white', borderTopLeftRadius: 30, borderTopRightRadius: 30, elevation: 10, paddingTop: 10, marginBottom: 3 }, rBottomSheetStyle]}>\r\n                        {/* Drag Handle */}\r\n                        <View className=\"w-12 h-1.5 bg-gray-300 rounded-full self-center mb-2\" />\r\n\r\n                        {/* Scanning Progress Bar */}\r\n                        <View className=\"h-2 w-full bg-blue-100 rounded-full overflow-hidden\">\r\n                            <Animated.View style={[styles.scanLine, rScanStyle]} />\r\n                        </View>\r\n                        <ScrollView>\r\n\r\n\r\n                            <View className=\"pt-6 px-6 pb-10 mb-52\">\r\n                                <View className=\"flex gap-4 mb-6\">\r\n                                    <View>\r\n                                        <Text className=\"text-2xl font-extrabold text-gray-900 tracking-tight\">\r\n                                            {jobDetails?.id ? \"Job is Live!\" : \"Broadcasting...\"}\r\n                                        </Text>\r\n                                        <Text className=\"text-gray-500 text-sm mt-1\">\r\n                                            {jobDetails?.id\r\n                                                ? `Your request (ID: ${jobDetails.id}) is now visible to nearby mechanics.`\r\n                                                : \"Sending your request to the server...\"}\r\n                                        </Text>\r\n\r\n                                        {/* Display the server-confirmed location */}\r\n                                        {jobDetails?.location && (\r\n                                            <View className=\"flex-row items-center bg-gray-50 p-3 rounded-xl mt-4\">\r\n                                                <Ionicons name=\"location\" size={16} color=\"#3b82f6\" />\r\n                                                <Text className=\"ml-2 text-gray-600 text-xs flex-1\" numberOfLines={1}>\r\n                                                    {jobDetails.location}\r\n                                                </Text>\r\n                                            </View>\r\n                                        )}\r\n                                    </View>\r\n\r\n                                    <View className=\"flex-row items-center bg-blue-50 self-start px-3 py-1.5 rounded-full border border-blue-100\">\r\n                                        <Ionicons name=\"time\" size={14} color=\"#2563eb\" />\r\n                                        <Text className=\"ml-2 text-blue-600 font-semibold text-xs\">\r\n                                            Elapsed: {displayTime}\r\n                                        </Text>\r\n                                    </View>\r\n\r\n                                </View>\r\n\r\n\r\n\r\n                                {/* ADS CAROUSEL (Uber-style) */}\r\n                                <View className=\"mb-8\">\r\n                                    <Text className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3\">Recommended for you</Text>\r\n                                    <FlatList\r\n                                        data={RECOMMENDED_ADS}\r\n                                        renderItem={({ item }) => <ImageAdCard item={item} />}\r\n                                        scrollEnabled={false}\r\n                                        keyExtractor={(item) => item.id}\r\n                                    />\r\n\r\n                                </View>\r\n\r\n                                <TouchableOpacity\r\n                                    onPress={() => navigation.navigate('Cancellation', { requestId })}\r\n                                    className=\"w-full bg-red-600 py-4 rounded-2xl items-center flex-row justify-center shadow-md active:opacity-80 mb-36\"\r\n                                >\r\n                                    <Ionicons name=\"close-circle\" size={20} color=\"white\" />\r\n                                    <Text className=\"ml-2 text-white font-black text-base uppercase tracking-widest\">\r\n                                        Cancel Request\r\n                                    </Text>\r\n                                </TouchableOpacity>\r\n\r\n                            </View>\r\n                        </ScrollView>\r\n                    </Animated.View>\r\n                </GestureDetector>\r\n\r\n\r\n            </View>\r\n        </GestureHandlerRootView>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    pulseRing: {\r\n        position: 'absolute',\r\n        width: 60,\r\n        height: 60,\r\n        borderRadius: 30,\r\n        backgroundColor: '#3b82f6',\r\n        borderWidth: 1,\r\n        borderColor: '#3b82f6'\r\n    },\r\n    bottomSheet: {\r\n        position: 'absolute',\r\n        left: 0,\r\n        right: 0,\r\n        height: height,\r\n        top: 0,\r\n        backgroundColor: 'white',\r\n        borderTopLeftRadius: 32,\r\n        borderTopRightRadius: 32,\r\n        shadowColor: \"#000\",\r\n        shadowOffset: { width: 0, height: -10 },\r\n        shadowOpacity: 0.1,\r\n        shadowRadius: 20,\r\n        elevation: 25,\r\n    },\r\n    scanLine: {\r\n        height: '100%',\r\n        width: '40%',\r\n        backgroundColor: '#3b82f6',\r\n    }\r\n});\r\n\r\nexport default FindingMechanicScreen;","\r\nimport { Ionicons, MaterialCommunityIcons } from '@expo/vector-icons';\r\nimport { useEffect, useState } from 'react';\r\nimport { ActivityIndicator, RefreshControl, ScrollView, Text, View } from 'react-native';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport api from '../utils/api';\r\n\r\nconst HistoryScreen = () => {\r\n    const { checkAuth } = useAuth();\r\n    const [history, setHistory] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchHistory();\r\n    }, []);\r\n\r\n    const fetchHistory = async () => {\r\n        setLoading(true);\r\n        try {\r\n            await checkAuth(); // Optional sync\r\n            const res = await api.get('/Profile/UserHistory/');\r\n            const sorted = res.data?.sort((a, b) => new Date(b.created_at) - new Date(a.created_at)) || [];\r\n            setHistory(sorted);\r\n        } catch (err) {\r\n            console.error(\"History fetch error:\", err);\r\n        } finally {\r\n            setLoading(false);\r\n            setRefreshing(false);\r\n        }\r\n    };\r\n\r\n    const onRefresh = () => {\r\n        setRefreshing(true);\r\n        fetchHistory();\r\n    };\r\n\r\n    const getStatusColor = (status) => {\r\n        switch (status) {\r\n            case 'COMPLETED': return 'bg-green-100 text-green-700 border-green-500';\r\n            case 'CANCELLED': return 'bg-red-100 text-red-700 border-red-500';\r\n            case 'EXPIRED': return 'bg-gray-100 text-gray-700 border-gray-500';\r\n            default: return 'bg-gray-100 text-gray-700 border-gray-400';\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateString) => {\r\n        if (!dateString) return '';\r\n        const date = new Date(dateString);\r\n        return date.toLocaleDateString('en-IN', {\r\n            day: 'numeric', month: 'short', year: 'numeric',\r\n            hour: '2-digit', minute: '2-digit'\r\n        });\r\n    };\r\n\r\n    const renderHistoryItem = (item) => {\r\n        const statusStyle = getStatusColor(item.status);\r\n        return (\r\n            <View key={item.id} className=\"bg-white rounded-2xl p-4 mb-4 shadow-sm border border-gray-100\">\r\n                <View className=\"flex-row justify-between items-start mb-2\">\r\n                    <View className=\"flex-row items-center space-x-2\">\r\n                        <View className={`p-2 rounded-full ${item.status === 'COMPLETED' ? 'bg-green-50' : 'bg-red-50'}`}>\r\n                            {item.vehical_type === 'car' ? (\r\n                                <Ionicons name=\"car-sport\" size={20} color={item.status === 'COMPLETED' ? '#16a34a' : '#ef4444'} />\r\n                            ) : (\r\n                                <MaterialCommunityIcons name=\"motorbike\" size={20} color={item.status === 'COMPLETED' ? '#16a34a' : '#ef4444'} />\r\n                            )}\r\n                        </View>\r\n                        <View>\r\n                            <Text className=\"text-gray-900 font-bold text-base\">{item.problem}</Text>\r\n                            <Text className=\"text-xs text-gray-400\">{formatDate(item.created_at)}</Text>\r\n                        </View>\r\n                    </View>\r\n                    <View className={`px-2 py-1 rounded-lg border ${statusStyle.split(' ')[2]} ${statusStyle.split(' ')[0]}`}>\r\n                        <Text className={`text-xs font-bold ${statusStyle.split(' ')[1]}`}>{item.status}</Text>\r\n                    </View>\r\n                </View>\r\n                <View className=\"mt-2 space-y-1\">\r\n                    <View className=\"flex-row items-start\">\r\n                        <Ionicons name=\"location-sharp\" size={14} color=\"#9ca3af\" style={{ marginTop: 2, marginRight: 4 }} />\r\n                        <Text className=\"text-gray-500 text-sm flex-1\" numberOfLines={2}>{item.location}</Text>\r\n                    </View>\r\n                    {item.price && (\r\n                        <Text className=\"text-gray-900 font-bold text-lg mt-2\">{item.price}</Text>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        );\r\n    };\r\n\r\n    if (loading && !refreshing) {\r\n        return (\r\n            <SafeAreaView className=\"flex-1 bg-white justify-center items-center\">\r\n                <ActivityIndicator size=\"large\" color=\"#000\" />\r\n            </SafeAreaView>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <SafeAreaView className=\"flex-1 bg-white\">\r\n            <View className=\"p-4 border-b border-gray-100 bg-white z-10\">\r\n                <Text className=\"text-lg font-bold text-gray-900 text-center\">Your Services</Text>\r\n            </View>\r\n            <ScrollView\r\n                refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}\r\n                contentContainerStyle={{ padding: 24, paddingBottom: 100 }}\r\n                showsVerticalScrollIndicator={false}\r\n            >\r\n                {history.length > 0 ? history.map(renderHistoryItem) : (\r\n                    <View className=\"items-center py-20\">\r\n                        <Ionicons name=\"documents-outline\" size={48} color=\"#d1d5db\" />\r\n                        <Text className=\"text-gray-400 mt-4\">No services found</Text>\r\n                    </View>\r\n                )}\r\n            </ScrollView>\r\n        </SafeAreaView>\r\n    );\r\n};\r\n\r\nexport default HistoryScreen;\r\n","import { Ionicons } from '@expo/vector-icons';\r\nimport { ScrollView, StatusBar, Text, TouchableOpacity, View } from 'react-native';\r\nimport { SafeAreaView } from 'react-native-safe-area-context'; // Added\r\n\r\nconst LegalScreen = ({ navigation, route }) => {\r\n    const { type, title } = route.params || {};\r\n\r\n    const getContent = (type) => {\r\n        switch (type) {\r\n            case 'terms':\r\n                return (\r\n                    <View>\r\n                        <Text className=\"text-gray-600 mb-4 leading-6\">Welcome to Mechanic Setu. By using our app, you agree to the following terms and conditions...</Text>\r\n                        <Text className=\"font-bold text-gray-800 mb-2\">1. Service Usage</Text>\r\n                        <Text className=\"text-gray-600 mb-4 leading-6\">You agree to use the service for lawful purposes only...</Text>\r\n                    </View>\r\n                );\r\n            case 'privacy':\r\n                return (\r\n                    <View>\r\n                        <Text className=\"text-gray-600 mb-4 leading-6\">Your privacy is important to us...</Text>\r\n                        <Text className=\"font-bold text-gray-800 mb-2\">Data Collection</Text>\r\n                        <Text className=\"text-gray-600 mb-4 leading-6\">We collect location data to connect you with nearby mechanics...</Text>\r\n                    </View>\r\n                );\r\n            case 'about':\r\n                return (\r\n                    <View>\r\n                        <Text className=\"text-gray-600 mb-4 leading-6\">Mechanic Setu is dedicated to helping vehicle owners find reliable mechanics quickly...</Text>\r\n                    </View>\r\n                );\r\n            default:\r\n                return <Text className=\"text-gray-500\">Content not available.</Text>;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <SafeAreaView className=\"flex-1 bg-white\">\r\n            <StatusBar barStyle=\"dark-content\" />\r\n            \r\n            {/* Standard Header Pattern */}\r\n            <View className=\"bg-white px-4 pb-4 border-b border-gray-200 pt-2\">\r\n                <View className=\"flex-row items-center\">\r\n                    <TouchableOpacity\r\n                        onPress={() => navigation.goBack()}\r\n                        className=\"p-2 bg-gray-100 rounded-full mr-4\"\r\n                    >\r\n                        <Ionicons name=\"arrow-back\" size={24} color=\"#374151\" />\r\n                    </TouchableOpacity>\r\n                    <Text className=\"text-xl font-bold text-gray-900 flex-1\" numberOfLines={1}>\r\n                        {title || 'Legal Information'}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n\r\n            <ScrollView className=\"flex-1 px-5 py-6\" showsVerticalScrollIndicator={false}>\r\n                {getContent(type)}\r\n                <View className=\"h-10\" />\r\n            </ScrollView>\r\n        </SafeAreaView>\r\n    );\r\n};\r\n\r\nexport default LegalScreen;","import Constants from 'expo-constants';\r\nimport { useEffect, useState } from 'react';\r\nimport { Alert, Image, KeyboardAvoidingView, Platform, ScrollView, Text, TextInput, TouchableOpacity, View } from 'react-native';\r\nimport { SafeAreaView } from 'react-native-safe-area-context'; // Added\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nexport default function LoginScreen({ navigation }) {\r\n    const { login, isAuthenticated } = useAuth();\r\n    const [email, setEmail] = useState('');\r\n    const [loading, setLoading] = useState(false);  \r\n\r\n    // Check session on mount\r\n    useEffect(() => {\r\n        const checkSession = async () => {\r\n            console.log(\"LoginScreen: Mounting...\");\r\n\r\n            // Log Cookies\r\n            try {\r\n                const cookies = await SecureStore.getItemAsync('UserCookies');\r\n                console.log(\"LoginScreen: Current Cookies in Store:\", cookies);\r\n            } catch (e) { console.log(\"LoginScreen: No cookies or Store error\"); }\r\n\r\n            console.log(\"LoginScreen: Current Auth State (isAuthenticated):\", isAuthenticated);\r\n\r\n            // Double check session (optional, as AuthProvider already does this on mount)\r\n            // await checkAuth(); \r\n        };\r\n        checkSession();\r\n    }, [isAuthenticated]);\r\n\r\n    // Redirect if authenticated\r\n    useEffect(() => {\r\n        if (isAuthenticated) {\r\n            console.log(\"LoginScreen: User is authenticated. Redirecting to Home...\");\r\n            // Force navigation if the App wrapper doesn't do it automatically\r\n            // navigation.reset... or just rely on parent. \r\n            // If user manually navigated BACK to login, they might be stuck unless we pop.\r\n            if (navigation.canGoBack()) {\r\n                navigation.goBack();\r\n            } else {\r\n                // If this is the root, we might need to replace.\r\n                // Assuming 'Main' or 'Home' is the logged-in route name? \r\n                // Since I don't know the exact route name for Home, I'll rely on the App logic \r\n                // OR just console log for now as requested.\r\n            }\r\n        }\r\n    }, [isAuthenticated]);\r\n\r\n    console.log(\"LoginScreen: Rendering\");\r\n    const version = Constants.expoConfig?.version || '1.0.0';\r\n\r\n    const handleEmailLogin = async () => {\r\n        console.log(\"LoginScreen: handleEmailLogin pressed with\", email);\r\n        if (!email) {\r\n            Alert.alert(\"Error\", \"Please enter your email.\");\r\n            return;\r\n        }\r\n        try {\r\n            setLoading(true);\r\n            console.log(\"LoginScreen: Calling login function...\");\r\n            const data = await login(email);\r\n            console.log(\"LoginScreen: Login function returned\", data);\r\n            // Navigate to Verify/OTP screen passing params\r\n            navigation.navigate('Verify', {\r\n                key: data.key,\r\n                id: data.id,\r\n                status: data.status,\r\n                email: email\r\n            });\r\n        } catch (err) {\r\n            console.error(\"LoginScreen: Error caught\", err);\r\n            const msg = err.response?.data?.error || 'Login failed. Please try again.';\r\n            Alert.alert(\"Login Failed\", msg);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleGoogleLogin = () => {\r\n        // Placeholder: Google Login in Expo requires specific setup (expo-auth-session)\r\n        Alert.alert(\"Info\", \"Google Login requires Google Cloud Console setup for Mobile.\");\r\n    };\r\n\r\n    return (\r\n        <SafeAreaView className=\"flex-1 bg-white\">\r\n            <KeyboardAvoidingView\r\n                behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\r\n                className=\"flex-1\"\r\n            >\r\n                <ScrollView contentContainerStyle={{ flexGrow: 1 }} keyboardShouldPersistTaps=\"handled\">\r\n                    {/* Hero Section */}\r\n                    <View className=\"h-[35%] bg-blue-50 w-full items-center justify-center rounded-b-[40px] mb-8 overflow-hidden relative\">\r\n                        <View className=\"absolute -top-10 -left-10 w-40 h-40 bg-blue-100 rounded-full opacity-50\" />\r\n                        <View className=\"w-40 h-40 items-center justify-center p-2\">\r\n                            <Image className=\"w-full h-full rounded-xl\" source={require('../../assets/logo.png')} />\r\n                        </View>\r\n                        <Text className=\"text-3xl font-extrabold text-gray-900 text-center\">Mechanic Setu</Text>\r\n                    </View>\r\n\r\n                    <View className=\"px-6 flex-1\">\r\n                        <View className=\"items-center mb-8\">\r\n                            <Text className=\"text-xl text-gray-600 font-medium\">Log in or Sign up</Text>\r\n                        </View>\r\n\r\n                        <View className=\"w-full space-y-6\">\r\n                            <TextInput\r\n                                placeholder=\"Enter your email\"\r\n                                className=\"w-full px-5 py-4 bg-white rounded-xl text-gray-900 border border-gray-300 mb-4 text-lg\"\r\n                                value={email}\r\n                                onChangeText={setEmail}\r\n                                autoCapitalize=\"none\"\r\n                                keyboardType=\"email-address\"\r\n                            />\r\n                            \r\n                            <TouchableOpacity\r\n                                onPress={handleEmailLogin}\r\n                                disabled={loading}\r\n                                className={`w-full py-4 rounded-xl items-center justify-center ${loading ? 'bg-gray-400' : 'bg-gray-900'}`}\r\n                            >\r\n                                <Text className=\"text-white font-bold text-lg\">{loading ? 'Processing...' : 'Continue'}</Text>\r\n                            </TouchableOpacity>\r\n                        </View>\r\n                    </View>\r\n                </ScrollView>\r\n            </KeyboardAvoidingView>\r\n        </SafeAreaView>\r\n    );\r\n}","import { Ionicons } from '@expo/vector-icons';\r\nimport { Alert, Linking, Modal, Share, Text, TouchableOpacity, View } from 'react-native';\r\nimport Animated, { SlideInDown } from 'react-native-reanimated';\r\n\r\nexport const SafetyToolkit = ({ visible, onClose, mechanicName, userLocation }) => {\r\n    const shareLiveLocation = async () => {\r\n        try {\r\n            const locationUrl = `https://www.google.com/maps?q=${userLocation.latitude},${userLocation.longitude}`;\r\n            await Share.share({\r\n                message: `I'm currently at this location getting vehicle service from ${mechanicName}. Track me here: ${locationUrl}`,\r\n                title: 'Share Live Location'\r\n            });\r\n        } catch (error) {\r\n            console.error('Error sharing location:', error);\r\n        }\r\n    };\r\n\r\n    const callEmergency = () => {\r\n        Alert.alert(\r\n            'Emergency Call',\r\n            'Do you want to call 112 (Emergency Services)?',\r\n            [\r\n                { text: 'Cancel', style: 'cancel' },\r\n                {\r\n                    text: 'Call',\r\n                    onPress: () => Linking.openURL('tel:112'),\r\n                    style: 'destructive'\r\n                }\r\n            ]\r\n        );\r\n    };\r\n\r\n    const callMechanicSOS = () => {\r\n        Alert.alert(\r\n            'Mechanic Setu Helpline',\r\n            'Call our 24/7 support helpline for any safety concerns or issues.',\r\n            [\r\n                { text: 'Cancel', style: 'cancel' },\r\n                {\r\n                    text: 'Call Support',\r\n                    onPress: () => Linking.openURL('tel:18001234567')\r\n                }\r\n            ]\r\n        );\r\n    };\r\n\r\n    const reportIssue = () => {\r\n        Alert.alert(\r\n            'Report an Issue',\r\n            'What would you like to report?',\r\n            [\r\n                { text: 'Safety Concern', onPress: () => Alert.alert('Thank you', 'Your safety concern has been reported to our team.') },\r\n                { text: 'Service Quality', onPress: () => Alert.alert('Thank you', 'Your feedback has been recorded.') },\r\n                { text: 'Other Issue', onPress: () => Alert.alert('Thank you', 'Our team will review your report.') },\r\n                { text: 'Cancel', style: 'cancel' }\r\n            ]\r\n        );\r\n    };\r\n\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            transparent\r\n            animationType=\"fade\"\r\n            onRequestClose={onClose}\r\n        >\r\n            <TouchableOpacity\r\n                activeOpacity={1}\r\n                onPress={onClose}\r\n                className=\"flex-1 bg-black/50 justify-end\"\r\n            >\r\n                <TouchableOpacity activeOpacity={1}>\r\n                    <Animated.View\r\n                        entering={SlideInDown.springify()}\r\n                        className=\"bg-white rounded-t-3xl\"\r\n                    >\r\n                        {/* Close Button */}\r\n                        <TouchableOpacity\r\n                            onPress={onClose}\r\n                            className=\"absolute top-4 right-4 w-8 h-8 bg-gray-100 rounded-full items-center justify-center z-10\"\r\n                        >\r\n                            <Ionicons name=\"close\" size={20} color=\"#6b7280\" />\r\n                        </TouchableOpacity>\r\n\r\n                        {/* Header */}\r\n                        <View className=\"p-6 pb-4\">\r\n                            <View className=\"flex-row items-center mb-2\">\r\n                                <View className=\"w-12 h-12 bg-blue-100 rounded-full items-center justify-center mr-3\">\r\n                                    <Ionicons name=\"shield-checkmark\" size={24} color=\"#3b82f6\" />\r\n                                </View>\r\n                                <Text className=\"text-2xl font-black text-gray-900\">Safety Toolkit</Text>\r\n                            </View>\r\n                        </View>\r\n\r\n                        {/* Divider */}\r\n                        <View className=\"h-px bg-gray-100 mx-6\" />\r\n\r\n                        {/* Safety Options */}\r\n                        <View className=\"p-6\">\r\n                            {/* Share Live Location */}\r\n                            <TouchableOpacity\r\n                                onPress={shareLiveLocation}\r\n                                className=\"flex-row items-center py-4 border-b border-gray-100\"\r\n                            >\r\n                                <View className=\"w-10 h-10 bg-gray-50 rounded-full items-center justify-center mr-4\">\r\n                                    <Ionicons name=\"share-social\" size={20} color=\"#374151\" />\r\n                                </View>\r\n                                <View className=\"flex-1\">\r\n                                    <Text className=\"text-gray-900 font-bold text-base mb-0.5\">Share live location</Text>\r\n                                    <Text className=\"text-gray-500 text-sm\">Let your dear ones keep track of your location and trip status</Text>\r\n                                </View>\r\n                                <Ionicons name=\"chevron-forward\" size={20} color=\"#d1d5db\" />\r\n                            </TouchableOpacity>\r\n\r\n                            {/* Mechanic Setu SOS Helpline */}\r\n                            <TouchableOpacity\r\n                                onPress={callMechanicSOS}\r\n                                className=\"flex-row items-center py-4 border-b border-gray-100\"\r\n                            >\r\n                                <View className=\"w-10 h-10 bg-gray-50 rounded-full items-center justify-center mr-4\">\r\n                                    <Ionicons name=\"call\" size={20} color=\"#374151\" />\r\n                                </View>\r\n                                <View className=\"flex-1\">\r\n                                    <Text className=\"text-gray-900 font-bold text-base mb-0.5\">Mechanic Setu helpline</Text>\r\n                                    <Text className=\"text-gray-500 text-sm\">Call us 24/7 to report any safety issue</Text>\r\n                                </View>\r\n                                <Ionicons name=\"chevron-forward\" size={20} color=\"#d1d5db\" />\r\n                            </TouchableOpacity>\r\n\r\n                            {/* Report an Issue */}\r\n                            <TouchableOpacity\r\n                                onPress={reportIssue}\r\n                                className=\"flex-row items-center py-4 border-b border-gray-100\"\r\n                            >\r\n                                <View className=\"w-10 h-10 bg-gray-50 rounded-full items-center justify-center mr-4\">\r\n                                    <Ionicons name=\"flag\" size={20} color=\"#374151\" />\r\n                                </View>\r\n                                <View className=\"flex-1\">\r\n                                    <Text className=\"text-gray-900 font-bold text-base mb-0.5\">Report an issue</Text>\r\n                                    <Text className=\"text-gray-500 text-sm\">Let us know your issue and we will try to improve</Text>\r\n                                </View>\r\n                                <Ionicons name=\"chevron-forward\" size={20} color=\"#d1d5db\" />\r\n                            </TouchableOpacity>\r\n\r\n                            {/* Call 112 Emergency */}\r\n                            <TouchableOpacity\r\n                                onPress={callEmergency}\r\n                                className=\"flex-row items-center py-4\"\r\n                            >\r\n                                <View className=\"w-10 h-10 bg-red-50 rounded-full items-center justify-center mr-4\">\r\n                                    <Ionicons name=\"warning\" size={20} color=\"#ef4444\" />\r\n                                </View>\r\n                                <View className=\"flex-1\">\r\n                                    <Text className=\"text-gray-900 font-bold text-base mb-0.5\">Call 112</Text>\r\n                                    <Text className=\"text-gray-500 text-sm\">24/7 Police helpline. Use in case of emergency.</Text>\r\n                                </View>\r\n                                <Ionicons name=\"chevron-forward\" size={20} color=\"#d1d5db\" />\r\n                            </TouchableOpacity>\r\n                        </View>\r\n\r\n                        {/* Bottom Padding */}\r\n                        <View className=\"h-8\" />\r\n                    </Animated.View>\r\n                </TouchableOpacity>\r\n            </TouchableOpacity>\r\n        </Modal>\r\n    );\r\n};\r\n","import * as Device from 'expo-device';\r\nimport * as Notifications from 'expo-notifications';\r\nimport { Platform } from 'react-native';\r\n\r\n// Configure notification behavior\r\nNotifications.setNotificationHandler({\r\n    handleNotification: async () => ({\r\n        shouldShowAlert: true, // Deprecated but kept for backwards compatibility\r\n        shouldShowBanner: true,\r\n        shouldShowList: true,\r\n        shouldPlaySound: true,\r\n        shouldSetBadge: true,\r\n    }),\r\n});\r\n\r\n// Request notification permissions\r\nexport async function registerForPushNotificationsAsync() {\r\n    let token;\r\n\r\n    if (Platform.OS === 'android') {\r\n        await Notifications.setNotificationChannelAsync('mechanic-updates', {\r\n            name: 'Mechanic Updates',\r\n            importance: Notifications.AndroidImportance.MAX,\r\n            vibrationPattern: [0, 250, 250, 250],\r\n            lightColor: '#10b981',\r\n            sound: 'default',\r\n            enableLights: true,\r\n            enableVibrate: true,\r\n            showBadge: true,\r\n        });\r\n\r\n        // High priority channel for arrival notifications\r\n        await Notifications.setNotificationChannelAsync('mechanic-arrival', {\r\n            name: 'Mechanic Arrival',\r\n            importance: Notifications.AndroidImportance.HIGH,\r\n            vibrationPattern: [0, 500, 200, 500],\r\n            lightColor: '#3b82f6',\r\n            sound: 'default',\r\n            enableLights: true,\r\n            enableVibrate: true,\r\n            showBadge: true,\r\n        });\r\n    }\r\n\r\n    if (Device.isDevice) {\r\n        const { status: existingStatus } = await Notifications.getPermissionsAsync();\r\n        let finalStatus = existingStatus;\r\n\r\n        if (existingStatus !== 'granted') {\r\n            const { status } = await Notifications.requestPermissionsAsync();\r\n            finalStatus = status;\r\n        }\r\n\r\n        if (finalStatus !== 'granted') {\r\n            alert('Failed to get push notification permissions!');\r\n            return;\r\n        }\r\n    } else {\r\n        alert('Must use physical device for Push Notifications');\r\n    }\r\n\r\n    return token;\r\n}\r\n\r\n// Show live tracking notification\r\nexport async function showMechanicTrackingNotification({\r\n    mechanicName,\r\n    vehicleType,\r\n    vehicleNumber,\r\n    estimatedTime,\r\n    mechanicPhoto,\r\n    phoneNumber\r\n}) {\r\n    // Clear any existing notifications\r\n    await Notifications.dismissAllNotificationsAsync();\r\n\r\n    const notificationId = await Notifications.scheduleNotificationAsync({\r\n        content: {\r\n            title: ' Mechanic on the way',\r\n            body: `${mechanicName} is arriving in ${estimatedTime} mins`,\r\n            data: {\r\n                type: 'mechanic_tracking',\r\n                mechanicName,\r\n                vehicleType,\r\n                vehicleNumber,\r\n                phoneNumber\r\n            },\r\n            badge: 1,\r\n            priority: Notifications.AndroidNotificationPriority.MAX,\r\n            sticky: true, // Keep notification visible\r\n            sound: 'default',\r\n            vibrate: [0, 250, 250, 250],\r\n            ...(Platform.OS === 'android' && {\r\n                color: '#10b981',\r\n                // Custom layout for Android\r\n                categoryIdentifier: 'mechanic_tracking',\r\n            }),\r\n        },\r\n        trigger: null, // Show immediately\r\n        ...(Platform.OS === 'android' && {\r\n            identifier: 'mechanic-tracking-notification',\r\n            channelId: 'mechanic-updates',\r\n        }),\r\n    });\r\n\r\n    return notificationId;\r\n}\r\n\r\n// Update the live notification with new ETA\r\nexport async function updateMechanicTrackingNotification({\r\n    mechanicName,\r\n    estimatedTime,\r\n    distance\r\n}) {\r\n    // Android: Update existing notification\r\n    if (Platform.OS === 'android') {\r\n        await Notifications.scheduleNotificationAsync({\r\n            content: {\r\n                title: ' Mechanic on the way',\r\n                body: `${mechanicName}  ${estimatedTime} min away  ${distance.toFixed(1)} km`,\r\n                data: { type: 'mechanic_tracking_update' },\r\n                badge: 1,\r\n                priority: Notifications.AndroidNotificationPriority.MAX,\r\n                sticky: true,\r\n                color: '#10b981',\r\n            },\r\n            trigger: null,\r\n            identifier: 'mechanic-tracking-notification',\r\n            channelId: 'mechanic-updates',\r\n        });\r\n    }\r\n    // iOS: Notifications auto-update via same identifier\r\n}\r\n\r\n// Show mechanic arrived notification\r\nexport async function showMechanicArrivedNotification({ mechanicName }) {\r\n    await Notifications.dismissAllNotificationsAsync();\r\n\r\n    await Notifications.scheduleNotificationAsync({\r\n        content: {\r\n            title: ' Mechanic Arrived!',\r\n            body: `${mechanicName} has arrived at your location`,\r\n            data: { type: 'mechanic_arrived' },\r\n            badge: 1,\r\n            priority: Notifications.AndroidNotificationPriority.HIGH,\r\n            sound: 'default',\r\n            vibrate: [0, 500, 200, 500],\r\n            ...(Platform.OS === 'android' && {\r\n                color: '#3b82f6',\r\n            }),\r\n        },\r\n        trigger: null,\r\n        ...(Platform.OS === 'android' && {\r\n            channelId: 'mechanic-arrival',\r\n        }),\r\n    });\r\n}\r\n\r\n// Clear mechanic tracking notification\r\nexport async function clearMechanicNotification() {\r\n    await Notifications.dismissAllNotificationsAsync();\r\n}\r\n\r\n// Show job completed notification\r\nexport async function showJobCompletedNotification() {\r\n    await Notifications.dismissAllNotificationsAsync();\r\n\r\n    await Notifications.scheduleNotificationAsync({\r\n        content: {\r\n            title: ' Service Completed',\r\n            body: 'Your service has been completed successfully',\r\n            data: { type: 'job_completed' },\r\n            badge: 0,\r\n            sound: 'default',\r\n            ...(Platform.OS === 'android' && {\r\n                color: '#10b981',\r\n            }),\r\n        },\r\n        trigger: null,\r\n    });\r\n}\r\n","import { Ionicons } from '@expo/vector-icons';\r\nimport Feather from '@expo/vector-icons/Feather';\r\nimport { useIsFocused, useNavigation } from '@react-navigation/native';\r\nimport * as SecureStore from 'expo-secure-store';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport {\r\n    ActivityIndicator,\r\n    Alert,\r\n    Dimensions,\r\n    FlatList,\r\n    Image,\r\n    Linking,\r\n    Text,\r\n    TouchableOpacity, View\r\n} from 'react-native';\r\nimport { Gesture, GestureDetector, ScrollView } from 'react-native-gesture-handler';\r\nimport Animated, { FadeIn, useAnimatedStyle, useSharedValue, withTiming, ZoomIn } from 'react-native-reanimated';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport { ImageAdCard } from '../components/ImageAdCard';\r\nimport MapView, { Marker, Polyline, PROVIDER_GOOGLE } from '../components/PlatformMap';\r\nimport { SafetyToolkit } from '../components/SafetyToolkit';\r\nimport { useWebSocket } from '../context/WebSocketContext';\r\nimport { getMapAds } from '../utils/adsCache';\r\nimport { navigate, resetRoot } from '../utils/navigationRef';\r\nimport { updateMechanicTrackingNotification } from '../utils/notifications';\r\n\r\n\r\nconst { width, height } = Dimensions.get('window');\r\n\r\nconst SNAP_POINTS = {\r\n    COLLAPSED: height * 0.65,\r\n    EXPANDED: height * 0.35,\r\n};\r\n\r\nconst ACTIVE_JOB_STORAGE_KEY = 'mechanicAcceptedData';\r\nconst FORM_STORAGE_KEY = 'punctureRequestFormData';\r\n\r\n// ... (keep helper functions like getDistanceFromLatLonInKm, deg2rad, calculateETA same) ...\r\nfunction getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {\r\n    var R = 6371;\r\n    var dLat = deg2rad(lat2 - lat1);\r\n    var dLon = deg2rad(lon2 - lon1);\r\n    var a =\r\n        Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n        Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *\r\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    var d = R * c;\r\n    return d;\r\n}\r\n\r\nfunction deg2rad(deg) {\r\n    return deg * (Math.PI / 180);\r\n}\r\n\r\nfunction calculateETA(userCoords, mechCoords) {\r\n    if (!userCoords || !mechCoords) return null;\r\n    const distance = getDistanceFromLatLonInKm(\r\n        userCoords.latitude,\r\n        userCoords.longitude,\r\n        mechCoords.latitude,\r\n        mechCoords.longitude\r\n    );\r\n    const avgSpeedKmh = 30;\r\n    const timeMinutes = Math.round((distance / avgSpeedKmh) * 60);\r\n    return timeMinutes + 1;\r\n}\r\n\r\nconst MechanicFoundScreen = ({ route }) => {\r\n    const navigation = useNavigation();\r\n    const isFocused = useIsFocused();\r\n    const {\r\n        data: routeData,\r\n        userLocation: paramLocation,\r\n        vehicleType: fallbackVehicle,\r\n        problem: fallbackProblem\r\n    } = route.params || {};\r\n\r\n    const { socket, lastMessage, connectionStatus, setActiveJobId } = useWebSocket();\r\n    console.log(routeData)\r\n    console.log(paramLocation)\r\n\r\n    // State\r\n    const [mechanic, setMechanic] = useState(null);\r\n    const [jobDetails, setJobDetails] = useState(null);\r\n    const [userLocation, setUserLocation] = useState(paramLocation || null);\r\n    const [mechanicLocation, setMechanicLocation] = useState(null);\r\n    const [estimatedTime, setEstimatedTime] = useState(null);\r\n    const [requestId, setRequestId] = useState(null);\r\n\r\n    // DEBUG: Monitor WebSocket state changes\r\n    useEffect(() => {\r\n        console.log('%c[MechanicFound]  WebSocket State:', 'color: #06b6d4; font-weight: bold;', {\r\n            hasSocket: !!socket,\r\n            connectionStatus,\r\n            hasLastMessage: !!lastMessage,\r\n            lastMessageType: lastMessage?.type,\r\n            requestId,\r\n            isFocused\r\n        });\r\n    }, [socket, connectionStatus, lastMessage, requestId, isFocused]);\r\n\r\n    // Ads State\r\n    const [adsData, setAdsData] = useState([]);\r\n    const [selectedAd, setSelectedAd] = useState(null);\r\n\r\n    // FIX: Mounted Ref to prevent memory leaks/crashes\r\n    const isMounted = useRef(true);\r\n    useEffect(() => {\r\n        isMounted.current = true;\r\n        return () => { isMounted.current = false; };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const loadAds = async () => {\r\n            const ads = await getMapAds();\r\n            setAdsData(ads);\r\n        };\r\n        loadAds();\r\n    }, []);\r\n\r\n    const [isJobCompleted, setIsJobCompleted] = useState(false);\r\n    const [isJobCancelledState, setIsJobCancelledState] = useState(false);\r\n    const [isMechanicArrived, setIsMechanicArrived] = useState(false);\r\n    const [showSafetyToolkit, setShowSafetyToolkit] = useState(false);\r\n\r\n    // Mechanic Connectivity Tracking\r\n    const [isMechanicConnected, setIsMechanicConnected] = useState(true);\r\n    const [lastLocationUpdate, setLastLocationUpdate] = useState(Date.now());\r\n    const connectivityCheckInterval = useRef(null);\r\n\r\n    const mapRef = useRef(null);\r\n\r\n    // Animation Values for Bottom Sheet\r\n    const translateY = useSharedValue(SNAP_POINTS.COLLAPSED);\r\n    const context = useSharedValue({ y: 0 });\r\n\r\n    const gesture = Gesture.Pan()\r\n        .onStart(() => {\r\n            context.value = { y: translateY.value };\r\n        })\r\n        .onUpdate((event) => {\r\n            translateY.value = event.translationY + context.value.y;\r\n            // Limit range: EXPANDED (top) to COLLAPSED (bottom)\r\n            translateY.value = Math.max(SNAP_POINTS.EXPANDED, Math.min(translateY.value, SNAP_POINTS.COLLAPSED + 50));\r\n        })\r\n        .onEnd(() => {\r\n            if (translateY.value < (SNAP_POINTS.COLLAPSED + SNAP_POINTS.EXPANDED) / 2) {\r\n                translateY.value = withTiming(SNAP_POINTS.EXPANDED, { duration: 300 });\r\n            } else {\r\n                translateY.value = withTiming(SNAP_POINTS.COLLAPSED, { duration: 300 });\r\n            }\r\n        });\r\n\r\n    const rBottomSheetStyle = useAnimatedStyle(() => {\r\n        return {\r\n            transform: [{ translateY: translateY.value }],\r\n            height: height, // Full height available\r\n            top: 0,\r\n            marginBottom: 16\r\n        };\r\n    });\r\n\r\n    // Animated style for Safety button to follow bottom sheet\r\n    const rSafetyButtonStyle = useAnimatedStyle(() => {\r\n        return {\r\n            transform: [{ translateY: translateY.value - 80 }], // 80px above bottom sheet\r\n        };\r\n    });\r\n\r\n    // Initial Load\r\n    useEffect(() => {\r\n        const loadInitialData = async () => {\r\n            // --- 1. Load Mechanic & Request Info ---\r\n            if (routeData) {\r\n                const mech = routeData.mechanic_details;\r\n                const reqId = routeData.job_id || routeData.request_id;\r\n\r\n                console.log('%c[MechanicFound]  Initial Load:', 'color: #8b5cf6; font-weight: bold;', {\r\n                    requestId: reqId,\r\n                    requestIdType: typeof reqId,\r\n                    mechanicName: `${mech.first_name} ${mech.last_name}`,\r\n                    mechanicId: mech.id,\r\n                    routeData: routeData\r\n                });\r\n\r\n                setMechanic(mech);\r\n                setRequestId(reqId);\r\n                setActiveJobId?.(reqId); // Update WebSocket context for heartbeat\r\n\r\n                if (mech.current_latitude) {\r\n                    setMechanicLocation({\r\n                        latitude: parseFloat(mech.current_latitude),\r\n                        longitude: parseFloat(mech.current_longitude)\r\n                    });\r\n                }\r\n                if (paramLocation) setUserLocation(paramLocation);\r\n\r\n                // Save for persistence\r\n                const dataToSave = {\r\n                    mechanic: mech,\r\n                    request_id: reqId,\r\n                    user_location: paramLocation\r\n                };\r\n                await SecureStore.setItemAsync(ACTIVE_JOB_STORAGE_KEY, JSON.stringify(dataToSave));\r\n            } else {\r\n                const saved = await SecureStore.getItemAsync(ACTIVE_JOB_STORAGE_KEY);\r\n                if (saved) {\r\n                    const parsed = JSON.parse(saved);\r\n                    setMechanic(parsed.mechanic);\r\n                    setRequestId(parsed.request_id);\r\n                    setActiveJobId?.(parsed.request_id); // Update WebSocket context for heartbeat\r\n                    setUserLocation(parsed.user_location);\r\n                }\r\n            }\r\n\r\n            // --- 2. Load Job Details (Problem/Vehicle) ---\r\n            // REMOVED the \"if (!paramLocation)\" check so it always runs\r\n            try {\r\n                const savedForm = await SecureStore.getItemAsync(FORM_STORAGE_KEY);\r\n                if (savedForm) {\r\n                    const parsedForm = JSON.parse(savedForm);\r\n                    setJobDetails(parsedForm);\r\n                } else if (fallbackVehicle || fallbackProblem) {\r\n                    // Use navigation fallbacks if storage is empty\r\n                    setJobDetails({\r\n                        vehicleType: fallbackVehicle,\r\n                        problem: fallbackProblem\r\n                    });\r\n                }\r\n            } catch (e) {\r\n                console.error(\"Failed to load form data\", e);\r\n            }\r\n        };\r\n\r\n        loadInitialData();\r\n    }, [routeData]);\r\n\r\n    // WebSocket Updates (kept same)\r\n    useEffect(() => {\r\n        // DEBUG: Show guard conditions\r\n        console.log('%c[MechanicFound]  Guard Check:', 'color: #f59e0b;', {\r\n            hasLastMessage: !!lastMessage,\r\n            hasRequestId: !!requestId,\r\n            isFocused,\r\n            willProcess: !(!lastMessage || !requestId || !isFocused)\r\n        });\r\n\r\n        if (!lastMessage || !requestId || !isFocused) return;\r\n\r\n        // DEBUG: Log ALL incoming messages\r\n        console.log('%c[MechanicFound]  WebSocket Message Received:', 'color: #eab308; font-weight: bold;', {\r\n            type: lastMessage.type,\r\n            request_id: lastMessage.request_id,\r\n            job_id: lastMessage.job_id,\r\n            currentRequestId: requestId,\r\n            fullMessage: lastMessage\r\n        });\r\n\r\n        // Mechanic Location Update - Listen for 'mechanic_location_update' (the actual type sent by backend)\r\n        if (lastMessage.type === 'mechanic_location_update') {\r\n            // Verify this is our mechanic (optional safety check)\r\n            const expectedMechanicId = mechanic?.id;\r\n            const receivedMechanicId = lastMessage.mechanic_id;\r\n\r\n            console.log('%c[MechanicFound]  Received Location Update:', 'color: #10b981; font-weight: bold;', {\r\n                latitude: lastMessage.latitude,\r\n                longitude: lastMessage.longitude,\r\n                mechanic_id: receivedMechanicId,\r\n                expected_mechanic_id: expectedMechanicId,\r\n                job_id: lastMessage.job_id,\r\n                timestamp: new Date().toLocaleTimeString()\r\n            });\r\n\r\n            // Accept location if mechanic_id matches OR if no mechanic_id check needed (server routed to our room)\r\n            if (!expectedMechanicId || receivedMechanicId === expectedMechanicId) {\r\n                setMechanicLocation({\r\n                    latitude: parseFloat(lastMessage.latitude),\r\n                    longitude: parseFloat(lastMessage.longitude)\r\n                });\r\n                // Update last location timestamp for connectivity tracking\r\n                setLastLocationUpdate(Date.now());\r\n                setIsMechanicConnected(true);\r\n            } else {\r\n                console.warn('[MechanicFound]  Mechanic ID mismatch, ignoring location update');\r\n            }\r\n        }\r\n\r\n        const msgReqId = String(lastMessage.request_id || lastMessage.job_id);\r\n        const currentReqId = String(requestId);\r\n\r\n        if (msgReqId === currentReqId && isMounted.current) {\r\n            switch (lastMessage.type) {\r\n                case 'job_completed':\r\n                    // Show success screen instead of alert\r\n                    setIsJobCompleted(true);\r\n                    setActiveJobId?.(null); // Clear active job ID\r\n\r\n                    // Cleanup storage\r\n                    SecureStore.deleteItemAsync(ACTIVE_JOB_STORAGE_KEY);\r\n                    SecureStore.deleteItemAsync(FORM_STORAGE_KEY);\r\n\r\n                    // Navigate home after delay\r\n                    setTimeout(() => {\r\n                        if (isMounted.current) navigate('Main');\r\n                    }, 4000);\r\n                    break;\r\n                case 'job_cancelled':\r\n                case 'job_cancelled_notification':\r\n                    // Show cancellation screen\r\n                    setIsJobCancelledState(true);\r\n                    setActiveJobId?.(null); // Clear active job ID\r\n\r\n                    // Cleanup storage\r\n                    SecureStore.deleteItemAsync(ACTIVE_JOB_STORAGE_KEY);\r\n                    SecureStore.deleteItemAsync(FORM_STORAGE_KEY);\r\n\r\n                    // Navigate home after delay\r\n                    setTimeout(() => {\r\n                        if (isMounted.current) navigate('Main');\r\n                    }, 4000);\r\n                    break;\r\n                // case 'no_mechanic_found':\r\n                //     // IGNORE: Spurious message from server after mechanic already found\r\n                //     // clearAndExit(\"We could not find a mechanic.\");\r\n                //     break;\r\n                case 'mechanic_arrived':\r\n                    setIsMechanicArrived(true);\r\n                    Alert.alert(\"Mechanic Arrived\", \"The mechanic has arrived at your location!\");\r\n                    break;\r\n            }\r\n        }\r\n    }, [lastMessage, requestId, isFocused]);\r\n\r\n    // Calculate ETA and update notification\r\n    useEffect(() => {\r\n        if (userLocation && mechanicLocation && mechanic) {\r\n            const eta = calculateETA(userLocation, mechanicLocation);\r\n            setEstimatedTime(eta);\r\n\r\n            // Calculate distance\r\n            const distance = getDistanceFromLatLonInKm(\r\n                userLocation.latitude,\r\n                userLocation.longitude,\r\n                mechanicLocation.latitude,\r\n                mechanicLocation.longitude\r\n            );\r\n\r\n            // Update live notification with new ETA\r\n            updateMechanicTrackingNotification({\r\n                mechanicName: `${mechanic.first_name} ${mechanic.last_name}`,\r\n                estimatedTime: eta,\r\n                distance: distance\r\n            });\r\n\r\n            // Fit map updates with padding for bottom sheet\r\n            if (mapRef.current) {\r\n                mapRef.current.fitToCoordinates([userLocation, mechanicLocation], {\r\n                    edgePadding: { top: 120, right: 50, bottom: height / 2, left: 50 },\r\n                    animated: true,\r\n                });\r\n            }\r\n        }\r\n    }, [userLocation, mechanicLocation]);\r\n\r\n    // Monitor mechanic connectivity based on location updates\r\n    useEffect(() => {\r\n        // Start monitoring only when we have a mechanic\r\n        if (!mechanic || !requestId) return;\r\n\r\n        // Check connectivity every 5 seconds\r\n        const CONNECTIVITY_CHECK_INTERVAL = 5000; // 5 seconds\r\n        const DISCONNECT_THRESHOLD = 120000; // 120 seconds without update = disconnected\r\n\r\n        connectivityCheckInterval.current = setInterval(() => {\r\n            const timeSinceLastUpdate = Date.now() - lastLocationUpdate;\r\n\r\n            if (timeSinceLastUpdate > DISCONNECT_THRESHOLD) {\r\n                if (isMechanicConnected) {\r\n                    console.warn(`[MechanicFound] Mechanic appears disconnected. No location update for ${Math.floor(timeSinceLastUpdate / 1000)}s`);\r\n                    setIsMechanicConnected(false);\r\n                }\r\n            } else {\r\n                if (!isMechanicConnected) {\r\n                    console.log('[MechanicFound] Mechanic reconnected!');\r\n                    setIsMechanicConnected(true);\r\n                }\r\n            }\r\n        }, CONNECTIVITY_CHECK_INTERVAL);\r\n\r\n        return () => {\r\n            if (connectivityCheckInterval.current) {\r\n                clearInterval(connectivityCheckInterval.current);\r\n            }\r\n        };\r\n    }, [mechanic, requestId, lastLocationUpdate, isMechanicConnected]);\r\n\r\n    const clearAndExit = async (msg = null) => {\r\n        try {\r\n            await SecureStore.deleteItemAsync(ACTIVE_JOB_STORAGE_KEY);\r\n            await SecureStore.deleteItemAsync(FORM_STORAGE_KEY);\r\n\r\n            if (msg) {\r\n                Alert.alert(\"Notice\", msg, [\r\n                    {\r\n                        text: \"OK\",\r\n                        onPress: () => resetRoot('Main') // Use resetRoot here\r\n                    }\r\n                ]);\r\n            } else {\r\n                resetRoot('Main'); // Use resetRoot here\r\n            }\r\n        } catch (err) {\r\n            resetRoot('Main');\r\n        }\r\n    };\r\n\r\n    const handleCallMechanic = () => {\r\n        if (mechanic?.phone_number) {\r\n            Linking.openURL(`tel:${mechanic.phone_number}`);\r\n        } else {\r\n            alert(\"Phone number not available\");\r\n        }\r\n    };\r\n\r\n    // Debug Navigation\r\n    useEffect(() => {\r\n        console.log(\"[MechanicFoundScreen] Mounted. Navigation Prop:\", navigation ? \"Present\" : \"Missing\");\r\n    }, []);\r\n\r\n    // --- ADS DATA & RENDERER ---\r\n    const RECOMMENDED_ADS = [\r\n        {\r\n            id: '1',\r\n            type: 'image',\r\n            title: 'Flat 20% OFF',\r\n            subtitle: 'on Premium Car Servicing',\r\n            description: 'Book comprehensive car service at your doorstep',\r\n            bgColor: '#EEF2FF',\r\n            accentColor: '#4F46E5',\r\n            image: 'https://cdn-icons-png.flaticon.com/512/3097/3097136.png',\r\n            ctaText: 'Book Service',\r\n            badge: 'LIMITED OFFER'\r\n        },\r\n        {\r\n            id: '2',\r\n            type: 'image',\r\n            title: 'Roadside Assistance',\r\n            subtitle: '24/7 Emergency Support',\r\n            description: 'Get instant help anywhere, anytime',\r\n            bgColor: '#FEF3C7',\r\n            accentColor: '#F59E0B',\r\n            image: 'https://cdn-icons-png.flaticon.com/512/2917/2917995.png',\r\n            ctaText: 'Subscribe Now',\r\n            badge: '99/Year'\r\n        },\r\n        {\r\n            id: '3',\r\n            type: 'image',\r\n            title: 'Castrol Engine Oil',\r\n            subtitle: 'Magnatec Protection',\r\n            description: 'Premium engine oil with 75% less engine wear',\r\n            bgColor: '#D1FAE5',\r\n            accentColor: '#059669',\r\n            image: 'https://cdn-icons-png.flaticon.com/512/2917/2917242.png',\r\n            ctaText: 'Shop Now',\r\n            badge: 'From 499'\r\n        },\r\n        {\r\n            id: '4',\r\n            type: 'image',\r\n            title: 'Tyre Replacement',\r\n            subtitle: 'Top Brands Available',\r\n            description: 'Get the best deals on premium tyres',\r\n            bgColor: '#FEE2E2',\r\n            accentColor: '#DC2626',\r\n            image: 'https://cdn-icons-png.flaticon.com/512/3097/3097039.png',\r\n            ctaText: 'View Offers',\r\n            badge: 'Save Big'\r\n        },\r\n        {\r\n            id: '5',\r\n            type: 'image',\r\n            title: 'Battery Check',\r\n            subtitle: 'Free Inspection',\r\n            description: 'Avoid unexpected breakdowns with battery testing',\r\n            bgColor: '#DBEAFE',\r\n            accentColor: '#2563EB',\r\n            image: 'https://cdn-icons-png.flaticon.com/512/2917/2917439.png',\r\n            ctaText: 'Book Now',\r\n            badge: 'FREE'\r\n        },\r\n    ];\r\n\r\n    const renderAdItem = ({ item }) => (\r\n        <TouchableOpacity\r\n            className=\"bg-white rounded-2xl shadow-md border-2 border-gray-300/30 overflow-hidden mr-4 relative\"\r\n            style={{ width: width * 0.8 }}\r\n        >\r\n            {/* Ads Tab */}\r\n            <View className=\"absolute top-0 left-0 bg-gray-400/30 px-3 py-1 rounded-br-lg\">\r\n                <Text className=\"text-gray-400 font-bold text-xs\">Ads</Text>\r\n            </View>\r\n\r\n            {/* Top Icon Section */}\r\n            <View className=\"flex-row items-center p-4 mt-4\">\r\n                <View\r\n                    className=\"p-3 rounded-xl mr-3\"\r\n                    style={{ backgroundColor: item.color + '20' }}\r\n                >\r\n                    <Ionicons name={item.icon} size={28} color={item.color} />\r\n                </View>\r\n                <View className=\"flex-1\">\r\n                    <Text className=\"text-gray-900 font-bold text-base\" numberOfLines={1}>\r\n                        {item.title}\r\n                    </Text>\r\n                    <Text className=\"text-gray-500 text-sm\" numberOfLines={1}>\r\n                        {item.subtitle}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n\r\n            {/* Divider */}\r\n            <View className=\"border-t border-gray-100\" />\r\n\r\n            {/* Bottom Price + Action */}\r\n            <View className=\"flex-row items-center justify-between p-4\">\r\n                <Text className=\"text-blue-600 font-bold text-sm\">{item.price}</Text>\r\n                <Ionicons name=\"chevron-forward\" size={18} color=\"#9ca3af\" />\r\n            </View>\r\n        </TouchableOpacity>\r\n    );\r\n\r\n    console.log(\"Current State -> Mechanic:\", !!mechanic, \"JobDetails:\", jobDetails);\r\n\r\n    const mapStyle = [\r\n        { \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#f5f7fa\" }] },\r\n        { \"elementType\": \"labels.icon\", \"stylers\": [{ \"visibility\": \"off\" }] },\r\n        { \"elementType\": \"labels.text.fill\", \"stylers\": [{ \"color\": \"#4a5568\" }] },\r\n        { \"elementType\": \"labels.text.stroke\", \"stylers\": [{ \"color\": \"#f5f7fa\" }] },\r\n        { \"featureType\": \"administrative\", \"elementType\": \"geometry.stroke\", \"stylers\": [{ \"color\": \"#cbd5e0\" }] },\r\n        { \"featureType\": \"administrative.land_parcel\", \"stylers\": [{ \"visibility\": \"off\" }] },\r\n        { \"featureType\": \"poi\", \"stylers\": [{ \"visibility\": \"off\" }] },\r\n        { \"featureType\": \"poi.park\", \"stylers\": [{ \"visibility\": \"on\" }] },\r\n        { \"featureType\": \"poi.park\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#e6f4ea\" }] },\r\n        { \"featureType\": \"poi.park\", \"elementType\": \"geometry.fill\", \"stylers\": [{ \"color\": \"#b7e6c6\" }] },\r\n        { \"featureType\": \"road\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#ffffff\" }] },\r\n        { \"featureType\": \"road\", \"elementType\": \"geometry.stroke\", \"stylers\": [{ \"color\": \"#e2e8f0\", \"weight\": 1 }] },\r\n        { \"featureType\": \"road.arterial\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#edf2f7\" }] },\r\n        { \"featureType\": \"road.highway\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#e2e8f0\" }] },\r\n        { \"featureType\": \"road.highway\", \"elementType\": \"geometry.stroke\", \"stylers\": [{ \"color\": \"#cbd5e0\", \"weight\": 1.5 }] },\r\n        { \"featureType\": \"road.local\", \"elementType\": \"labels.text.fill\", \"stylers\": [{ \"color\": \"#a0aec0\" }] },\r\n        { \"featureType\": \"transit\", \"stylers\": [{ \"visibility\": \"off\" }] },\r\n        { \"featureType\": \"water\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#4299e1\" }] },\r\n        { \"featureType\": \"water\", \"elementType\": \"labels.text.fill\", \"stylers\": [{ \"color\": \"#2d3748\" }] },\r\n        { \"featureType\": \"landscape.natural\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#e6f4ea\" }] },\r\n        { \"featureType\": \"landscape.natural.landcover\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#c6f6d5\" }] },\r\n        { \"featureType\": \"landscape.natural.terrain\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#d4edda\" }] }\r\n    ];\r\n    if (!mechanic || !userLocation) {\r\n        return (\r\n            <SafeAreaView className=\"flex-1 bg-white items-center justify-center\">\r\n                <ActivityIndicator size=\"large\" color=\"#2563eb\" />\r\n                <Text className=\"mt-4 text-gray-500 font-medium\">Synced with server...</Text>\r\n                <TouchableOpacity onPress={() => resetRoot(\"Main\")} className=\"mt-8 p-2\">\r\n                    <Text className=\"text-red-400\">Cancel & Home</Text>\r\n                </TouchableOpacity>\r\n            </SafeAreaView>\r\n        );\r\n    }\r\n\r\n    // Success View for Completion\r\n    const renderCompletionSuccess = () => (\r\n        <Animated.View\r\n            entering={FadeIn}\r\n            className=\"absolute top-0 left-0 right-0 bottom-0 bg-white z-50 items-center justify-center px-6\"\r\n        >\r\n            <Animated.View\r\n                entering={ZoomIn.delay(200)}\r\n                className=\"w-32 h-32 bg-green-600 rounded-full items-center justify-center mb-8 shadow-xl shadow-green-200\"\r\n            >\r\n                <Ionicons name=\"checkmark\" size={64} color=\"white\" />\r\n            </Animated.View>\r\n\r\n            <Animated.Text\r\n                entering={FadeIn.delay(400)}\r\n                className=\"text-2xl font-black text-gray-900 mb-2 tracking-wider uppercase text-center\"\r\n            >\r\n                Service Completed\r\n            </Animated.Text>\r\n\r\n            <Animated.Text\r\n                entering={FadeIn.delay(600)}\r\n                className=\"text-gray-500 font-medium text-center mb-8 text-base\"\r\n            >\r\n                Hope you are safe now. Thank you for using Mechanic Setu!\r\n            </Animated.Text>\r\n\r\n            {mechanic && (\r\n                <Animated.View\r\n                    entering={FadeIn.delay(800)}\r\n                    className=\"bg-gray-50 p-4 rounded-2xl w-full items-center border border-gray-100 mb-8\"\r\n                >\r\n                    <Text className=\"text-xs font-bold text-gray-400 uppercase mb-2\">Service Provided By</Text>\r\n                    <Text className=\"text-gray-900 font-bold text-lg text-center leading-6\">\r\n                        {mechanic.first_name} {mechanic.last_name}\r\n                    </Text>\r\n                </Animated.View>\r\n            )}\r\n\r\n            <Animated.Text\r\n                entering={FadeIn.delay(1000)}\r\n                className=\"text-gray-400 font-bold uppercase tracking-widest text-xs\"\r\n            >\r\n                Redirecting to Home...\r\n            </Animated.Text>\r\n        </Animated.View>\r\n    );\r\n\r\n    // Cancellation View\r\n    const renderCancellationSuccess = () => (\r\n        <Animated.View\r\n            entering={FadeIn}\r\n            className=\"absolute top-0 left-0 right-0 bottom-0 bg-white z-50 items-center justify-center px-6\"\r\n        >\r\n            <Animated.View\r\n                entering={ZoomIn.delay(200)}\r\n                className=\"w-32 h-32 bg-red-100 rounded-full items-center justify-center mb-8\"\r\n            >\r\n                <Ionicons name=\"close\" size={64} color=\"#dc2626\" />\r\n            </Animated.View>\r\n\r\n            <Animated.Text\r\n                entering={FadeIn.delay(400)}\r\n                className=\"text-2xl font-black text-gray-900 mb-2 tracking-wider uppercase text-center\"\r\n            >\r\n                Request Cancelled\r\n            </Animated.Text>\r\n\r\n            <Animated.Text\r\n                entering={FadeIn.delay(600)}\r\n                className=\"text-gray-500 font-medium text-center mb-8 text-base\"\r\n            >\r\n                Your service request has been cancelled.\r\n            </Animated.Text>\r\n\r\n            <Animated.Text\r\n                entering={FadeIn.delay(800)}\r\n                className=\"text-gray-400 font-bold uppercase tracking-widest text-xs\"\r\n            >\r\n                Redirecting to Home...\r\n            </Animated.Text>\r\n        </Animated.View>\r\n    );\r\n\r\n    return (\r\n        <View style={{ flex: 1 }}>\r\n            {isJobCompleted && renderCompletionSuccess()}\r\n            {isJobCancelledState && renderCancellationSuccess()}\r\n            <View className=\"flex-1 bg-white\">\r\n                {/* Map */}\r\n                <MapView\r\n                    ref={mapRef}\r\n                    provider={PROVIDER_GOOGLE}\r\n                    style={{ flex: 1 }}\r\n                    customMapStyle={mapStyle}\r\n                    initialRegion={{\r\n                        ...userLocation,\r\n                        latitudeDelta: 0.05,\r\n                        longitudeDelta: 0.05,\r\n                    }}\r\n                >\r\n                    {/* Route Line */}\r\n                    {userLocation && mechanicLocation && (\r\n                        <Polyline\r\n                            coordinates={[userLocation, mechanicLocation]}\r\n                            strokeColor=\"black\"\r\n                            strokeWidth={2}\r\n                            lineDashPattern={[10, 10]}\r\n                            geodesic={true}\r\n                        />\r\n                    )}\r\n\r\n                    {/* User Marker */}\r\n                    <Marker coordinate={userLocation}>\r\n                        <View className=\"items-center justify-center\">\r\n                            <Image source={require('../../assets/logo.png')} style={{ width: 35, height: 35, borderRadius: 17.5, borderWidth: 3, borderColor: '#10b981' }} />\r\n                        </View>\r\n                    </Marker>\r\n\r\n                    {/* Mechanic Marker */}\r\n                    {mechanicLocation && (\r\n                        <Marker coordinate={mechanicLocation}>\r\n                            <View className=\"items-center justify-center\">\r\n                                {mechanic.Mechanic_profile_pic ? (\r\n                                    <Image\r\n                                        source={{ uri: mechanic.Mechanic_profile_pic }}\r\n                                        style={{\r\n                                            width: 35,\r\n                                            height: 35,\r\n                                            borderRadius: 17.5,\r\n                                            borderWidth: 3,\r\n                                            borderColor: isMechanicConnected ? '#3b82f6' : '#ef4444'\r\n                                        }}\r\n                                    />\r\n                                ) : (\r\n                                    <View className={`w-9 h-9 rounded-full border-2 border-white items-center justify-center ${isMechanicConnected ? 'bg-blue-500' : 'bg-red-500'}`}>\r\n                                        <Ionicons name=\"construct\" color=\"white\" size={20} />\r\n                                    </View>\r\n                                )}\r\n                                {/* Connectivity Indicator Dot */}\r\n                                <View className={`absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white ${isMechanicConnected ? 'bg-green-500' : 'bg-red-500'}`} />\r\n                            </View>\r\n\r\n                        </Marker>\r\n                    )}\r\n\r\n                    {adsData.map((ad) => (\r\n                        <Marker\r\n                            key={`ad-${ad.id}`}\r\n                            coordinate={{ latitude: ad.latitude, longitude: ad.longitude }}\r\n                            onPress={() => setSelectedAd(ad)}\r\n                        >\r\n                            <View className=\"bg-white p-0.5 rounded-full border-2 border-amber-400 shadow-lg overflow-hidden\" style={{ width: 36, height: 36 }}>\r\n                                <Image\r\n                                    source={{ uri: ad.logo }}\r\n                                    className=\"w-full h-full rounded-full\"\r\n                                    resizeMode=\"cover\"\r\n                                />\r\n                            </View>\r\n                        </Marker>\r\n                    ))}\r\n                </MapView>\r\n\r\n\r\n                {/* Mechanic Disconnection Warning Banner */}\r\n                {!isMechanicConnected && (\r\n                    <Animated.View\r\n                        entering={FadeIn}\r\n                        className=\"absolute top-0 left-0 right-0 z-20 bg-red-500 py-2 px-4\"\r\n                    >\r\n                        <SafeAreaView edges={['top']}>\r\n                            <View className=\"flex-row items-center justify-center\">\r\n                                <Ionicons name=\"warning\" size={16} color=\"white\" />\r\n                                <Text className=\"text-white font-bold text-xs ml-2\">\r\n                                    Mechanic connection lost. Trying to reconnect...\r\n                                </Text>\r\n                            </View>\r\n                        </SafeAreaView>\r\n                    </Animated.View>\r\n                )}\r\n\r\n                {/* Top Green Header */}\r\n                <View className={`absolute ${!isMechanicConnected ? 'top-10' : '-top-8'} left-0 right-0 z-10 ${isMechanicArrived ? 'bg-blue-600' : 'bg-green-600'} shadow-md pb-4 pt-2`}>\r\n                    <View className=\"px-4 flex-row mt-14 items-center pb-3 pt-4 mb-2\">\r\n                        <TouchableOpacity\r\n                            onPress={() => navigation.goBack()}\r\n                            className=\"mr-2\"\r\n                        >\r\n                            <Ionicons name=\"chevron-back\" size={28} color=\"white\" />\r\n                        </TouchableOpacity>\r\n\r\n                        <View className=\"flex-1 items-center mr-8\">\r\n                            <Text className={isMechanicArrived ? 'text-blue-100 text-xs font-bold uppercase tracking-wider mb-0.5' : 'text-white text-xs font-bold uppercase tracking-wider mb-0.5'}>\r\n                                {isMechanicArrived ? 'Status Update' : 'Mechanic is on the way'}\r\n                            </Text>\r\n                            <Text className=\"text-white text-2xl font-extrabold\">\r\n                                {isMechanicArrived\r\n                                    ? \"Mechanic Arrived\"\r\n                                    : (estimatedTime ? `Arriving in ${estimatedTime} mins` : 'Calculating ETA...')\r\n                                }\r\n                            </Text>\r\n                        </View>\r\n                    </View>\r\n                </View>\r\n                {/* Safety Button - Follows Bottom Sheet */}\r\n                <Animated.View\r\n                    style={[\r\n                        { position: 'absolute', top: 0, right: 16, zIndex: 20 },\r\n                        rSafetyButtonStyle\r\n                    ]}\r\n                >\r\n                    <TouchableOpacity\r\n                        onPress={() => setShowSafetyToolkit(true)}\r\n                        className=\"bg-white rounded-full shadow-lg px-4 py-2 flex-row items-center\"\r\n                        style={{ elevation: 5 }}\r\n                    >\r\n                        <Ionicons name=\"shield-checkmark\" size={18} color=\"#3b82f6\" />\r\n                        <Text className=\"text-blue-600 font-bold text-sm ml-1.5\">Safety</Text>\r\n                    </TouchableOpacity>\r\n                </Animated.View>\r\n                {/* Draggable Bottom Sheet */}\r\n                <GestureDetector gesture={gesture}>\r\n                    <Animated.View style={[{ position: 'absolute', left: 0, right: 0, backgroundColor: 'white', borderTopLeftRadius: 30, borderTopRightRadius: 30, elevation: 10, paddingTop: 10, marginBottom: 3 }, rBottomSheetStyle]}>\r\n                        {/* Drag Handle */}\r\n                        <View className=\"w-12 h-1.5 bg-gray-300 rounded-full self-center mb-2\" />\r\n\r\n\r\n                        <ScrollView>\r\n                            <View className=\"px-6 pb-10 mb-52 \">\r\n                                {/* Mechanic Details */}\r\n                                <View className=\"flex-row items-center gap-4 mb-6\">\r\n                                    <View className=\"w-16 h-16 rounded-full bg-gray-200 border-2 border-gray-500 overflow-hidden\">\r\n                                        {mechanic.Mechanic_profile_pic ? <Image source={{ uri: mechanic.Mechanic_profile_pic }} className=\"w-full h-full\" /> : <View className=\"w-full h-full bg-gray-300 items-center justify-center\"><Text className=\"text-xl font-bold\">{mechanic.first_name[0]}</Text></View>}\r\n                                    </View>\r\n                                    <View className=\"flex-1\">\r\n                                        <Text className=\"text-lg font-bold text-gray-900\">{mechanic.first_name} {mechanic.last_name}</Text>\r\n                                        <Text className=\"text-gray-500 text-sm\">Verified Mechanic</Text>\r\n                                    </View>\r\n                                    <TouchableOpacity onPress={handleCallMechanic} className=\"w-12 h-12 bg-white rounded-full border border-gray-400 items-center justify-center\"><Feather name=\"phone-call\" size={15} color=\"green\" /></TouchableOpacity>\r\n                                </View>\r\n                                {/* Job Details Section (FIXED DISPLAY) */}\r\n                                <View className=\"bg-gray-50 p-4 rounded-2xl mb-6\">\r\n                                    <Text className=\"text-xs font-bold text-gray-400 uppercase mb-2\">Issue Reported</Text>\r\n                                    <Text className=\"text-gray-900 font-bold text-lg\">{jobDetails?.problem || 'General Breakdown'}</Text>\r\n                                    {(jobDetails?.vehicleType || jobDetails?.vehical_type) && (\r\n                                        <Text className=\"text-blue-600 font-medium mt-1 capitalize\">\r\n                                            {jobDetails.vehicleType || jobDetails.vehical_type}\r\n                                        </Text>\r\n                                    )}\r\n                                </View>\r\n\r\n                                {/* Having an Issue Banner */}\r\n                                <TouchableOpacity\r\n                                    onPress={() => setShowSafetyToolkit(true)}\r\n                                    className=\"bg-blue-50 rounded-2xl p-4 mb-6 flex-row items-center\"\r\n                                >\r\n                                    <View className=\"w-10 h-10 bg-blue-500 rounded-full items-center justify-center mr-3\">\r\n                                        <Ionicons name=\"headset\" size={20} color=\"white\" />\r\n                                    </View>\r\n                                    <View className=\"flex-1\">\r\n                                        <Text className=\"text-gray-900 font-bold text-base\">Having an issue?</Text>\r\n                                        <Text className=\"text-gray-500 text-sm\">We're a tap away</Text>\r\n                                    </View>\r\n                                    <Ionicons name=\"chevron-forward\" size={20} color=\"#9ca3af\" />\r\n                                </TouchableOpacity>\r\n\r\n                                {/* ADS CAROUSEL (Uber-style) */}\r\n                                <View className=\"mb-6  \">\r\n\r\n                                    <Text className=\"mr-6 text-xs font-bold text-gray-400 uppercase tracking-widest mb-3\">Recommended for you</Text>\r\n                                    <FlatList\r\n                                        data={RECOMMENDED_ADS}\r\n                                        renderItem={({ item }) => <ImageAdCard item={item} />}\r\n                                        scrollEnabled={false}\r\n                                        keyExtractor={(item) => item.id}\r\n                                    />\r\n                                </View>\r\n\r\n                                <TouchableOpacity onPress={() => navigation.navigate('Cancellation', { requestId })} className=\"w-full py-4 rounded-xl bg-red-50 flex-row items-center justify-center border border-red-100 mb-36\"><Text className=\"text-red-500 font-bold\">Cancel Request</Text></TouchableOpacity>\r\n                            </View>\r\n                        </ScrollView>\r\n                    </Animated.View>\r\n                </GestureDetector>\r\n\r\n\r\n            </View>\r\n\r\n            {/* Safety Toolkit Modal */}\r\n            <SafetyToolkit\r\n                visible={showSafetyToolkit}\r\n                onClose={() => setShowSafetyToolkit(false)}\r\n                mechanicName={mechanic ? `${mechanic.first_name} ${mechanic.last_name}` : 'your mechanic'}\r\n                userLocation={userLocation}\r\n            />\r\n        </View >\r\n    );\r\n};\r\n\r\nconst VueAvatarInitials = ({ name }) => (\r\n    <View className=\"w-full h-full items-center justify-center bg-gray-300\">\r\n        <Text className=\"text-xl font-bold text-gray-600\">{name ? name[0] : 'M'}</Text>\r\n    </View>\r\n);\r\n\r\nexport default MechanicFoundScreen;\r\n","import { Ionicons } from '@expo/vector-icons';\r\nimport { useNavigation, useRoute } from '@react-navigation/native';\r\nimport { useEffect, useState } from 'react';\r\nimport { ActivityIndicator, FlatList, Image, Linking, Text, TouchableOpacity, View } from 'react-native';\r\nimport Animated, { FadeInDown, FadeInUp, ZoomIn } from 'react-native-reanimated';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport { resetRoot } from '../utils/navigationRef';\r\n\r\nconst RAPID_API_KEY = '8c4441f91cmsh031f6b727121205p18ef90jsndb7ed43006d7';\r\n\r\nexport default function NearbyMechanicsScreen() {\r\n    const navigation = useNavigation();\r\n    const route = useRoute();\r\n    const { jobDetails, userLocation } = route.params || {};\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [mechanics, setMechanics] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if (userLocation?.latitude) {\r\n            fetchNearbyMechanics();\r\n        }\r\n    }, [userLocation]);\r\n\r\n    const fetchNearbyMechanics = async () => {\r\n        try {\r\n            const lat = userLocation.latitude;\r\n            const lng = userLocation.longitude;\r\n            const url = 'https://local-business-data.p.rapidapi.com/search';\r\n\r\n            const options = {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-rapidapi-key': RAPID_API_KEY,\r\n                    'x-rapidapi-host': 'local-business-data.p.rapidapi.com'\r\n                },\r\n                body: JSON.stringify({\r\n                    queries: [\"auto repair\", \"mechanic\", \"car service\"],\r\n                    language: \"en\",\r\n                    region: \"in\",\r\n                    coordinates: `${lat},${lng}`,\r\n                    limit: 10,\r\n                    offset: 0,\r\n                    zoom: 13,\r\n                    dedup: true\r\n                })\r\n            };\r\n\r\n            const response = await fetch(url, options);\r\n            const result = await response.json();\r\n\r\n            // The new API structure returns data inside the first element of 'data' array which corresponds to the first query?\r\n            // Or it might return an array of results for each query.\r\n            // Based on user example: \"data\": [ { ... } ]\r\n            // The example shows a single query response. With multiple queries, structure might be slightly different.\r\n            // Let's assume it returns a flat list or we flatten it.\r\n            // Wait, the user example response 'data' is an array of businesses.\r\n            // If I send multiple queries, I might get multiple business lists. \r\n            // Let's stick to the user's curl \"data\" format logic, but handle potential array-of-arrays if API behaves that way with multiple queries.\r\n            // Actually, the example shows \"data\": [ { business_details } ]\r\n\r\n            let allMechanics = [];\r\n            if (result.data && Array.isArray(result.data)) {\r\n                allMechanics = result.data;\r\n            }\r\n\r\n            // Calculate distances\r\n            const mechanicsWithDistance = allMechanics.map(mech => {\r\n                const dist = getDistanceFromLatLonInKm(lat, lng, mech.latitude, mech.longitude);\r\n                return { ...mech, distance: dist.toFixed(1) }; // 1 decimal place\r\n            });\r\n\r\n            // Filter by max distance (20km) and sort\r\n            const nearbyMechanics = mechanicsWithDistance\r\n                .filter(mech => parseFloat(mech.distance) <= 20)\r\n                .sort((a, b) => parseFloat(a.distance) - parseFloat(b.distance));\r\n\r\n            setMechanics(nearbyMechanics);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching nearby mechanics:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {\r\n        if (!lat2 || !lon2) return 999;\r\n        const R = 6371; // Radius of the earth in km\r\n        const dLat = deg2rad(lat2 - lat1);\r\n        const dLon = deg2rad(lon2 - lon1);\r\n        const a =\r\n            Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n            Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *\r\n            Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n        return R * c; // Distance in km\r\n    }\r\n\r\n    function deg2rad(deg) {\r\n        return deg * (Math.PI / 180);\r\n    }\r\n\r\n    const renderItem = ({ item, index }) => (\r\n        <Animated.View\r\n            entering={FadeInDown.delay(index * 100).springify()}\r\n            className=\"mb-3\"\r\n        >\r\n            <TouchableOpacity\r\n                className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex-row\"\r\n                onPress={() => item.phone_number && Linking.openURL(`tel:${item.phone_number}`)}\r\n            >\r\n                {/* Thumbnail via Google Photos if available */}\r\n                <View className=\"w-16 h-16 bg-gray-100 rounded-lg mr-4 overflow-hidden items-center justify-center\">\r\n                    {item.photos_sample?.[0]?.photo_url ? (\r\n                        <Image source={{ uri: item.photos_sample[0].photo_url }} className=\"w-full h-full\" resizeMode=\"cover\" />\r\n                    ) : (\r\n                        <Ionicons name=\"construct\" size={24} color=\"#9ca3af\" />\r\n                    )}\r\n                </View>\r\n\r\n                <View className=\"flex-1\">\r\n                    <Text className=\"font-bold text-gray-900 text-base mb-1\">{item.name}</Text>\r\n                    <Text className=\"text-gray-500 text-xs mb-1\" numberOfLines={2}>{item.full_address || item.address}</Text>\r\n\r\n                    <View className=\"flex-row items-center mt-1\">\r\n                        {item.rating && (\r\n                            <View className=\"flex-row items-center mr-3\">\r\n                                <Ionicons name=\"star\" size={12} color=\"#f59e0b\" />\r\n                                <Text className=\"text-xs font-bold text-gray-700 ml-1\">{item.rating}</Text>\r\n                                <Text className=\"text-xs text-gray-400 ml-0.5\">({item.review_count})</Text>\r\n                            </View>\r\n                        )}\r\n\r\n                        {item.distance && (\r\n                            <View className=\"flex-row items-center mr-3\">\r\n                                <Ionicons name=\"location-outline\" size={12} color=\"#3b82f6\" />\r\n                                <Text className=\"text-xs text-blue-600 ml-0.5\">{item.distance} km</Text>\r\n                            </View>\r\n                        )}\r\n\r\n                        <Text className={`text-xs font-bold ${item.business_status === 'OPEN' ? 'text-green-600' : 'text-red-500'}`}>\r\n                            {item.business_status || (item.opening_status ? item.opening_status : '')}\r\n                        </Text>\r\n                    </View>\r\n                </View>\r\n\r\n                <View className=\"justify-center pl-2\">\r\n                    <View className=\"w-10 h-10 bg-green-50 rounded-full items-center justify-center\">\r\n                        <Ionicons name=\"call\" size={20} color=\"#16a34a\" />\r\n                    </View>\r\n                </View>\r\n            </TouchableOpacity>\r\n        </Animated.View>\r\n    );\r\n\r\n    return (\r\n        <SafeAreaView className=\"flex-1 bg-gray-50 mt-10\">\r\n            <View className=\"p-4 bg-white shadow-sm mb-4\">\r\n                <View className=\"flex-row items-center mb-4\">\r\n                    <TouchableOpacity onPress={() => resetRoot(\"Main\")} className=\"mr-3\">\r\n                        <Ionicons name=\"arrow-back\" size={24} color=\"black\" />\r\n                    </TouchableOpacity>\r\n                    <Text className=\"text-xl font-bold\">Mechanics Nearby</Text>\r\n                </View>\r\n\r\n                {/* Job Summary */}\r\n                <Animated.View\r\n                    entering={FadeInUp.delay(200)}\r\n                    className=\"bg-red-50 p-3 rounded-lg border border-red-100 m-4 \"\r\n                >\r\n                    <Text className=\"text-red-800 font-bold mb-1\">No App Mechanic Found</Text>\r\n                    <Text className=\"text-red-600 text-xs\">\r\n                        We couldn't match you with a partner. Here are nearby shops you can contact directly.\r\n                    </Text>\r\n                </Animated.View>\r\n\r\n                {jobDetails && (\r\n                    <Animated.View\r\n                        entering={FadeInUp.delay(300)}\r\n                        className=\"flex-row items-center\"\r\n                    >\r\n                        <Text className=\"text-gray-500 text-xs font-bold uppercase mr-2\">Your Request:</Text>\r\n                        <Text className=\"font-bold text-gray-800\">{jobDetails.vehicleType} - {jobDetails.problem}</Text>\r\n                    </Animated.View>\r\n                )}\r\n            </View>\r\n\r\n            {loading ? (\r\n                <View className=\"flex-1 items-center justify-center\">\r\n                    <ActivityIndicator size=\"large\" color=\"#3b82f6\" />\r\n                    <Text className=\"text-gray-500 mt-4\">Searching nearby services...</Text>\r\n                </View>\r\n            ) : (\r\n                <FlatList\r\n                    data={mechanics}\r\n                    keyExtractor={(item) => item.place_id || item.business_id || Math.random().toString()}\r\n                    renderItem={renderItem}\r\n                    contentContainerStyle={{ padding: 16, paddingBottom: 100 }}\r\n                    ListEmptyComponent={\r\n                        <Animated.View\r\n                            entering={ZoomIn}\r\n                            className=\"items-center justify-center py-20 px-6\"\r\n                        >\r\n                            <View className=\"w-24 h-24 bg-gray-100 rounded-full items-center justify-center mb-6\">\r\n                                <Ionicons name=\"search\" size={48} color=\"#9ca3af\" />\r\n                            </View>\r\n                            <Text className=\"text-xl font-bold text-gray-900 mb-2\">No Mechanics Found Nearby</Text>\r\n                            <Text className=\"text-gray-500 text-center mb-8\">\r\n                                We couldn't find any auto repair shops in your immediate vicinity using our database.\r\n                            </Text>\r\n\r\n                            <TouchableOpacity\r\n                                onPress={() => Linking.openURL('https://www.google.com/maps/search/?api=1&query=mechanics_nearby')}\r\n                                className=\"bg-white px-6 py-4 rounded-full shadow-md border border-gray-200 flex-row items-center\"\r\n                            >\r\n                                <Image\r\n                                    source={{ uri: \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/480px-Google_%22G%22_logo.svg.png\" }}\r\n                                    className=\"w-6 h-6 mr-3\"\r\n                                    resizeMode=\"contain\"\r\n                                />\r\n                                <Text className=\"font-bold text-gray-700 text-base\">\r\n                                    Search on Google Maps\r\n                                </Text>\r\n                            </TouchableOpacity>\r\n                        </Animated.View>\r\n                    }\r\n                />\r\n            )}\r\n        </SafeAreaView>\r\n    );\r\n}\r\n","import { Ionicons } from '@expo/vector-icons';\r\nimport { useNavigation, useRoute } from '@react-navigation/native';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { Alert, KeyboardAvoidingView, Platform, ScrollView, Text, TextInput, TouchableOpacity, View } from 'react-native';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport api from '../utils/api';\r\n\r\nconst OTPScreen = () => {\r\n    const route = useRoute();\r\n    const navigation = useNavigation();\r\n    const { checkAuth } = useAuth();\r\n\r\n    // Destructure params passed from Login Page\r\n    const { email, key, id, status } = route.params || {};\r\n\r\n    const [otp, setOtp] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [timer, setTimer] = useState(60);\r\n    const [canResend, setCanResend] = useState(false);\r\n    const otpInputRef = useRef(null);\r\n    useEffect(() => {\r\n        // Small delay to ensure the screen is fully mounted before opening keyboard\r\n        const timer = setTimeout(() => {\r\n            otpInputRef.current?.focus();\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n    }, []);\r\n    // Timer Logic\r\n    useEffect(() => {\r\n        let interval;\r\n        if (timer > 0) {\r\n            interval = setInterval(() => setTimer((prev) => prev - 1), 1000);\r\n        } else {\r\n            setCanResend(true);\r\n        }\r\n        return () => clearInterval(interval);\r\n    }, [timer]);\r\n\r\n    const handleVerify = async () => {\r\n        console.log(\"OTPScreen: handleVerify pressed\", { otp, email });\r\n        if (!otp || otp.length < 6) {\r\n            Alert.alert(\"Invalid OTP\", \"Please enter a valid 6-digit OTP.\");\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            // 1. Verify OTP\r\n            console.log(\"OTPScreen: Sending verification request...\");\r\n            // Adjust URL based on your specific backend route for verification\r\n            // Common pattern: /users/verify_otp/ or similar. \r\n            // Based on your web app logic, we send the key and otp.\r\n\r\n            const response = await api.post('/users/otp-verify/', {\r\n                id: id,\r\n                otp: otp,\r\n                key: key\r\n            });\r\n            console.log(\"OTPScreen: Verification successful\", response.data);\r\n\r\n            // 2. Handle Success\r\n            if (response.status === 200 || response.status === 201) {\r\n\r\n                if (status === 'New User') {\r\n                    // Navigate to the ProcessForm if new\r\n                    console.log(\"New User verified. Navigate to ProcessForm.\");\r\n                    navigation.replace('ProcessForm', { email, id });\r\n                } else {\r\n                    await checkAuth();\r\n                    // Navigation is handled automatically by App.js when isAuthenticated becomes true\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(\"OTPScreen: Verification error\", error);\r\n            const errorMsg = error.response?.data?.error || \"Verification failed.\";\r\n            Alert.alert(\"Error\", errorMsg);\r\n            setOtp(''); // Clear OTP so they can rewrite from scratch\r\n            otpInputRef.current?.focus(); // Refocus the input\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleResend = async () => {\r\n        setLoading(true);\r\n        try {\r\n            // Call your resend API here\r\n            await api.post('/users/resend-otp/', { email });\r\n            setTimer(60);\r\n            setCanResend(false);\r\n            Alert.alert(\"Success\", \"OTP has been resent to your email.\");\r\n        } catch (error) {\r\n            Alert.alert(\"Error\", \"Failed to resend OTP. Try again later.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <SafeAreaView className=\"flex-1 bg-white\">\r\n            <KeyboardAvoidingView\r\n                behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\r\n                className=\"flex-1\"\r\n            >\r\n                {/* Header */}\r\n                <View className=\"flex-row items-center p-4 border-b border-gray-100\">\r\n                    <TouchableOpacity onPress={() => navigation.goBack()} className=\"p-2\">\r\n                        <Ionicons name=\"arrow-back\" size={24} color=\"black\" />\r\n                    </TouchableOpacity>\r\n                    <Text className=\"flex-1 text-center text-lg font-bold text-gray-900 mr-10\">\r\n                        OTP Verification\r\n                    </Text>\r\n                </View>\r\n\r\n                <ScrollView contentContainerStyle={{ flexGrow: 1 }} keyboardShouldPersistTaps=\"handled\">\r\n                    <View className=\"items-center mt-8\">\r\n                        <Text className=\"text-3xl font-bold text-gray-900 mb-2 text-center\">\r\n                            {status === 'New User' ? 'Welcome to Mechanic Setu' : 'Welcome Back!'}\r\n                        </Text>\r\n                        <Text className=\"text-lg font-medium text-gray-600 mb-6 text-center\">\r\n                            OTP Verification\r\n                        </Text>\r\n\r\n                        <Text className=\"text-gray-500 text-center mb-8 px-8\">\r\n                            We have sent a verification code to {\"\\n\"}\r\n                            <Text className=\"font-bold text-gray-900\">{email}</Text>\r\n                        </Text>\r\n                    </View>\r\n\r\n                    <View className=\"flex-1 px-6 pt-10 items-center\">\r\n\r\n                        {/* OTP Inputs */}\r\n                        <TouchableOpacity\r\n                            activeOpacity={1}\r\n                            onPress={() => otpInputRef.current?.focus()} // Force focus when tapping anywhere in the area\r\n                            className=\"relative flex-row justify-between w-full mb-8 px-2\"\r\n                        >\r\n                            {/* Display Boxes */}\r\n                            {Array(6).fill().map((_, i) => (\r\n                                <View\r\n                                    key={i}\r\n                                    className={`w-11 h-14 rounded-xl border items-center justify-center ${otp[i]\r\n                                        ? 'border-gray-900 bg-gray-50'\r\n                                        : 'border-gray-300 bg-white'\r\n                                        }`}\r\n                                >\r\n                                    <Text className=\"text-gray-900 text-xl font-bold\">\r\n                                        {otp[i]}\r\n                                    </Text>\r\n                                </View>\r\n                            ))}\r\n\r\n                            {/* Hidden Input Layer */}\r\n                            <TextInput\r\n                                ref={otpInputRef} // Attach the ref\r\n                                value={otp}\r\n                                onChangeText={(text) => {\r\n                                    const cleaned = text.replace(/[^0-9]/g, '');\r\n                                    if (cleaned.length <= 6) {\r\n                                        setOtp(cleaned); // Allow rewriting/updating state\r\n                                    }\r\n                                }}\r\n                                maxLength={6}\r\n                                keyboardType=\"number-pad\"\r\n                                caretHidden={true}\r\n                                selectionColor=\"transparent\" // Hide the selection highlight\r\n                                style={{\r\n                                    position: 'absolute',\r\n                                    width: '100%',\r\n                                    height: '100%',\r\n                                    opacity: 0, // Keep it invisible but functional\r\n                                    fontSize: 1, // Minimize visual impact on some devices\r\n                                }}\r\n                                autoFocus={true}\r\n                            />\r\n                        </TouchableOpacity>\r\n\r\n                        {/* Resend Timer */}\r\n                        <View className=\"mb-10\">\r\n                            {canResend ? (\r\n                                <TouchableOpacity onPress={handleResend}>\r\n                                    <Text className=\"text-blue-600 font-bold text-base\">Resend Code</Text>\r\n                                </TouchableOpacity>\r\n                            ) : (\r\n                                <Text className=\"text-gray-400 text-base\">\r\n                                    Resend Code in <Text className=\"text-gray-600 font-medium\">{timer}s</Text>\r\n                                </Text>\r\n                            )}\r\n                        </View>\r\n\r\n                        {/* Verify Button */}\r\n                        <TouchableOpacity\r\n                            onPress={handleVerify}\r\n                            disabled={loading}\r\n                            className={`w-full py-4 rounded-xl items-center shadow-sm ${loading ? 'bg-gray-400' : 'bg-gray-900'}`}\r\n                        >\r\n                            <Text className=\"text-white font-bold text-lg tracking-wide\">\r\n                                {loading ? 'Verifying...' : 'Verify'}\r\n                            </Text>\r\n                        </TouchableOpacity>\r\n\r\n                    </View>\r\n\r\n                </ScrollView>\r\n            </KeyboardAvoidingView>\r\n        </SafeAreaView>\r\n    );\r\n};\r\n\r\nexport default OTPScreen;\r\n","\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport { useNavigation, useRoute } from \"@react-navigation/native\";\r\nimport { useState } from \"react\";\r\nimport { ActivityIndicator, Alert, KeyboardAvoidingView, Platform, ScrollView, Text, TextInput, TouchableOpacity, View } from \"react-native\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport api from \"../utils/api\";\r\n\r\nconst ProcessFormScreen = () => {\r\n    const navigation = useNavigation();\r\n    const route = useRoute();\r\n    const { checkAuth } = useAuth();\r\n\r\n    // Get status and existing data passed from Login/OTP\r\n    const { status = \"Manual\", email, id } = route.params || {};\r\n\r\n    const [step, setStep] = useState(1);\r\n    const [loading, setLoading] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        phone: \"\",\r\n    });\r\n    const [errors, setErrors] = useState({});\r\n\r\n    // --- FORM NAVIGATION ---\r\n    const nextStep = () => {\r\n        if (validateCurrentStep()) {\r\n            setStep(step + 1);\r\n        }\r\n    };\r\n\r\n    const prevStep = () => {\r\n        setStep(step - 1);\r\n    };\r\n\r\n    // --- VALIDATION LOGIC ---\r\n    const validateCurrentStep = () => {\r\n        let newErrors = {};\r\n        if (step === 1) {\r\n            if (!formData.firstName) newErrors.firstName = \"First name is required\";\r\n            if (!formData.lastName) newErrors.lastName = \"Last name is required\";\r\n        } else if (step === 2) {\r\n            if (!formData.phone) newErrors.phone = \"Phone number is required\";\r\n            if (formData.phone.length < 10) newErrors.phone = \"Enter a valid phone number\";\r\n        }\r\n        setErrors(newErrors);\r\n        return Object.keys(newErrors).length === 0;\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        setLoading(true);\r\n        setErrors({});\r\n\r\n        const payload = {\r\n            id: id,\r\n            first_name: status === \"Google\" ? null : formData.firstName,\r\n            last_name: status === \"Google\" ? null : formData.lastName,\r\n            // Ensure +91 format\r\n            mobile_number: formData.phone.startsWith('+91') ? formData.phone : `+91${formData.phone}`,\r\n            profile_pic: null\r\n        };\r\n\r\n        try {\r\n            console.log(\"ProcessForm: Submitting...\", payload);\r\n            const res = await api.post(\"/users/SetUsersDetail/\", payload);\r\n            console.log(\"Saved user details:\", res.data);\r\n\r\n            // Move to success step\r\n            setStep((s) => s + 1);\r\n\r\n            // Wait a bit, then checkAuth (which should log the user in and move to Dashboard)\r\n            setTimeout(async () => {\r\n                await checkAuth();\r\n            }, 2000);\r\n\r\n        } catch (err) {\r\n            console.error(\"Save failed:\", err);\r\n            if (err.response) {\r\n                console.log(\"Save Error Data:\", JSON.stringify(err.response.data, null, 2));\r\n                console.log(\"Save Error Status:\", err.response.status);\r\n            }\r\n            const msg = err.response?.data?.detail || \"Failed to save details. Try again.\";\r\n            Alert.alert(\"Error\", msg);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- MODERN PROGRESS BAR ---\r\n    const ProgressBar = ({ currentStep }) => {\r\n        const steps = [\"Personal\", \"Contact\", \"Review\"];\r\n        return (\r\n            <View className=\"mb-10 px-4\">\r\n                <View className=\"flex-row justify-between items-center relative\">\r\n                    {/* Background Line */}\r\n                    <View className=\"absolute left-0 right-0 h-1 bg-gray-100 rounded-full top-[14px]\" />\r\n\r\n                    {steps.map((stepLabel, index) => {\r\n                        const stepNum = index + 1;\r\n                        const isActive = currentStep >= stepNum;\r\n                        return (\r\n                            <View key={index} className=\"items-center z-10 w-20\">\r\n                                <View\r\n                                    className={`w-8 h-8 items-center justify-center rounded-full border-4 ${isActive\r\n                                            ? \"bg-gray-900 border-gray-900\"\r\n                                            : \"bg-white border-gray-200\"\r\n                                        }`}\r\n                                >\r\n                                    {isActive ? (\r\n                                        <View className=\"w-2 h-2 rounded-full bg-white\" />\r\n                                    ) : null}\r\n                                </View>\r\n                                <Text className={`mt-2 text-[10px] font-bold uppercase tracking-wider ${isActive ? \"text-gray-900\" : \"text-gray-300\"\r\n                                    }`}>\r\n                                    {stepLabel}\r\n                                </Text>\r\n                            </View>\r\n                        );\r\n                    })}\r\n                </View>\r\n            </View>\r\n        );\r\n    };\r\n\r\n    // --- RENDER STEPS ---\r\n    const renderContent = () => {\r\n        if (step === 4) {\r\n            return (\r\n                <View className=\"items-center justify-center py-10\">\r\n                    <View className=\"w-24 h-24 bg-green-50 rounded-full items-center justify-center mb-6\">\r\n                        <Ionicons name=\"checkmark-sharp\" size={48} color=\"#16a34a\" />\r\n                    </View>\r\n                    <Text className=\"text-3xl font-bold text-gray-900 mb-2\">All Set!</Text>\r\n                    <Text className=\"text-gray-500 text-center px-8\">Your profile has been created successfully. Taking you to the dashboard...</Text>\r\n                    <ActivityIndicator size=\"large\" color=\"#111827\" className=\"mt-8\" />\r\n                </View>\r\n            );\r\n        }\r\n\r\n        // Google Flow\r\n        if (status === \"Google\") {\r\n            return (\r\n                <View className=\"space-y-6 pt-4\">\r\n                    <View className=\"items-center mb-4\">\r\n                        <View className=\"w-16 h-16 bg-blue-50 rounded-full items-center justify-center mb-4\">\r\n                            <Ionicons name=\"phone-portrait-outline\" size={32} color=\"#2563eb\" />\r\n                        </View>\r\n                        <Text className=\"text-2xl font-bold text-gray-900 text-center\">One Last Thing</Text>\r\n                        <Text className=\"text-gray-500 text-center px-6\">We need your mobile number to connect you with mechanics nearby.</Text>\r\n                    </View>\r\n\r\n                    <View>\r\n                        <Text className=\"text-xs font-bold text-gray-900 uppercase tracking-wider mb-2 ml-1\">Phone Number</Text>\r\n                        <View className=\"flex-row items-center border border-gray-200 rounded-xl bg-gray-50 focus:border-gray-900 focus:bg-white overflow-hidden h-14\">\r\n                            <View className=\"pl-4 pr-3 border-r border-gray-200 h-full justify-center items-center bg-gray-100\">\r\n                                <Text className=\"text-gray-500 font-bold\">+91</Text>\r\n                            </View>\r\n                            <TextInput\r\n                                value={formData.phone}\r\n                                onChangeText={(text) => {\r\n                                    const cleaned = text.replace(/[^0-9]/g, '');\r\n                                    if (cleaned.length <= 10) setFormData({ ...formData, phone: cleaned });\r\n                                }}\r\n                                placeholder=\"98765 43210\"\r\n                                placeholderTextColor=\"#9ca3af\"\r\n                                keyboardType=\"number-pad\"\r\n                                maxLength={10}\r\n                                className=\"flex-1 px-4 text-lg text-gray-900 font-medium h-full\"\r\n                            />\r\n                        </View>\r\n                        {errors.phone && <Text className=\"text-red-500 text-sm mt-1 ml-1\">{errors.phone}</Text>}\r\n                    </View>\r\n\r\n                    <TouchableOpacity\r\n                        onPress={handleSubmit}\r\n                        disabled={loading}\r\n                        className=\"w-full py-4 bg-gray-900 rounded-xl items-center shadow-lg shadow-gray-200 mt-4 active:scale-95 transition-transform\"\r\n                    >\r\n                        {loading ? <ActivityIndicator color=\"#fff\" /> : <Text className=\"text-white font-bold text-lg\">Complete Setup</Text>}\r\n                    </TouchableOpacity>\r\n                </View>\r\n            )\r\n        }\r\n\r\n        // Standard Flow\r\n        switch (step) {\r\n            case 1:\r\n                return (\r\n                    <View className=\"space-y-6\">\r\n                        <View className=\"items-center mb-4\">\r\n                            <Text className=\"text-2xl font-bold text-gray-900\">Personal Details</Text>\r\n                            <Text className=\"text-gray-500\">Let's get to know you better</Text>\r\n                        </View>\r\n\r\n                        <View>\r\n                            <Text className=\"text-xs font-bold text-gray-900 uppercase tracking-wider mb-2 ml-1\">First Name</Text>\r\n                            <TextInput\r\n                                value={formData.firstName}\r\n                                onChangeText={(text) => setFormData({ ...formData, firstName: text })}\r\n                                className=\"w-full px-4 py-4 bg-gray-50 rounded-xl text-gray-900 border border-gray-200 focus:border-black focus:bg-white text-lg font-medium\"\r\n                                placeholder=\"e.g. Rahul\"\r\n                                placeholderTextColor=\"#9ca3af\"\r\n                            />\r\n                            {errors.firstName && <Text className=\"text-red-500 text-sm mt-1 ml-1\">{errors.firstName}</Text>}\r\n                        </View>\r\n                        <View>\r\n                            <Text className=\"text-xs font-bold text-gray-900 uppercase tracking-wider mb-2 ml-1\">Last Name</Text>\r\n                            <TextInput\r\n                                value={formData.lastName}\r\n                                onChangeText={(text) => setFormData({ ...formData, lastName: text })}\r\n                                className=\"w-full px-4 py-4 bg-gray-50 rounded-xl text-gray-900 border border-gray-200 focus:border-black focus:bg-white text-lg font-medium\"\r\n                                placeholder=\"e.g. Sharma\"\r\n                                placeholderTextColor=\"#9ca3af\"\r\n                            />\r\n                            {errors.lastName && <Text className=\"text-red-500 text-sm mt-1 ml-1\">{errors.lastName}</Text>}\r\n                        </View>\r\n                    </View>\r\n                );\r\n            case 2:\r\n                return (\r\n                    <View className=\"space-y-6\">\r\n                        <View className=\"items-center mb-4\">\r\n                            <Text className=\"text-2xl font-bold text-gray-900\">Contact</Text>\r\n                            <Text className=\"text-gray-500\">Your number is used for OTP verification</Text>\r\n                        </View>\r\n\r\n                        <View>\r\n                            <Text className=\"text-xs font-bold text-gray-900 uppercase tracking-wider mb-2 ml-1\">Phone Number</Text>\r\n                            <View className=\"flex-row items-center border border-gray-200 rounded-xl bg-gray-50 focus:border-gray-900 focus:bg-white overflow-hidden h-14\">\r\n                                <View className=\"pl-4 pr-3 border-r border-gray-200 h-full justify-center items-center bg-gray-100\">\r\n                                    <Text className=\"text-gray-500 font-bold\">+91</Text>\r\n                                </View>\r\n                                <TextInput\r\n                                    value={formData.phone}\r\n                                    onChangeText={(text) => {\r\n                                        const cleaned = text.replace(/[^0-9]/g, '');\r\n                                        if (cleaned.length <= 10) setFormData({ ...formData, phone: cleaned });\r\n                                    }}\r\n                                    placeholder=\"98765 43210\"\r\n                                    placeholderTextColor=\"#9ca3af\"\r\n                                    keyboardType=\"number-pad\"\r\n                                    maxLength={10}\r\n                                    className=\"flex-1 px-4 text-lg text-gray-900 font-medium h-full\"\r\n                                />\r\n                            </View>\r\n                            {errors.phone && <Text className=\"text-red-500 text-sm mt-1 ml-1\">{errors.phone}</Text>}\r\n                        </View>\r\n                    </View>\r\n                );\r\n            case 3:\r\n                return (\r\n                    <View>\r\n                        <View className=\"items-center mb-6\">\r\n                            <Text className=\"text-2xl font-bold text-gray-900\">Summary</Text>\r\n                            <Text className=\"text-gray-500\">Please review your details</Text>\r\n                        </View>\r\n\r\n                        <View className=\"bg-white p-6 rounded-2xl space-y-6 border border-gray-100 shadow-md\">\r\n                            <View className=\"flex-row items-center\">\r\n                                <View className=\"w-12 h-12 bg-blue-50 rounded-full items-center justify-center mr-4 border border-blue-100\">\r\n                                    <Ionicons name=\"person\" size={20} color=\"#2563eb\" />\r\n                                </View>\r\n                                <View>\r\n                                    <Text className=\"text-xs text-gray-400 uppercase font-bold tracking-wider mb-1\">Full Name</Text>\r\n                                    <Text className=\"text-gray-900 text-lg font-bold\">{formData.firstName} {formData.lastName}</Text>\r\n                                </View>\r\n                            </View>\r\n\r\n                            <View className=\"flex-row items-center\">\r\n                                <View className=\"w-12 h-12 bg-green-50 rounded-full items-center justify-center mr-4 border border-green-100\">\r\n                                    <Ionicons name=\"call\" size={20} color=\"#16a34a\" />\r\n                                </View>\r\n                                <View>\r\n                                    <Text className=\"text-xs text-gray-400 uppercase font-bold tracking-wider mb-1\">Phone</Text>\r\n                                    <Text className=\"text-gray-900 text-lg font-bold\">+91 {formData.phone}</Text>\r\n                                </View>\r\n                            </View>\r\n                        </View>\r\n                    </View>\r\n                );\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <SafeAreaView className=\"flex-1 bg-white\">\r\n            <KeyboardAvoidingView behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"} className=\"flex-1\">\r\n                {/* Header */}\r\n                <View className=\"flex-row items-center p-4\">\r\n                    {step > 1 && step < 4 && status !== \"Google\" ? (\r\n                        <TouchableOpacity onPress={prevStep} className=\"p-2 bg-gray-50 rounded-full\">\r\n                            <Ionicons name=\"arrow-back\" size={24} color=\"black\" />\r\n                        </TouchableOpacity>\r\n                    ) : (\r\n                        <View className=\"w-10\" />\r\n                    )}\r\n                </View>\r\n\r\n                <ScrollView contentContainerStyle={{ flexGrow: 1, paddingHorizontal: 24, paddingBottom: 40 }}>\r\n\r\n                    {/* Show Progress Bar only for manual flow and steps 1-3 */}\r\n                    {status !== \"Google\" && step <= 3 && <ProgressBar currentStep={step} />}\r\n\r\n                    {/* Form Content */}\r\n                    <View className=\"flex-1 justify-center\">\r\n                        {renderContent()}\r\n                    </View>\r\n\r\n                    {/* Navigation Buttons for Manual Flow */}\r\n                    {step < 4 && status !== \"Google\" && (\r\n                        <View className=\"mt-10\">\r\n                            {step < 3 ? (\r\n                                <TouchableOpacity\r\n                                    onPress={nextStep}\r\n                                    className=\"w-full py-4 rounded-xl bg-gray-900 shadow-lg shadow-gray-200 items-center active:scale-95 transition-transform\"\r\n                                >\r\n                                    <Text className=\"text-white font-bold text-lg\">Continue</Text>\r\n                                </TouchableOpacity>\r\n                            ) : (\r\n                                <TouchableOpacity\r\n                                    onPress={handleSubmit}\r\n                                    disabled={loading}\r\n                                    className=\"w-full py-4 rounded-xl bg-gray-900 shadow-lg shadow-gray-200 items-center active:scale-95 transition-transform\"\r\n                                >\r\n                                    {loading ? <ActivityIndicator color=\"#fff\" /> : <Text className=\"text-white font-bold text-lg\">Create Account</Text>}\r\n                                </TouchableOpacity>\r\n                            )}\r\n                        </View>\r\n                    )}\r\n\r\n                </ScrollView>\r\n            </KeyboardAvoidingView>\r\n        </SafeAreaView>\r\n    );\r\n};\r\n\r\nexport default ProcessFormScreen;\r\n","\r\nimport { Ionicons, MaterialCommunityIcons } from '@expo/vector-icons';\r\nimport { useEffect, useState } from 'react';\r\nimport { ActivityIndicator, Image, RefreshControl, ScrollView, Text, TouchableOpacity, View } from 'react-native';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport api from '../utils/api';\r\n\r\nconst ProfileScreen = ({ navigation }) => {\r\n    const { logout, profile: authUser, checkAuth } = useAuth();\r\n    // Stores the full list from API\r\n    const [allHistory, setAllHistory] = useState([]);\r\n    // Stores the currently displayed list\r\n    const [history, setHistory] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Pagination constants\r\n    const ITEMS_PER_PAGE = 10;\r\n\r\n    useEffect(() => {\r\n        fetchAllData();\r\n    }, []);\r\n\r\n    const fetchAllData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            // Refresh global auth user to get latest profile\r\n            await checkAuth();\r\n            // Fetch history locally\r\n            await fetchHistory();\r\n        } finally {\r\n            setLoading(false);\r\n            setRefreshing(false);\r\n        }\r\n    };\r\n\r\n    // Use authUser from context as the primary source of truth\r\n    const userData = authUser || {};\r\n\r\n    const fetchHistory = async () => {\r\n        try {\r\n            const res = await api.get('/Profile/UserHistory/');\r\n            const fullList = res.data || [];\r\n\r\n            // Sort by Date Descending (Newest first)\r\n            // Assuming created_at is an ISO string\r\n            fullList.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n\r\n            setAllHistory(fullList);\r\n            // Initial slice\r\n            setHistory(fullList.slice(0, ITEMS_PER_PAGE));\r\n        } catch (err) {\r\n            console.error(\"History fetch error:\", err);\r\n        }\r\n    };\r\n\r\n    const loadMoreHistory = () => {\r\n        const currentLength = history.length;\r\n        const nextChunk = allHistory.slice(currentLength, currentLength + ITEMS_PER_PAGE);\r\n        if (nextChunk.length > 0) {\r\n            setHistory(prev => [...prev, ...nextChunk]);\r\n        }\r\n    };\r\n\r\n    const onRefresh = () => {\r\n        setRefreshing(true);\r\n        fetchAllData();\r\n    };\r\n\r\n    const getStatusColor = (status) => {\r\n        switch (status) {\r\n            case 'COMPLETED': return 'bg-green-100 text-green-700 border-green-500';\r\n            case 'CANCELLED': return 'bg-red-100 text-red-700 border-red-500';\r\n            case 'EXPIRED': return 'bg-gray-100 text-gray-700 border-gray-500';\r\n            default: return 'bg-gray-100 text-gray-700 border-gray-400';\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateString) => {\r\n        if (!dateString) return '';\r\n        const date = new Date(dateString);\r\n        return date.toLocaleDateString('en-IN', {\r\n            day: 'numeric', month: 'short', year: 'numeric',\r\n            hour: '2-digit', minute: '2-digit'\r\n        });\r\n    };\r\n\r\n    const renderHistoryItem = (item) => {\r\n        const statusStyle = getStatusColor(item.status);\r\n        const isCompleted = item.status === 'COMPLETED';\r\n\r\n        return (\r\n            <View key={item.id} className=\"bg-white rounded-2xl p-4 mb-4 shadow-sm border border-gray-100\">\r\n                <View className=\"flex-row justify-between items-start mb-2\">\r\n                    <View className=\"flex-row items-center space-x-2\">\r\n                        <View className={`p-2 rounded-full ${item.status === 'COMPLETED' ? 'bg-green-50' : 'bg-red-50'}`}>\r\n                            {item.vehical_type === 'car' ? (\r\n                                <Ionicons name=\"car-sport\" size={20} color={item.status === 'COMPLETED' ? '#16a34a' : '#ef4444'} />\r\n                            ) : (\r\n                                <MaterialCommunityIcons name=\"motorbike\" size={20} color={item.status === 'COMPLETED' ? '#16a34a' : '#ef4444'} />\r\n                            )}\r\n                        </View>\r\n                        <View>\r\n                            <Text className=\"text-gray-900 font-bold text-base\">{item.problem}</Text>\r\n                            <Text className=\"text-xs text-gray-400\">{formatDate(item.created_at)}</Text>\r\n                        </View>\r\n                    </View>\r\n                    <View className={`px-2 py-1 rounded-lg border ${statusStyle.split(' ')[2]} ${statusStyle.split(' ')[0]}`}>\r\n                        <Text className={`text-xs font-bold ${statusStyle.split(' ')[1]}`}>{item.status}</Text>\r\n                    </View>\r\n                </View>\r\n\r\n                <View className=\"mt-2 space-y-1\">\r\n                    <View className=\"flex-row items-start\">\r\n                        <Ionicons name=\"location-sharp\" size={14} color=\"#9ca3af\" style={{ marginTop: 2, marginRight: 4 }} />\r\n                        <Text className=\"text-gray-500 text-sm flex-1\" numberOfLines={2}>\r\n                            {item.location}\r\n                        </Text>\r\n                    </View>\r\n\r\n                    {item.price && (\r\n                        <View className=\"flex-row items-center mt-2\">\r\n                            <Text className=\"text-gray-900 font-bold text-lg\">{item.price}</Text>\r\n                            <Text className=\"text-gray-400 text-xs ml-1\"> paid</Text>\r\n                        </View>\r\n                    )}\r\n\r\n                    {item.status === 'CANCELLED' && item.cancellation_reason && (\r\n                        <Text className=\"text-red-400 text-xs mt-1 italic\">\r\n                            Reason: {item.cancellation_reason}\r\n                        </Text>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        );\r\n    };\r\n\r\n    if (loading && !refreshing) {\r\n        return (\r\n            <SafeAreaView className=\"flex-1 bg-white justify-center items-center\">\r\n                <ActivityIndicator size=\"large\" color=\"#000\" />\r\n            </SafeAreaView>\r\n        );\r\n    }\r\n\r\n    const firstName = userData.first_name || \"User\";\r\n    const lastName = userData.last_name || \"\";\r\n    const email = userData.email || \"No Email\";\r\n    const phone = userData.mobile_number || \"No Phone\";\r\n    const initials = (firstName[0] + (lastName[0] || \"\")).toUpperCase();\r\n\r\n    return (\r\n        <SafeAreaView className=\"flex-1 bg-white\">\r\n            {/* Header */}\r\n            <View className=\"flex-row items-center p-4 border-b border-gray-100 bg-white z-10\">\r\n                <TouchableOpacity onPress={() => navigation.goBack()} className=\"p-2 absolute left-4 z-20\">\r\n                    <Ionicons name=\"arrow-back\" size={24} color=\"black\" />\r\n                </TouchableOpacity>\r\n                <Text className=\"flex-1 text-center text-lg font-bold text-gray-900\">\r\n                    My Profile\r\n                </Text>\r\n            </View>\r\n\r\n            <ScrollView\r\n                refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}\r\n                contentContainerStyle={{ paddingBottom: 40 }}\r\n                showsVerticalScrollIndicator={false}\r\n            >\r\n                <View className=\"p-6 pb-0\">\r\n                    {/* Avatar Section */}\r\n                    <View className=\"items-center mb-8\">\r\n                        <View className=\"w-28 h-28 rounded-full bg-gray-50 items-center justify-center mb-4 overflow-hidden border-4 border-white shadow-lg shadow-blue-100\">\r\n                            {userData.profile_pic ? (\r\n                                <Image source={{ uri: userData.profile_pic }} className=\"w-full h-full\" />\r\n                            ) : (\r\n                                <Text className=\"text-3xl font-bold text-gray-400\">{initials}</Text>\r\n                            )}\r\n                        </View>\r\n                        <Text className=\"text-2xl font-bold text-gray-900\">{firstName} {lastName}</Text>\r\n                        <Text className=\"text-gray-500 font-medium\">{email}</Text>\r\n                        <View className=\"mt-2 px-3 py-1 bg-blue-50 rounded-full border border-blue-100\">\r\n                            <Text className=\"text-blue-600 text-xs font-bold\">{phone}</Text>\r\n                        </View>\r\n                    </View>\r\n\r\n                    {/* Quick Stats or Separator */}\r\n                    <View className=\"flex-row justify-between bg-gray-900 rounded-2xl p-6 mb-8 shadow-xl shadow-gray-300\">\r\n                        <View className=\"items-center flex-1 border-r border-gray-700\">\r\n                            <Text className=\"text-white text-2xl font-bold\">{allHistory.filter(h => h.status === 'COMPLETED').length}</Text>\r\n                            <Text className=\"text-gray-400 text-xs uppercase tracking-wider mt-1\">Services</Text>\r\n                        </View>\r\n                        <View className=\"items-center flex-1\">\r\n                            <Text className=\"text-white text-2xl font-bold\">{allHistory.length}</Text>\r\n                            <Text className=\"text-gray-400 text-xs uppercase tracking-wider mt-1\">Total</Text>\r\n                        </View>\r\n                    </View>\r\n\r\n                    {/* History Section */}\r\n                    <View className=\"mb-4\">\r\n                        <Text className=\"text-xl font-bold text-gray-900 mb-4\">Service History</Text>\r\n                        {history.length > 0 ? (\r\n                            <>\r\n                                {history.map(renderHistoryItem)}\r\n\r\n                                {/* Load More Button */}\r\n                                {history.length < allHistory.length && (\r\n                                    <TouchableOpacity\r\n                                        onPress={loadMoreHistory}\r\n                                        className=\"py-3 bg-gray-100 rounded-xl items-center mt-2 active:bg-gray-200\"\r\n                                    >\r\n                                        <Text className=\"text-gray-600 font-bold text-sm\">Load More</Text>\r\n                                    </TouchableOpacity>\r\n                                )}\r\n                            </>\r\n                        ) : (\r\n                            <View className=\"items-center py-10 bg-gray-50 rounded-xl border-dashed border-2 border-gray-200\">\r\n                                <Ionicons name=\"document-text-outline\" size={40} color=\"#d1d5db\" />\r\n                                <Text className=\"text-gray-400 mt-2\">No service history found</Text>\r\n                            </View>\r\n                        )}\r\n                    </View>\r\n\r\n                    {/* Actions */}\r\n                    <View className=\"space-y-3 pt-4 border-t border-gray-100\">\r\n                        <TouchableOpacity\r\n                            onPress={logout}\r\n                            className=\"flex-row items-center justify-center py-4 bg-red-50 rounded-xl\"\r\n                        >\r\n                            <Text className=\"text-red-500 font-bold text-lg\">Logout</Text>\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                </View>\r\n            </ScrollView>\r\n        </SafeAreaView>\r\n    );\r\n};\r\n\r\nexport default ProfileScreen;\r\n","import { Ionicons, MaterialCommunityIcons, MaterialIcons } from '@expo/vector-icons';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport * as Location from 'expo-location';\r\nimport * as SecureStore from 'expo-secure-store';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport {\r\n    ActivityIndicator,\r\n    Dimensions,\r\n    Image,\r\n    KeyboardAvoidingView,\r\n    Platform,\r\n    ScrollView,\r\n    StatusBar,\r\n    Text,\r\n    TextInput,\r\n    TouchableOpacity,\r\n    View\r\n} from 'react-native';\r\n// FIX 1: Explicitly import Marker here\r\nimport Animated, { FadeIn, SlideInRight, SlideOutLeft, ZoomIn } from 'react-native-reanimated';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport MapView, { Marker, PROVIDER_GOOGLE } from '../components/PlatformMap';\r\nimport { getMapAds } from '../utils/adsCache';\r\nimport api from '../utils/api';\r\n\r\n\r\nconst { width, height } = Dimensions.get('window');\r\n\r\n// --- CONSTANTS ---\r\nconst VEHICLE_TYPES = [\r\n    { id: 'bike', name: 'Bike / Scooter', icon: 'motorbike', library: MaterialCommunityIcons },\r\n    { id: 'car', name: 'Car / Sedan', icon: 'car-side', library: MaterialCommunityIcons },\r\n    { id: 'truck', name: 'Truck / SUV', icon: 'truck', library: MaterialCommunityIcons }\r\n];\r\n\r\nconst PROBLEMS = {\r\n    bike: [\r\n        { name: 'Puncture Repair', icon: 'wrench' },\r\n        { name: 'Air Fill-up', icon: 'air' },\r\n        { name: 'Chain Repair', icon: 'link' },\r\n        { name: 'Spark Plug Issue', icon: 'flash' },\r\n        { name: 'Fuel Delivery', icon: 'water' },\r\n        { name: 'Key Issue', icon: 'key' },\r\n        { name: 'General Checkup', icon: 'search' },\r\n        { name: 'Other', icon: 'help-circle' }\r\n    ],\r\n    car: [\r\n        { name: 'Puncture Repair', icon: 'wrench' },\r\n        { name: 'Air Fill-up', icon: 'air' },\r\n        { name: 'Battery Jumpstart', icon: 'battery-charging' },\r\n        { name: 'Tire Replacement', icon: 'settings' },\r\n        { name: 'Fuel Delivery', icon: 'water' },\r\n        { name: 'Key Lockout', icon: 'key' },\r\n        { name: 'Engine Overheat', icon: 'thermometer' },\r\n        { name: 'Other', icon: 'help-circle' }\r\n    ],\r\n    truck: [\r\n        { name: 'Puncture Repair', icon: 'wrench' },\r\n        { name: 'Air Fill-up', icon: 'air' },\r\n        { name: 'Battery Jumpstart', icon: 'battery-charging' },\r\n        { name: 'Tire Replacement', icon: 'settings' },\r\n        { name: 'Fuel Delivery', icon: 'water' },\r\n        { name: 'Engine Issue', icon: 'cog' },\r\n        { name: 'Other', icon: 'help-circle' }\r\n    ],\r\n};\r\n\r\nconst FORM_STORAGE_KEY = 'punctureRequestFormData';\r\nexport default function ServiceRequestScreen() {\r\n    const navigation = useNavigation();\r\n    const [step, setStep] = useState(1);\r\n    const [loading, setLoading] = useState(false);\r\n    const [showDebugger, setShowDebugger] = useState(false);\r\n    const [showSuccess, setShowSuccess] = useState(false);\r\n    const [lastResponse, setLastResponse] = useState(null);\r\n\r\n    const mapRef = useRef(null);\r\n    const [formData, setFormData] = useState({\r\n        vehicleType: '',\r\n        location: 'Selecting location...',\r\n        latitude: 23.0225,\r\n        longitude: 72.5714,\r\n        problem: '',\r\n        additionalNotes: ''\r\n    });\r\n\r\n    // Ads State\r\n    const [adsData, setAdsData] = useState([]);\r\n    const [selectedAd, setSelectedAd] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const loadAds = async () => {\r\n            const ads = await getMapAds();\r\n            setAdsData(ads);\r\n        };\r\n        loadAds();\r\n    }, []);\r\n\r\n    const [mapRegion, setMapRegion] = useState({\r\n        latitude: 23.0225,\r\n        longitude: 72.5714,\r\n        latitudeDelta: 0.005,\r\n        longitudeDelta: 0.005,\r\n    });\r\n\r\n    // Load saved data\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const saved = await SecureStore.getItemAsync(FORM_STORAGE_KEY);\r\n                if (saved) {\r\n                    setFormData(JSON.parse(saved));\r\n                    console.log(\"[ServiceRequest] Loaded saved drafts.\");\r\n                }\r\n            } catch (e) {\r\n                console.warn(\"Failed to load drafts\", e);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    // Save data on change\r\n    useEffect(() => {\r\n        const saveTimeout = setTimeout(() => {\r\n            SecureStore.setItemAsync(FORM_STORAGE_KEY, JSON.stringify(formData));\r\n        }, 500);\r\n        return () => clearTimeout(saveTimeout);\r\n    }, [formData]);\r\n\r\n    const handleNext = () => {\r\n        if (canProceed()) {\r\n            setStep(step + 1);\r\n        }\r\n    };\r\n\r\n    const handlePrev = () => {\r\n        if (step > 1) setStep(step - 1);\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        setLoading(true);\r\n        try {\r\n            console.log(\"Submitting Request:\", formData);\r\n            const response = await api.post(\"/jobs/CreateServiceRequest/\", {\r\n                latitude: formData.latitude,\r\n                longitude: formData.longitude,\r\n                location: formData.location || \"Custom Pin Location\",\r\n                vehical_type: formData.vehicleType,\r\n                problem: formData.problem,\r\n                additional_details: formData.additionalNotes,\r\n            });\r\n\r\n            console.log(\"Response:\", response.data);\r\n\r\n\r\n\r\n            // Show success screen\r\n            setLastResponse(response.data);\r\n            setLoading(false);\r\n            setShowSuccess(true);\r\n\r\n            // Delay navigation to FindingMechanic\r\n            setTimeout(() => {\r\n                navigation.navigate(\"FindingMechanic\", {\r\n                    requestId: response.data.request_id,\r\n                    latitude: formData.latitude,\r\n                    longitude: formData.longitude,\r\n                    vehicleType: formData.vehicleType,\r\n                    problem: formData.problem\r\n                });\r\n                // Reset state after navigation (optional, but good practice if user comes back)\r\n                setTimeout(() => setShowSuccess(false), 500);\r\n            }, 2500);\r\n\r\n        } catch (error) {\r\n            console.error(\"Submission error:\", error);\r\n            alert(\"Failed to submit request. Please try again.\");\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const canProceed = () => {\r\n        if (step === 1) return !!formData.vehicleType;\r\n        if (step === 2) return true;\r\n        if (step === 3) return !!formData.problem;\r\n        if (step === 4) return true; // Notes are optional\r\n        if (step === 5) return true; // Review step\r\n        return false;\r\n    };\r\n\r\n    // Auto-detect location when entering Map step\r\n    useEffect(() => {\r\n        if (step === 2) {\r\n            handleCurrentLocation();\r\n        }\r\n    }, [step]);\r\n\r\n    const getAddressFromCoords = async (latitude, longitude) => {\r\n        try {\r\n            const addressResponse = await Location.reverseGeocodeAsync({ latitude, longitude });\r\n            if (addressResponse && addressResponse.length > 0) {\r\n                const addr = addressResponse[0];\r\n                return [\r\n                    addr.name,\r\n                    addr.street,\r\n                    addr.subregion,\r\n                    addr.city,\r\n                    addr.postalCode\r\n                ].filter(Boolean).join(', ');\r\n            }\r\n        } catch (error) {\r\n            console.warn(\"Reverse geocoding failed\", error);\r\n        }\r\n        return `Lat: ${latitude.toFixed(4)}, Lng: ${longitude.toFixed(4)}`;\r\n    };\r\n\r\n    const handleCurrentLocation = async () => {\r\n        setFormData(prev => ({ ...prev, location: 'Fetching current location...' }));\r\n        try {\r\n            let { status } = await Location.requestForegroundPermissionsAsync();\r\n            if (status !== 'granted') {\r\n                alert('Permission denied');\r\n                return;\r\n            }\r\n\r\n            let location = await Location.getCurrentPositionAsync({\r\n                accuracy: Location.Accuracy.Balanced,\r\n            });\r\n            const { latitude, longitude } = location.coords;\r\n            const address = await getAddressFromCoords(latitude, longitude);\r\n\r\n            const newRegion = {\r\n                latitude,\r\n                longitude,\r\n                latitudeDelta: 0.005,\r\n                longitudeDelta: 0.005,\r\n            };\r\n\r\n            setFormData(prev => ({ ...prev, latitude, longitude, location: address }));\r\n            setMapRegion(newRegion);\r\n\r\n            if (mapRef.current) {\r\n                mapRef.current.animateToRegion(newRegion, 1000);\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            setFormData(prev => ({ ...prev, location: 'Location unavailable' }));\r\n        }\r\n    };\r\n    // --- RENDER STEPS ---\r\n\r\n    // Step 1: Vehicle\r\n    const renderStep1 = () => (\r\n        <Animated.View entering={SlideInRight} exiting={SlideOutLeft} className=\"flex-1 px-4 pt-4\">\r\n            <Text className=\"text-2xl font-bold text-gray-900 mb-2\">Select Vehicle</Text>\r\n            <Text className=\"text-gray-500 mb-6\">Choose the vehicle you need help with.</Text>\r\n\r\n            <View className=\"flex-row flex-wrap justify-between\">\r\n                {VEHICLE_TYPES.map((v) => {\r\n                    const isSelected = formData.vehicleType === v.id;\r\n                    return (\r\n                        <TouchableOpacity\r\n                            key={v.id}\r\n                            onPress={() => setFormData({ ...formData, vehicleType: v.id, problem: '' })}\r\n                            className={`w-[48%] mb-4 p-4 rounded-2xl border-2 items-center justify-center h-40 shadow-sm ${isSelected ? 'bg-blue-50 border-blue-500' : 'bg-white border-gray-100'}`}\r\n                        >\r\n                            <v.library\r\n                                name={v.icon}\r\n                                size={48}\r\n                                color={isSelected ? '#3b82f6' : '#9ca3af'}\r\n                            />\r\n                            <Text className={`mt-4 font-bold ${isSelected ? 'text-blue-700' : 'text-gray-600'}`}>\r\n                                {v.name}\r\n                            </Text>\r\n                            {isSelected && (\r\n                                <View className=\"absolute top-3 right-3 bg-blue-500 rounded-full p-1\">\r\n                                    <Ionicons name=\"checkmark\" size={12} color=\"white\" />\r\n                                </View>\r\n                            )}\r\n                        </TouchableOpacity>\r\n                    );\r\n                })}\r\n            </View>\r\n        </Animated.View>\r\n    );\r\n\r\n    // Step 2: Location\r\n    const renderStep2 = () => (\r\n        <Animated.View entering={SlideInRight} exiting={SlideOutLeft} className=\"flex-1 bg-gray-50\">\r\n            <MapView\r\n                ref={mapRef}\r\n                provider={PROVIDER_GOOGLE}\r\n                style={{ flex: 1 }}\r\n                region={mapRegion}\r\n                onRegionChangeComplete={async (region) => {\r\n                    // Update region state to keep UI in sync\r\n                    setMapRegion(region);\r\n\r\n                    // Fetch address and update form data\r\n                    const address = await getAddressFromCoords(region.latitude, region.longitude);\r\n                    setFormData(prev => ({\r\n                        ...prev,\r\n                        latitude: region.latitude,\r\n                        longitude: region.longitude,\r\n                        location: address\r\n                    }));\r\n                }}\r\n            >\r\n                {/* FIX 2: Use destructured Marker component instead of MapView.Marker */}\r\n                <Marker\r\n                    coordinate={{ latitude: formData.latitude, longitude: formData.longitude }}\r\n                    opacity={0}\r\n                />\r\n\r\n                {adsData.map((ad) => (\r\n                    <Marker\r\n                        key={`ad-${ad.id}`}\r\n                        coordinate={{ latitude: ad.latitude, longitude: ad.longitude }}\r\n                        onPress={() => setSelectedAd(ad)}\r\n                    >\r\n                        <View className=\"bg-white p-0.5 rounded-full border-2 border-amber-400 shadow-lg overflow-hidden\" style={{ width: 36, height: 36 }}>\r\n                            <Image\r\n                                source={{ uri: ad.logo }}\r\n                                className=\"w-full h-full rounded-full\"\r\n                                resizeMode=\"cover\"\r\n                            />\r\n                        </View>\r\n                    </Marker>\r\n                ))}\r\n            </MapView>\r\n\r\n            {/* Visual Pin Overlay - EXACT center for iOS accuracy */}\r\n            <View pointerEvents=\"none\" className=\"absolute top-0 bottom-0 left-0 right-0 flex items-center justify-center\">\r\n                <View className=\"w-8 h-8 bg-blue-400/30 rounded-full flex items-center justify-center\">\r\n                    <View className=\"w-6 h-6 bg-blue-600/80 rounded-full flex items-center justify-center\">\r\n                        <View className=\"w-4 h-4 bg-blue-800 rounded-full\" />\r\n                    </View>\r\n                </View>\r\n                <View className=\"w-1 h-1 bg-black/20 rounded-full mt-1\" />\r\n            </View>\r\n\r\n            <TouchableOpacity\r\n                onPress={handleCurrentLocation}\r\n                className=\"absolute bottom-80 right-6 bg-white p-3 rounded-full shadow-lg border border-gray-100\"\r\n            >\r\n                <MaterialIcons name=\"my-location\" size={24} color=\"#3b82f6\" />\r\n            </TouchableOpacity>\r\n\r\n            <View className=\"absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl p-6 shadow-2xl\">\r\n                <Text className=\"text-gray-400 text-xs font-bold uppercase tracking-wide mb-1\">Confirm Location</Text>\r\n                <Text className=\"text-lg font-bold text-gray-900 mb-4\" numberOfLines={1}>\r\n                    {formData.location === \"Identifying location...\" ? \"...\" : formData.location}\r\n                </Text>\r\n                <View className=\"flex-row items-center space-x-2 bg-blue-50 p-3 rounded-xl\">\r\n                    <Ionicons name=\"information-circle\" size={20} color=\"#3b82f6\" />\r\n                    <Text className=\"text-blue-700 text-xs flex-1\">\r\n                        Move the map to center the pin at your location.\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n        </Animated.View>\r\n    );\r\n\r\n    // Step 3: Service Type\r\n    const renderStep3 = () => (\r\n        <Animated.View entering={SlideInRight} exiting={SlideOutLeft} className=\"flex-1 px-4 pt-4\">\r\n            <Text className=\"text-2xl font-bold text-gray-900 mb-2\">Service Type</Text>\r\n            <Text className=\"text-gray-500 mb-6\">What seems to be the problem?</Text>\r\n\r\n            <ScrollView showsVerticalScrollIndicator={false} contentContainerStyle={{ paddingBottom: 100 }}>\r\n                <View className=\"flex-row flex-wrap justify-between\">\r\n                    {PROBLEMS[formData.vehicleType || 'car']?.map((p, idx) => {\r\n                        const isSelected = formData.problem === p.name;\r\n                        // Ionicons mapping fallback\r\n                        let iconName = 'construct';\r\n                        if (p.icon === 'air') iconName = 'bicycle';\r\n                        if (p.icon === 'battery-charging') iconName = 'battery-charging';\r\n                        if (p.icon === 'settings') iconName = 'cog';\r\n                        if (p.icon === 'key') iconName = 'key';\r\n                        if (p.icon === 'water') iconName = 'water';\r\n                        if (p.icon === 'flash') iconName = 'flash';\r\n                        if (p.icon === 'search') iconName = 'search';\r\n                        if (p.icon === 'thermometer') iconName = 'thermometer';\r\n                        if (p.icon === 'help-circle') iconName = 'help-circle';\r\n\r\n                        return (\r\n                            <TouchableOpacity\r\n                                key={idx}\r\n                                onPress={() => setFormData({ ...formData, problem: p.name })}\r\n                                className={`w-[48%] mb-4 p-4 rounded-2xl border items-center justify-center h-32 active:scale-95 transition-transform ${isSelected ? 'bg-blue-50 border-blue-500 shadow-md' : 'bg-white border-gray-100 shadow-sm'}`}\r\n                            >\r\n                                <Ionicons name={iconName} size={32} color={isSelected ? '#3b82f6' : '#6b7280'} />\r\n                                <Text className={`mt-3 font-semibold text-center ${isSelected ? 'text-blue-700 font-bold' : 'text-gray-600'}`}>\r\n                                    {p.name}\r\n                                </Text>\r\n                            </TouchableOpacity>\r\n                        );\r\n                    })}\r\n                </View>\r\n            </ScrollView>\r\n        </Animated.View>\r\n    );\r\n\r\n    // Step 4: Additional Details\r\n    const renderStep4 = () => (\r\n        <Animated.View entering={SlideInRight} exiting={SlideOutLeft} className=\"flex-1 px-4 pt-4\">\r\n            <Text className=\"text-2xl font-bold text-gray-900 mb-2\">Additional Details</Text>\r\n            <Text className=\"text-gray-500 mb-6\">Describe the issue in more detail (Optional).</Text>\r\n\r\n            <View className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-4\">\r\n                <TextInput\r\n                    className=\"text-gray-800 text-lg h-40 text-top align-top\"\r\n                    multiline\r\n                    placeholder=\"e.g. My car stopped suddenly, there is a weird noise coming from the engine...\"\r\n                    placeholderTextColor=\"#9ca3af\"\r\n                    value={formData.additionalNotes}\r\n                    onChangeText={(t) => setFormData({ ...formData, additionalNotes: t })}\r\n                    autoFocus\r\n                />\r\n            </View>\r\n        </Animated.View>\r\n    );\r\n\r\n    // Step 5: Review\r\n    const renderStep5 = () => (\r\n        <Animated.View entering={SlideInRight} exiting={SlideOutLeft} className=\"flex-1 px-4 pt-4\">\r\n            <Text className=\"text-2xl font-bold text-gray-900 mb-2\">Review Request</Text>\r\n            <Text className=\"text-gray-500 mb-6\">Please review details before submitting.</Text>\r\n\r\n            <ScrollView showsVerticalScrollIndicator={false} contentContainerStyle={{ paddingBottom: 100 }}>\r\n\r\n                {/* Card 1: Vehicle & Problem */}\r\n                <View className=\"bg-white rounded-2xl p-5 mb-4 shadow-sm border border-gray-100\">\r\n                    <View className=\"flex-row items-center border-b border-gray-50 pb-4 mb-4\">\r\n                        <View className=\"w-12 h-12 bg-blue-50 rounded-full items-center justify-center mr-4\">\r\n                            {(() => {\r\n                                const v = VEHICLE_TYPES.find(t => t.id === formData.vehicleType);\r\n                                if (v) return <v.library name={v.icon} size={24} color=\"#2563eb\" />;\r\n                                return <Ionicons name=\"car\" size={24} color=\"#2563eb\" />;\r\n                            })()}\r\n                        </View>\r\n                        <View>\r\n                            <Text className=\"text-gray-500 text-xs uppercase tracking-wider font-bold\">Vehicle Type</Text>\r\n                            <Text className=\"text-gray-900 font-bold text-lg capitalize\">{formData.vehicleType}</Text>\r\n                        </View>\r\n                    </View>\r\n\r\n                    <View>\r\n                        <Text className=\"text-gray-500 text-xs uppercase tracking-wider font-bold mb-1\">Problem</Text>\r\n                        <Text className=\"text-gray-900 font-bold text-lg\">{formData.problem}</Text>\r\n                    </View>\r\n                </View>\r\n\r\n                {/* Card 2: Location */}\r\n                <View className=\"bg-white rounded-2xl p-5 mb-4 shadow-sm border border-gray-100\">\r\n                    <View className=\"flex-row items-start\">\r\n                        <Ionicons name=\"location\" size={24} color=\"#ef4444\" style={{ marginTop: 2, marginRight: 12 }} />\r\n                        <View className=\"flex-1\">\r\n                            <Text className=\"text-gray-500 text-xs uppercase tracking-wider font-bold mb-1\">Pick-up Location</Text>\r\n                            <Text className=\"text-gray-900 font-medium leading-6\">{formData.location}</Text>\r\n                        </View>\r\n                    </View>\r\n                    <View className=\"mt-4 pt-4 border-t border-gray-50 flex-row justify-between\">\r\n                        <Text className=\"text-gray-400 text-xs\">Lat: {formData.latitude.toFixed(4)}</Text>\r\n                        <Text className=\"text-gray-400 text-xs\">Lng: {formData.longitude.toFixed(4)}</Text>\r\n                    </View>\r\n                </View>\r\n\r\n                {/* Card 3: Notes */}\r\n                <View className=\"bg-white rounded-2xl p-5 mb-4 shadow-sm border border-gray-100\">\r\n                    <View className=\"flex-row items-start\">\r\n                        <Ionicons name=\"create\" size={24} color=\"#6b7280\" style={{ marginTop: 2, marginRight: 12 }} />\r\n                        <View className=\"flex-1\">\r\n                            <Text className=\"text-gray-500 text-xs uppercase tracking-wider font-bold mb-1\">Additional Notes</Text>\r\n                            <Text className=\"text-gray-900 italic\">\r\n                                {formData.additionalNotes ? formData.additionalNotes : \"No additional details provided.\"}\r\n                            </Text>\r\n                        </View>\r\n                    </View>\r\n                </View>\r\n\r\n            </ScrollView>\r\n        </Animated.View>\r\n    );\r\n\r\n    // Success View\r\n    const renderSuccessView = () => (\r\n        <Animated.View\r\n            entering={FadeIn}\r\n            className=\"absolute top-0 left-0 right-0 bottom-0 bg-white z-50 items-center justify-center px-6\"\r\n        >\r\n            <Animated.View\r\n                entering={ZoomIn.delay(200)}\r\n                className=\"w-32 h-32 bg-green-600 rounded-full items-center justify-center mb-8 shadow-xl shadow-green-200\"\r\n            >\r\n                <Ionicons name=\"checkmark\" size={64} color=\"white\" />\r\n            </Animated.View>\r\n\r\n            <Animated.Text\r\n                entering={FadeIn.delay(400)}\r\n                className=\"text-2xl font-black text-gray-900 mb-2 tracking-wider uppercase text-center\"\r\n            >\r\n                Request Submitted\r\n            </Animated.Text>\r\n\r\n            <Animated.Text\r\n                entering={FadeIn.delay(600)}\r\n                className=\"text-gray-500 font-medium text-center mb-8 text-base\"\r\n            >\r\n                Notifying mechanics near you...\r\n            </Animated.Text>\r\n\r\n            <Animated.View\r\n                entering={FadeIn.delay(800)}\r\n                className=\"bg-gray-50 p-6 rounded-2xl w-full items-center border border-gray-100\"\r\n            >\r\n                <Text className=\"text-xs font-bold text-gray-400 uppercase mb-2\">Service Location</Text>\r\n                <Text className=\"text-gray-900 font-bold text-lg text-center leading-6\">\r\n                    {formData.location}\r\n                </Text>\r\n            </Animated.View>\r\n        </Animated.View>\r\n    );\r\n\r\n    return (\r\n        <SafeAreaView className=\"flex-1 bg-white\">\r\n            <StatusBar barStyle=\"dark-content\" />\r\n            {showSuccess && renderSuccessView()}\r\n\r\n            {/* Header Pattern */}\r\n            <View className=\"bg-white px-4 pb-4 border-b border-gray-100 pt-2\">\r\n                <View className=\"flex-row items-center\">\r\n                    <TouchableOpacity\r\n                        onPress={() => step > 1 ? handlePrev() : navigation.goBack()}\r\n                        className=\"p-2 bg-gray-50 rounded-full mr-4\"\r\n                    >\r\n                        <Ionicons name=\"arrow-back\" size={24} color=\"#1f2937\" />\r\n                    </TouchableOpacity>\r\n\r\n                    <View className=\"flex-1 flex-row items-center\">\r\n                        <View className=\"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden flex-row mr-3\">\r\n                            <View className={`h-full bg-blue-500 transition-all duration-300 ${step >= 1 ? 'w-[20%]' : 'w-0'}`} />\r\n                            <View className={`h-full bg-blue-500 transition-all duration-300 ${step >= 2 ? 'w-[20%]' : 'w-0'}`} />\r\n                            <View className={`h-full bg-blue-500 transition-all duration-300 ${step >= 3 ? 'w-[20%]' : 'w-0'}`} />\r\n                            <View className={`h-full bg-blue-500 transition-all duration-300 ${step >= 4 ? 'w-[20%]' : 'w-0'}`} />\r\n                            <View className={`h-full bg-blue-500 transition-all duration-300 ${step >= 5 ? 'w-[20%]' : 'w-0'}`} />\r\n                        </View>\r\n                        <Text className=\"text-gray-400 font-bold text-xs\">Step {step}/5</Text>\r\n                    </View>\r\n                </View>\r\n            </View>\r\n\r\n            <View className=\"flex-1 bg-white mb-3\">\r\n                {step === 1 && renderStep1()}\r\n                {step === 2 && renderStep2()}\r\n                {step === 3 && renderStep3()}\r\n                {step === 4 && renderStep4()}\r\n                {step === 5 && renderStep5()}\r\n            </View>\r\n\r\n            <KeyboardAvoidingView behavior={Platform.OS === 'ios' ? 'padding' : undefined}>\r\n                <View className=\"p-4 border-t border-gray-100 bg-white shadow-[0_-5px_15px_rgba(0,0,0,0.05)] z-20\">\r\n                    <TouchableOpacity\r\n                        onPress={step === 5 ? handleSubmit : handleNext}\r\n                        disabled={!canProceed() || loading}\r\n                        className={`w-full py-4 rounded-2xl flex-row items-center justify-center shadow-lg active:scale-[0.98] ${canProceed() ? 'bg-blue-600 shadow-blue-200' : 'bg-gray-300 shadow-transparent'}`}\r\n                    >\r\n                        {loading ? <ActivityIndicator color=\"white\" /> : (\r\n                            <>\r\n                                <Text className=\"text-white font-bold text-lg mr-2\">\r\n                                    {step === 5 ? 'Submit Request' : 'Next Step'}\r\n                                </Text>\r\n                                <Ionicons name=\"arrow-forward\" size={20} color=\"white\" />\r\n                            </>\r\n                        )}\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </KeyboardAvoidingView>\r\n        </SafeAreaView>\r\n    );\r\n}","import { Ionicons } from '@expo/vector-icons';\r\nimport * as SecureStore from 'expo-secure-store';\r\nimport { Alert, ScrollView, StatusBar, Text, TouchableOpacity, View } from 'react-native';\r\nimport { SafeAreaView } from 'react-native-safe-area-context'; // Added SafeAreaView\r\nimport packageJson from '../../app.json';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst SettingsScreen = ({ navigation }) => {\r\n    const { logout, profile } = useAuth();\r\n    const appVersion = packageJson?.expo?.version || '1.0.0';\r\n\r\n    // Clear Cache Logic\r\n    const handleClearCache = async () => {\r\n        Alert.alert(\r\n            \"Clear App Data\",\r\n            \"This will clear the active service card and any drafts. You will stay logged in.\",\r\n            [\r\n                { text: \"Cancel\", style: \"cancel\" },\r\n                {\r\n                    text: \"Clear Data\",\r\n                    style: \"destructive\",\r\n                    onPress: async () => {\r\n                        try {\r\n                            // Deletes keys exactly as defined in Dashboard and ServiceRequest\r\n                            await SecureStore.deleteItemAsync('mechanicAcceptedData');\r\n                            await SecureStore.deleteItemAsync('punctureRequestFormData');\r\n\r\n                            Alert.alert(\"Success\", \"Local data cleared. Return to Dashboard to refresh.\");\r\n                        } catch (error) {\r\n                            Alert.alert(\"Error\", \"Failed to clear data.\");\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        );\r\n    };\r\n\r\n    const MenuItem = ({ icon, label, onPress, color = \"#374151\" }) => (\r\n        <TouchableOpacity\r\n            onPress={onPress}\r\n            className=\"flex-row items-center justify-between p-2 mb-2 border-y border-gray-100\"\r\n        >\r\n            <View className=\"flex-row items-center space-x-3\">\r\n                <View className=\" p-2 \">\r\n                    <Ionicons name={icon} size={20} color={color} />\r\n                </View>\r\n                <Text className=\"text-gray-700 font-medium text-base ml-3\">{label}</Text>\r\n            </View>\r\n            <Ionicons name=\"chevron-forward\" size={20} color=\"#9ca3af\" />\r\n        </TouchableOpacity>\r\n    );\r\n\r\n    return (\r\n        <SafeAreaView className=\"flex-1 bg-white\">\r\n            <StatusBar barStyle=\"dark-content\" />\r\n\r\n            {/* Header - Adjusted padding for SafeAreaView */}\r\n            <View className=\"bg-white px-4 pb-4 border-b border-gray-200 pt-2\">\r\n                <View className=\"flex-row items-center\">\r\n                    <TouchableOpacity\r\n                        onPress={() => navigation.goBack()}\r\n                        className=\"p-2 bg-gray-100 rounded-full mr-4\"\r\n                    >\r\n                        <Ionicons name=\"arrow-back\" size={24} color=\"#374151\" />\r\n                    </TouchableOpacity>\r\n                    <Text className=\"text-2xl font-bold text-gray-900\">Settings</Text>\r\n                </View>\r\n            </View>\r\n\r\n            <ScrollView className=\"flex-1 px-4 pt-6\" showsVerticalScrollIndicator={false}>\r\n                <Text className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 ml-1\">Account</Text>\r\n                <MenuItem\r\n                    icon=\"person\"\r\n                    label=\"My Profile\"\r\n                    onPress={() => navigation.navigate('Profile')}\r\n                    color=\"#2563eb\"\r\n                />\r\n                <MenuItem\r\n                    icon=\"construct\"\r\n                    label=\"Request Service\"\r\n                    onPress={() => navigation.navigate('ServiceRequest')}\r\n                    color=\"#f59e0b\"\r\n                />\r\n\r\n                {/* Maintenance Section */}\r\n                <Text className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 mt-4 ml-1\">Maintenance</Text>\r\n                <MenuItem\r\n                    icon=\"trash-outline\"\r\n                    label=\"Clear Cache & Data\"\r\n                    onPress={handleClearCache}\r\n                    color=\"#ef4444\"\r\n                />\r\n\r\n                {/* Legal & About Section */}\r\n                <Text className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 mt-4 ml-1\">Legal & Support</Text>\r\n                <MenuItem\r\n                    icon=\"document-text\"\r\n                    label=\"Terms & Conditions\"\r\n                    onPress={() => navigation.navigate('Legal', { type: 'terms', title: 'Terms & Conditions' })}\r\n                />\r\n                <MenuItem\r\n                    icon=\"shield-checkmark\"\r\n                    label=\"Privacy Policy\"\r\n                    onPress={() => navigation.navigate('Legal', { type: 'privacy', title: 'Privacy Policy' })}\r\n                />\r\n                <MenuItem\r\n                    icon=\"information-circle\"\r\n                    label=\"About Us\"\r\n                    onPress={() => navigation.navigate('Legal', { type: 'about', title: 'About Us' })}\r\n                />\r\n\r\n                {/* App Actions */}\r\n                <Text className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 mt-4 ml-1\">App</Text>\r\n                <TouchableOpacity\r\n                    onPress={logout}\r\n                    className=\"flex-row items-center justify-between p-4 bg-red-50 rounded-xl mb-3 border border-red-100\"\r\n                >\r\n                    <View className=\"flex-row items-center space-x-3\">\r\n                        <View className=\"bg-white p-2 rounded-full shadow-sm\">\r\n                            <Ionicons name=\"log-out\" size={20} color=\"#dc2626\" />\r\n                        </View>\r\n                        <Text className=\"text-red-600 font-medium text-base ml-3\">Logout</Text>\r\n                    </View>\r\n                </TouchableOpacity>\r\n\r\n                <View className=\"items-center mt-6 mb-10\">\r\n                    <Text className=\"text-gray-400 text-sm\">Version {appVersion}</Text>\r\n                    <Text className=\"text-gray-300 text-xs mt-1\">Mechanic Setu  2025</Text>\r\n                </View>\r\n            </ScrollView>\r\n        </SafeAreaView>\r\n    );\r\n};\r\n\r\nexport default SettingsScreen;","import { NavigationContainer } from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { ActivityIndicator, View } from 'react-native';\r\nimport { configureReanimatedLogger, ReanimatedLogLevel } from 'react-native-reanimated';\r\nimport './global.css';\r\nimport { AuthProvider, useAuth } from './src/context/AuthContext';\r\nimport { WebSocketProvider } from './src/context/WebSocketContext';\r\nimport { navigationRef } from './src/utils/navigationRef';\r\n// Configure Reanimated to suppress strict mode warnings\r\nconfigureReanimatedLogger({\r\n    level: ReanimatedLogLevel.warn,\r\n    strict: false,\r\n});\r\n\r\n// Import Screens\r\nimport CancellationScreen from './src/screens/CancellationScreen';\r\nimport DashboardScreen from './src/screens/DashboardScreen';\r\nimport FindingMechanicScreen from './src/screens/FindingMechanicScreen';\r\nimport HistoryScreen from './src/screens/HistoryScreen';\r\nimport LegalScreen from './src/screens/LegalScreen';\r\nimport LoginScreen from './src/screens/LoginScreen';\r\nimport MechanicFoundScreen from './src/screens/MechanicFoundScreen';\r\nimport NearbyMechanicsScreen from './src/screens/NearbyMechanicsScreen';\r\nimport OTPScreen from './src/screens/OTPScreen';\r\nimport ProcessFormScreen from './src/screens/ProcessFormScreen';\r\nimport ProfileScreen from './src/screens/ProfileScreen';\r\nimport ServiceRequestScreen from './src/screens/ServiceRequestScreen';\r\nimport SettingsScreen from './src/screens/SettingsScreen';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nconst Navigation = () => {\r\n    const { isAuthenticated } = useAuth();\r\n\r\n    if (isAuthenticated === null) {\r\n        return (\r\n            <View className=\"flex-1 justify-center items-center bg-gray-900\">\r\n                <ActivityIndicator size=\"large\" color=\"#2563eb\" />\r\n            </View>\r\n        );\r\n    }\r\n\r\n    return (\r\n        /* Attach the ref here */\r\n        <NavigationContainer ref={navigationRef}>\r\n            <Stack.Navigator screenOptions={{ headerShown: false }}>\r\n                {!isAuthenticated ? (\r\n                    <>\r\n                        <Stack.Screen name=\"Login\" component={LoginScreen} />\r\n                        <Stack.Screen name=\"Verify\" component={OTPScreen} />\r\n                        <Stack.Screen name=\"ProcessForm\" component={ProcessFormScreen} />\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <Stack.Screen name=\"Main\" component={DashboardScreen} />\r\n                        <Stack.Screen name=\"Profile\" component={ProfileScreen} />\r\n                        <Stack.Screen name=\"History\" component={HistoryScreen} />\r\n                        <Stack.Screen name=\"ServiceRequest\" component={ServiceRequestScreen} />\r\n                        <Stack.Screen name=\"FindingMechanic\" component={FindingMechanicScreen} />\r\n                        <Stack.Screen name=\"MechanicFound\" component={MechanicFoundScreen} />\r\n                        <Stack.Screen name=\"Cancellation\" component={CancellationScreen} />\r\n                        <Stack.Screen name=\"Settings\" component={SettingsScreen} />\r\n                        <Stack.Screen name=\"NearbyMechanics\" component={NearbyMechanicsScreen} />\r\n                        <Stack.Screen name=\"Legal\" component={LegalScreen} />\r\n                    </>\r\n                )}\r\n            </Stack.Navigator>\r\n        </NavigationContainer>\r\n    );\r\n};\r\n\r\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\r\n\r\nimport { useEffect } from 'react';\r\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\r\nimport { registerForPushNotificationsAsync } from './src/utils/notifications';\r\n\r\nexport default function App() {\r\n    useEffect(() => {\r\n        // Request notification permissions on app load\r\n        registerForPushNotificationsAsync();\r\n    }, []);\r\n\r\n    return (\r\n        <SafeAreaProvider>\r\n            <GestureHandlerRootView style={{ flex: 1 }}>\r\n                <AuthProvider>\r\n                    <WebSocketProvider>\r\n                        <Navigation />\r\n                    </WebSocketProvider>\r\n                </AuthProvider>\r\n            </GestureHandlerRootView>\r\n        </SafeAreaProvider>\r\n    );\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [203], () => (__webpack_require__(5871)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["API_URL","process","EXPO_PUBLIC_API_URL","api","axios","create","baseURL","withCredentials","xsrfCookieName","xsrfHeaderName","isRefreshing","refreshSubscribers","interceptors","request","use","async","console","log","config","method","toUpperCase","url","error","Promise","reject","response","includes","status","data","originalRequest","warn","isRefreshRequest","_retry","resolve","cb","push","post","BASE_URL","forEach","SecureStore","refreshError","AuthContext","createContext","useAuth","useContext","AuthProvider","children","user","setUser","useState","loading","setLoading","setError","checkAuth","useCallback","res","get","err","message","useEffect","isAuthenticated","_jsx","Provider","value","profile","login","email","key","id","toString","msg","googleLogin","token","detail","verifyOtp","otp","payload","resendOtp","logout","WebSocketContext","useWebSocket","BACKOFF_DELAYS","MAX_BACKOFF_INDEX","length","WebSocketProvider","socket","setSocket","lastMessage","setLastMessage","connectionStatus","setConnectionStatus","queueSize","setQueueSize","reconnectAttemptCount","setReconnectAttemptCount","ws","useRef","appState","AppState","currentState","reconnectInterval","reconnectTimeout","reconnectAttempt","messageQueue","isReconnecting","isMounted","heartbeatInterval","activeJobId","current","sendMessage","messageData","JSON","stringify","readyState","WebSocket","OPEN","send","flushMessageQueue","queueCopy","index","setActiveJobId","jobId","scheduleReconnect","delay","Math","min","setTimeout","connect","CONNECTING","wsToken","ws_token","Error","wsHost","replace","wsScheme","wsUrl","origin","headers","onopen","clearInterval","setInterval","heartbeatMessage","type","timestamp","Date","now","job_id","onmessage","event","parse","request_id","toLocaleTimeString","e","onclose","code","reason","onerror","clearTimeout","close","subscription","addEventListener","nextAppState","match","CLOSED","remove","useMemo","navigationRef","createNavigationContainerRef","navigate","name","params","isReady","resetRoot","reset","routes","CancellationScreen","navigation","useNavigation","route","useRoute","requestId","selectedReason","setSelectedReason","SafeAreaView","className","_jsxs","View","Text","map","TouchableOpacity","onPress","goBack","disabled","cancellation_reason","Alert","alert","text","errorMessage","ActivityIndicator","color","width","height","Dimensions","_worklet_10093401242965_init_data","_worklet_9115213298492_init_data","_worklet_15610157513094_init_data","_worklet_16971166143119_init_data","ConnectionStatus","translateX","useSharedValue","translateY","context","x","y","dragGesture","Gesture","Pan","onStart","ConnectionStatusJsx3","__closure","__workletHash","__initData","onUpdate","ConnectionStatusJsx2","translationX","translationY","onEnd","withSpring","ConnectionStatusJsx1","damping","rStyle","useAnimatedStyle","ConnectionStatusJsx4","transform","iconName","statusText","colorClass","bgColorClass","GestureDetector","gesture","Animated","style","position","zIndex","Ionicons","size","marginRight","WebMapView","_ref","initialRegion","region","_objectWithoutPropertiesLoose","_excluded","mapRef","mapLoaded","setMapLoaded","React","currentRegion","latitude","longitude","latitudeDelta","longitudeDelta","window","google","initializeMap","script","document","createElement","src","defer","onload","head","appendChild","maps","Map","center","lat","lng","zoom","mapTypeControl","streetViewControl","fullscreenControl","googleMap","child","Marker","renderMarker","props","Polyline","renderPolyline","coordinate","title","coordinates","path","coord","strokeColor","strokeWeight","strokeWidth","styles","container","ref","minHeight","_ref2","_excluded2","_ref3","_excluded3","StyleSheet","flex","overflow","top","left","right","bottom","justifyContent","alignItems","backgroundColor","PROVIDER_GOOGLE","cachedAds","lastFetchTime","getMapAds","Array","isArray","SNAP_POINTS","COLLAPSED","EXPANDED","_worklet_11954976620967_init_data","_worklet_11081176886531_init_data","_worklet_9157383813867_init_data","_worklet_9139103797986_init_data","DashboardScreen","userProfile","recentHistory","setRecentHistory","adsData","setAdsData","selectedAd","setSelectedAd","ads","loadAds","activeJob","setActiveJob","unsubscribe","addListener","checkActiveJob","getUserLocation","fetchRecentHistory","Location","requestForegroundPermissionsAsync","location","getCurrentPositionAsync","setRegion","coords","saved","parsed","sorted","sort","a","b","created_at","slice","DashboardScreenJsx3","DashboardScreenJsx2","max","withTiming","DashboardScreenJsx1","duration","rBottomSheetStyle","DashboardScreenJsx4","GestureHandlerRootView","StatusBar","barStyle","Image","source","require","resizeMode","MapView","provider","customMapStyle","showsUserLocation","showsMyLocationButton","ad","uri","logo","borderTopLeftRadius","borderTopRightRadius","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","paddingTop","profile_pic","first_name","last_name","handleOpenActiveJob","mechanic_details","mechanic","userLocation","user_location","LinearGradient","colors","item","vehical_type","MaterialCommunityIcons","problem","toLocaleDateString","ImageAdCard","bgColor","badge","accentColor","image","subtitle","numberOfLines","description","ctaText","mapStyle","_worklet_7176147622784_init_data","_worklet_8614316172246_init_data","_worklet_16116884979916_init_data","_worklet_10157085414381_init_data","_worklet_8466279230693_init_data","pulseRing","borderRadius","borderWidth","borderColor","bottomSheet","scanLine","FindingMechanicScreen","isFocused","useIsFocused","authUser","vehicleType","paramVehicle","paramProblem","jobDetails","setJobDetails","userData","staticLocation","savedForm","formData","Object","assign","loadJobDetails","service_request","parseInt","startFakeMechanicSimulation","msgJobId","String","alertTitle","alertMessage","cancelable","searchTimeSeconds","displayTime","setDisplayTime","interval","mins","floor","secs","padStart","scanX","withRepeat","RECOMMENDED_ADS","FindingMechanicScreenJsx3","FindingMechanicScreenJsx2","FindingMechanicScreenJsx1","FindingMechanicScreenJsx4","marginBottom","rScanStyle","FindingMechanicScreenJsx5","moveOnMarkerPress","toolbarEnabled","loadingEnabled","flat","anchor","tracksViewChanges","animateToRegion","ScrollView","FlatList","renderItem","scrollEnabled","keyExtractor","HistoryScreen","history","setHistory","refreshing","setRefreshing","fetchHistory","formatDate","dateString","day","month","year","hour","minute","refreshControl","RefreshControl","onRefresh","contentContainerStyle","padding","paddingBottom","showsVerticalScrollIndicator","statusStyle","getStatusColor","split","marginTop","price","LegalScreen","getContent","LoginScreen","setEmail","cookies","getItemAsync","checkSession","canGoBack","Constants","expoConfig","KeyboardAvoidingView","behavior","flexGrow","keyboardShouldPersistTaps","TextInput","placeholder","onChangeText","autoCapitalize","keyboardType","SafetyToolkit","visible","onClose","mechanicName","Modal","transparent","animationType","onRequestClose","activeOpacity","entering","SlideInDown","springify","locationUrl","Share","share","callMechanicSOS","Linking","openURL","reportIssue","callEmergency","Notifications","handleNotification","shouldShowAlert","shouldShowBanner","shouldShowList","shouldPlaySound","shouldSetBadge","ACTIVE_JOB_STORAGE_KEY","FORM_STORAGE_KEY","getDistanceFromLatLonInKm","lat1","lon1","lat2","lon2","dLat","deg2rad","dLon","sin","cos","atan2","sqrt","deg","PI","_worklet_3118902542387_init_data","_worklet_8578618404069_init_data","_worklet_12503117083519_init_data","_worklet_7467925905438_init_data","_worklet_2270323812018_init_data","MechanicFoundScreen","routeData","paramLocation","fallbackVehicle","fallbackProblem","setMechanic","setUserLocation","mechanicLocation","setMechanicLocation","estimatedTime","setEstimatedTime","setRequestId","hasSocket","hasLastMessage","lastMessageType","isJobCompleted","setIsJobCompleted","isJobCancelledState","setIsJobCancelledState","isMechanicArrived","setIsMechanicArrived","showSafetyToolkit","setShowSafetyToolkit","isMechanicConnected","setIsMechanicConnected","lastLocationUpdate","setLastLocationUpdate","connectivityCheckInterval","MechanicFoundScreenJsx3","MechanicFoundScreenJsx2","MechanicFoundScreenJsx1","MechanicFoundScreenJsx4","rSafetyButtonStyle","MechanicFoundScreenJsx5","mech","reqId","requestIdType","mechanicId","current_latitude","parseFloat","current_longitude","dataToSave","parsedForm","loadInitialData","hasRequestId","willProcess","currentRequestId","fullMessage","expectedMechanicId","receivedMechanicId","mechanic_id","expected_mechanic_id","eta","userCoords","mechCoords","distance","round","calculateETA","updateMechanicTrackingNotification","fitToCoordinates","edgePadding","animated","timeSinceLastUpdate","FadeIn","ZoomIn","lineDashPattern","geodesic","Mechanic_profile_pic","edges","handleCallMechanic","phone_number","Feather","NearbyMechanicsScreen","mechanics","setMechanics","fetchNearbyMechanics","options","body","queries","language","limit","offset","dedup","fetch","result","json","allMechanics","nearbyMechanics","dist","R","c","toFixed","filter","FadeInUp","place_id","business_id","random","FadeInDown","photos_sample","photo_url","full_address","address","rating","review_count","business_status","opening_status","ListEmptyComponent","OTPScreen","setOtp","timer","setTimer","canResend","setCanResend","otpInputRef","focus","prev","fill","_","i","cleaned","maxLength","caretHidden","selectionColor","opacity","fontSize","autoFocus","errorMsg","ProcessFormScreen","step","setStep","setFormData","firstName","lastName","phone","errors","setErrors","validateCurrentStep","newErrors","keys","handleSubmit","mobile_number","startsWith","s","prevStep","paddingHorizontal","ProgressBar","currentStep","stepLabel","isActive","renderContent","placeholderTextColor","nextStep","ProfileScreen","allHistory","setAllHistory","fetchAllData","fullList","initials","h","_Fragment","loadMoreHistory","currentLength","nextChunk","VEHICLE_TYPES","icon","library","PROBLEMS","bike","car","truck","ServiceRequestScreen","showDebugger","setShowDebugger","showSuccess","setShowSuccess","lastResponse","setLastResponse","additionalNotes","mapRegion","setMapRegion","saveTimeout","canProceed","handleCurrentLocation","getAddressFromCoords","addressResponse","reverseGeocodeAsync","addr","street","subregion","city","postalCode","Boolean","join","accuracy","Balanced","newRegion","SlideInRight","exiting","SlideOutLeft","v","isSelected","onRegionChangeComplete","pointerEvents","MaterialIcons","p","idx","multiline","t","find","undefined","additional_details","handleNext","SettingsScreen","appVersion","packageJson","expo","version","MenuItem","label","configureReanimatedLogger","level","ReanimatedLogLevel","strict","Stack","createNativeStackNavigator","Navigation","NavigationContainer","Navigator","screenOptions","headerShown","Screen","component","App","Device","isDevice","existingStatus","finalStatus","registerForPushNotificationsAsync","SafeAreaProvider","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","amdO","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}